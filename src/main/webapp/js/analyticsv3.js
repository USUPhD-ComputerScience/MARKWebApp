"use strict";angular.module("applause.foundation",["ngRoute","ngAnimate","mgcrea.ngStrap","checklist-model"]).config(function($interpolateProvider){$interpolateProvider.startSymbol("{[{"),$interpolateProvider.endSymbol("}]}")}).config(function($locationProvider){$locationProvider.html5Mode(!0)}).value("CONFIG",{SIDEBAR:!0,NAV:!0,APP_SEARCH:!0});var Applause={charts:{}};Array.prototype.find||(Array.prototype.find=function(predicate){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof predicate)throw new TypeError("predicate must be a function");for(var value,list=Object(this),length=list.length>>>0,thisArg=arguments[1],i=0;length>i;i++)if(value=list[i],predicate.call(thisArg,value,i,list))return value;return void 0});
angular.module("applause.foundation").controller("foundationCtrl",function($rootScope,$scope,CONFIG){$scope.CONFIG=CONFIG,$scope.offeringStyle=null==CONFIG.SHOW_CHROME||CONFIG.SHOW_CHROME?{}:{top:"0",left:0,bottom:0,right:0,height:"100%"},$scope.rootScope=$rootScope,null===$rootScope.loadingPage&&($rootScope.loadingPage=!0),window.rootScope=$rootScope});
angular.module("applause.foundation").config(["$routeProvider","$httpProvider",function($routeProvider,$httpProvider){var interceptor=["$rootScope","$q",function(scope,$q){function success(response){return response}function error(response){var status=response.status;if(401===status){var regex=/^https?[:][\/][\/]([^\/]+)([\/].*)?$/,result=document.URL.match(regex),domain="360-dev.applause.com";switch(result&&result[1]&&(domain=result[1]),domain){case"360.applause.com":break;case"360-staging.applause.com":break;default:domain="360-dev.applause.com"}var authUrl="https://"+domain+"/auth/signin?redirect_uri="+encodeURIComponent(document.URL);return void(window.location=authUrl)}return $q.reject(response)}return function(promise){return promise.then(success,error)}}];$httpProvider.responseInterceptors.push(interceptor)}]).value("CONFIG",{SIDEBAR:!0,NAV:!1,APP_SEARCH:!1,FEEDBACK:!0});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/benchmark/:appId/:countryCode",{templateUrl:"benchmark-view/benchmark-view.html",controller:"BenchmarkViewCtrl",reloadOnSearch:!1})}]).controller("BenchmarkViewCtrl",function($scope,$q,$routeParams,analyticsApiService,onboardingService,stateService){$scope.competitors={},$scope.competitorGroup=-1,$scope.showAllDates=!0,$scope.endDate=(new moment).subtract(1,"days")._d,$scope.until=(new moment).subtract(1,"days").format("YYYY-MM-DD"),$scope.since=(new moment).subtract(15,"days").format("YYYY-MM-DD"),$scope.$watch("endDate",function(newVal,oldVal){newVal!==oldVal&&($scope.until=moment(newVal).format("YYYY-MM-DD"),$scope.since=moment(newVal).subtract(15,"days").format("YYYY-MM-DD"),loadRatingsData(),loadSignalHits(),loadAppRankingsData())}),$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.metricSwitcherOptions=[{name:"Star Rating",value:"rating"},{name:"Applause Score",value:"quality_score"},{name:"Review Count",value:"review_count"}],$scope.metricSwitch={metric:"rating"},stateService.getApp().then(function(app){$scope.app=app,loadCompetitorData($scope.competitorGroup)}),stateService.getUser().then(function(user){if(user.groups&&0!==user.groups.length){$scope.groups=user.groups;var a=[{name:"Applause Related Apps",value:-1}];for(var key in user.groups)a.push({name:user.groups[key].group_name,value:user.groups[key].id});$scope.groupDrop={opts:a,select:-1};var pageString="benchmark";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".related-group-dropdown",pos:"top",text:"<p>See how your app stacks up against others in it's category.</p><p>Choose a group to compare from here.</p>"},{selector:".spotlight-pane h2 .tool-tip",pos:"right",text:"<p>Click on a competitor app to see a competitive analysis for that app.</p>"},{selector:".user-settings",pos:"right",text:"<p>Scroll down to compare the apps further.</p>",noArrow:!0}]})}}),$scope.setGroup=function(group){$scope.competitorGroup=group.value,loadCompetitorData(group.value)},$scope.$watch("competitor",function(newVal,oldVal){null==newVal||null!=oldVal&&newVal.app_id==oldVal.app_id||(loadSignalHits(),loadRatingsData())}),$scope.$on("APPLAUSE.COMPETITOR_SELECTED",function(e,competitor){$scope.competitor=competitor,$scope.$apply()}),$scope.processStreamData=function(data){return $scope.dates=data.dates,Object.keys(data.attributes).map(function(c){return{attribute:c,data:data.attributes[c].totals}})},$scope.$watch("metricSwitch.metric",function(newVal,oldVal){switch(newVal){case"quality_score":$scope.metricLabel="Applause Score";break;case"review_count":$scope.metricLabel="Review Count";break;default:$scope.metricLabel="Star Rating"}$scope.competitors[$scope.competitorGroup]&&loadAppRankingsData()});var loadCompetitorData=function(index){$scope.app&&(-1===index?analyticsApiService.competitors({appId:$scope.appId,country:$scope.country}).then(function(response){$scope.competitors[-1]=response.data.data.competitors,$scope.relatedAppData={self:$scope.app,competitors:$scope.competitors[-1].sort(function(a,b){return b.review_count-a.review_count})},$scope.competitor=$scope.competitors[-1][0],loadAppRankingsData()}):$scope.competitors[index]?($scope.competitor=$scope.competitors[index][0],$scope.relatedAppData={self:$scope.app,competitors:$scope.competitors[index]},loadAppRankingsData()):$q.all($scope.groups[index].apps.map(function(c){return analyticsApiService.appInfo(c.app_id,c.country)})).then(function(results){$scope.competitors[index]=results.map(function(c){return c.data.details}).filter(function(c){var a=$scope.app;return!(c.app_id===a.app_id&&c.store===a.store&&c.country===a.country)}).sort(function(a,b){return b.review_count-a.review_count}),$scope.relatedAppData={self:$scope.app,competitors:$scope.competitors[index]},$scope.competitor=$scope.competitors[index][0],loadAppRankingsData()},function(){}))},loadAppRankingsData=function(){var competitors=angular.copy($scope.competitors[$scope.competitorGroup]);competitors.length>4&&(competitors.length=4),$scope.rankGraphSelectedApp=$scope.app.app_id,analyticsApiService.appRankings({ranking_type:$scope.metricSwitch.metric,apps:competitors.map(function(v){return{app_id:v.app_id,country:v.country,store:v.market}}).concat([{app_id:$scope.app.app_id,country:$scope.app.country,store:$scope.app.market}]),since:$scope.since,until:$scope.until}).then(function(response){var responseKeys=Object.keys(response.data.data.apps),processedData=responseKeys.reduce(function(memo,k){var v=response.data.data.apps[k],app={app_id:v.app_id+":"+v.country,rankings:v.data.rank_order,values:v.data.rank_values,details:$scope.app.app_id===v.app_id&&$scope.app.country===v.country?$scope.app:_(competitors).findWhere({app_id:v.app_id,country:v.country})};return null!=app.details&&(app.img_url=app.details.img_url),memo[v.app_id+":"+v.country]=app,memo},{});delete processedData.dates;for(var finalData=[],keys=Object.keys(processedData),i=0;i<keys.length;i++)for(var j=0;j<processedData[keys[i]].rankings.length;j++)null==finalData[processedData[keys[i]].rankings[j]-1]&&(finalData[processedData[keys[i]].rankings[j]-1]=[]),finalData[processedData[keys[i]].rankings[j]-1][j]=processedData[keys[i]].details;$scope.appRankingsData={apps:processedData,data:finalData,dates:response.data.data.dates}})},loadRatingsData=function(){var selfArgs=[$scope.appId,$scope.since,$scope.until,$scope.country],competitorArgs=[$scope.competitor.app_id,$scope.since,$scope.until,$scope.country];$q.all({self:analyticsApiService.appRatingsOverTime.apply(null,selfArgs),competitor:analyticsApiService.appRatingsOverTime.apply(null,competitorArgs)}).then(function(response){var ratingsData={dates:angular.copy(response.self.data.data["^^all^^"].dates),self:response.self.data.data["^^all^^"],competitor:response.competitor.data.data["^^all^^"]};delete ratingsData.self.dates,delete ratingsData.competitor.dates,$scope.ratings=processRatings(ratingsData)})},processRatings=function(data){if(null!=data){for(var positiveRatings=[],negativeRatings=[],selfTotalPositive=0,selfTotalNegative=0,competitorTotalPositive=0,competitorTotalNegative=0,i=0;i<data.dates.length;i++){for(var negObj={values:[0,0],date:data.dates[i]},posObj={values:[0,0],date:data.dates[i]},j=1;5>=j;j++)4>j?(negObj.values[0]+=data.self["stars_"+j][i],negObj.values[1]+=data.competitor["stars_"+j][i],selfTotalNegative+=data.self["stars_"+j][i],competitorTotalNegative+=data.competitor["stars_"+j][i]):(posObj.values[0]+=data.self["stars_"+j][i],posObj.values[1]+=data.competitor["stars_"+j][i],selfTotalPositive+=data.self["stars_"+j][i],competitorTotalPositive+=data.competitor["stars_"+j][i]);positiveRatings.push(posObj),negativeRatings.push(negObj)}var ratings={positive:{data:{ratings:positiveRatings,dates:data.dates},self:{details:$scope.app,total:selfTotalPositive,percent:Math.round(selfTotalPositive/(selfTotalNegative+selfTotalPositive)*100)},competitor:{details:$scope.competitor,total:competitorTotalPositive,percent:Math.round(competitorTotalPositive/(competitorTotalNegative+competitorTotalPositive)*100)}},negative:{data:{dates:data.dates,ratings:negativeRatings},self:{details:$scope.app,total:selfTotalNegative,percent:Math.round(selfTotalNegative/(selfTotalNegative+selfTotalPositive)*100)},competitor:{details:$scope.competitor,total:competitorTotalNegative,percent:Math.round(competitorTotalNegative/(competitorTotalNegative+competitorTotalPositive)*100)}}};return ratings}},loadSignalHits=function(){$q.all({self:analyticsApiService.signalHitsOverTime({appId:$scope.appId,country:$scope.country,since:$scope.since,until:$scope.until}),competitor:analyticsApiService.signalHitsOverTime({appId:$scope.competitor.app_id,country:$scope.country,since:$scope.since,until:$scope.until})}).then(function(response){var selfSignalHitsData=$scope.processStreamData(response.self.data.data["^^all^^"]),competitorSignalHitsData=$scope.processStreamData(response.competitor.data.data["^^all^^"]);$scope.signalHitsData={self:selfSignalHitsData,competitor:competitorSignalHitsData,selfSignalHitCount:_(selfSignalHitsData).reduce(function(memo,val){return memo+_(val.data).reduce(function(m,v){return m+v})},0),competitorSignalHitCount:_(competitorSignalHitsData).reduce(function(memo,val){return memo+_(val.data).reduce(function(m,v){return m+v})},0)}})}});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/clusters/:appId/:countryCode",{templateUrl:"clusters-view/clusters-view.html",controller:"ClustersViewCtrl",reloadOnSearch:!1})}]).controller("ClustersViewCtrl",function($scope,$routeParams,analyticsApiService,stateService,onboardingService){stateService.getUser().then(function(user){var pageString="clusters";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".chart-arc",pos:"top",text:"<p>Clusters are grouped reviews that highlight what customers are saying.</p>",noArrow:!0},{selector:".page-filters",pos:"left",text:"<p>Filter Clusters here, and export them to a .csv file for reporting.<p>"},{selector:".cluster-stream h2",pos:"top",text:"<p>Each Cluster will display the info for that group.</p><p>Click a cluster to see specific reviews.<p>"}]})}),$scope.appId=$routeParams.appId,$scope.country=$routeParams.countryCode,$scope.viewName="clusters",$scope.updateEventName="applause.updateClusters",$scope.updateRatingsEventName="applause.updateRatings",$scope.clusters=[],$scope.limit=50,$scope.page=1,$scope.totalPages=0,$scope.loadingClusters=!1,$scope.q="",$scope.activeClusterFilter="all",$scope.timeBucket=0,$scope.app={appId:$scope.appId,country:$scope.country},$scope.$watch("timeBucket",function(newVal){$scope.search()}),$scope.$watch("activeClusterFilter",function(newVal){$scope.search()}),$scope.$watch("q",function(newVal){$scope.search()}),$scope.loadClusterStats=function(){var params={limit:1,country:$scope.country,date:"-1"};analyticsApiService.appReviewClusters($scope.appId,params).then(function(response){$scope.clusterStats=response.data.data.cluster_stats})},$scope.loadClusterStats(),$scope.search=function(){var searchParams={limit:$scope.limit,start:$scope.page*$scope.limit-$scope.limit,q:$scope.q,date:$scope.timeBucket,country:$scope.country};$scope.searchActive=""===$scope.q.trim()?!1:!0,"positive"==$scope.activeClusterFilter?searchParams.avg_rating=[4,5]:"negative"==$scope.activeClusterFilter&&(searchParams.avg_rating=[1,2,3]),$scope.loadingClusters=!0,analyticsApiService.appReviewClusterSearch($scope.appId,searchParams).then(function(response){var clusters=response.data.data;$scope.loadingClusters=!1,$scope.clusters=clusters.clusters,$scope.totalClusters=clusters.total})},$scope.search(),$scope.$on($scope.updateEventName,function(event,pagerEvent){pagerEvent||1===$scope.page?$scope.search():$scope.page=1})});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/compare/:appId/:countryCode",{templateUrl:"compare-view/compare-view.html",controller:"CompareViewCtrl",reloadOnSearch:!1})}]).controller("CompareViewCtrl",function($scope,stateService,analyticsApiService,$rootScope,$window,chartExportService,onboardingService){if(stateService.getUser().then(function(user){var pageString="compare";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".radar-chart",pos:"left",text:"<p>See how your app compares<br />across all Applause Attributes.</p>"},{selector:".radar-chart",pos:"right",text:"<p>The grey graph shows what the standards are in your app's category.<p>"},{selector:"#app-search-box",pos:"left",text:"<p>Search for other apps to directly compare to yours and industry averages.<p>"}]})}),$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.appSuggestionsCount=6,$scope.searchHasFocus=!1,$scope.showCat=!0,$scope.updateVisibleEvent="applause.updateRadarVisible",$scope.appList=[],$scope.radarApps=[],$scope.filteredApps=[],stateService.bindUrlParams($scope,{app:[$scope.appId+":"+$scope.country]}),$scope.$watchCollection("appList",function(){var iter=0;$scope.recommendedApps($scope.appId),$scope.radarApps=$scope.appList.map(function(a,i,ar){var cumScore=0,attScore=10;for(var key in a.data["^^all^^"].attributes)cumScore+=a.data["^^all^^"].attributes[key].score,-1==a.data["^^all^^"].attributes[key].score&&attScore--;return{id:a.appId,country:a.details.country,scores:a.data["^^all^^"].attributes,score:a.details.scores["^^all^^"],color:a.isActiveApp?"#00BAFF":$scope.radarColors[iter++],cumScore:cumScore,catScores:ar[0].data["^^all^^"].category_data.qa_frequencies,primary:0===i,isHidden:a.isHidden||-1===a.details.scores["^^all^^"],attScore:attScore}}).filter(function(a){return a.score>-1&&a.attScore>2}).sort(function(a,b){return b.cumScore-a.cumScore}),$scope.filteredApps=$scope.appList.map(function(a){return a.details}),$scope.app=$scope.appList.map(function(a){return a.details.app_id+":"+a.details.country})}),$scope.radarColors=["#9ABC80","#FF7A7A","#D3ADB6","#9AACB5"],$scope.trendAppInfo={title:"",category:""},$scope.hoverIn=function(app){app&&($scope.trendAppInfo={title:app.title,category:app.category})},$scope.exportChart=function(){$scope.exportingChart=!0;var chart=$window.document.querySelector(".radar-chart");chartExportService.exportToPng(chart,30,2400).then(function(){$scope.exportingChart=!1})},$scope.recApps=[],$scope.rec={},$scope.recommendedApps=function(appId){$scope.appList.length>0&&($scope.recAppCategory=$scope.appList[0].data["^^all^^"].category_data.category,analyticsApiService.categoryStats($scope.recAppCategory,{country:$scope.country}).then(function(response){$scope.recApps=response.data.data.top_n_apps;for(var i=0;i<$scope.recApps.length;i++)analyticsApiService.appInfo($scope.recApps[i]).then(function(response){for(var i=0;i<$scope.recApps.length;i++)$scope.rec[response.data.details.app_id]=response.data.details;$scope.hoverIn($scope.rec[$scope.recApps[0]])})}))},$scope.addRecApp=function(appId){analyticsApiService.appInfo(appId).then(function(response){$scope.addApp(response.data.details)})},$scope.addApp=function(app){if(!($scope.appList.length>=5)){for(var i=0;i<$scope.appList.length;i++)if($scope.appList[i].details.app_id===app.app_id&&$scope.appList[i].details.country===app.country)return;analyticsApiService.appInfo(app.app_id,app.country).then(function(results){app.app_id===$scope.appId&&app.country===$scope.country&&(results.data.isActiveApp=!0);var attScore=10;for(var key in results.data.data["^^all^^"].attributes)-1==results.data.data["^^all^^"].attributes[key].score&&attScore--;3>attScore&&(results.data.noData=!0),$scope.appList.push(results.data)},function(){console.error("CompareViewCtrl - Failed to get appInfo for app: "+app.app_id)})}},$scope.removeApp=function(app,e){e.stopPropagation();for(var index=-1,i=0;i<$scope.appList.length;i++){var c=$scope.appList[i];if(c.details.app_id===app.details.app_id&&c.details.country===app.details.country&&c.details.store===app.details.store){index=i;break}}-1!==index&&$scope.appList.splice(index,1)},$scope.toggleVisible=function(app){-1!==app.details.scores["^^all^^"]&&(app.isHidden=!app.isHidden,$rootScope.$broadcast($scope.updateVisibleEvent,app))},"string"==typeof $scope.app){var appArray=$scope.app.split(":");$scope.addApp({app_id:appArray[0],country:appArray[1]})}else $scope.app.length&&$scope.app.forEach(function(c){var a=c.split(":");$scope.addApp({app_id:a[0],country:a[1]})})});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/dashboard/:appId/:countryCode",{templateUrl:"dashboard-view/dashboard-view.html",controller:"DashboardViewCtrl",reloadOnSearch:!1})}]).controller("DashboardViewCtrl",function($scope,analyticsApiService,$q,$routeParams,offeringRouterService,stateService,notificationService,onboardingService){$scope.timeBucket=0,$scope.activeClusterFilter="all",$scope.$watch("activeClusterFilter",function(oldVal,newVal){null!=oldVal&&oldVal!=newVal&&$scope.updateTopClusters()}),$scope.$watch("timeBucket",function(oldVal,newVal){null!=oldVal&&oldVal!=newVal&&$scope.updateTopClusters()}),$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.countries=stateService.countries,$scope.updateEventName="applause.updateTopClusters";({limit:1,country:"us",date:$scope.timeBucket});$scope.relatedApps=[],analyticsApiService.appReleases($scope.appId,$scope.country).then(function(response){$scope.release=response.data.data.history[0].release_date;var a=moment(Date.now()),b=moment($scope.release);$scope.releaseDays=a.diff(b,"days")}),stateService.getApp().then(function(app){return $scope.app=app,$scope.catName=app.category,stateService.getUser().then(function(user){$scope.getRelatedApps($scope.appId,user.getAppGroups(app).filter(function(c){return c.related_apps}).length>0);var pageString="dashboard";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".sidebar-app .app-icon",pos:"right",text:"<p>Click the Product Switcher to see your groups and bookmarked apps.</p><p>Click again to dismiss.</p>"},{selector:".attribute-card-container .tool-tip",pos:"top",text:'<p>Anytime you see&nbsp;&nbsp;<i class="fa fa-info-circle" style="color:#fff;font-size:1.1em;"></i>, you can hover over for a quick tip or click on it for more detailed information.</p>'},{selector:".group-management",pos:"bottom",text:"<p>Add this app to a custom group to bookmark for later</p>"}]})}),$q.all({categoryStats:analyticsApiService.categoryStats($scope.catName,{country:$scope.country})}).then(function(response){$scope.categoryStats=response.categoryStats.data.data,$scope.onDataLoad($scope.app),$scope.topAttrInfo=$scope.app.data.attributes;var topAttrKeys=[];for(var key in $scope.topAttrInfo)topAttrKeys.push({name:key,score:$scope.topAttrInfo[key].score});topAttrKeys.sort(function(a,b){return b.score-a.score}),topAttrKeys.slice(2),$scope.topAttr=[topAttrKeys[0].name,topAttrKeys[1].name]}).then(function(){analyticsApiService.activityFeed({appId:$scope.app.app_id,country:stateService.getCountry(),params:{user_activities:!0}}).then(function(response){for(var activitiesWithIcons=response.data.data.activities,i=0;i<activitiesWithIcons.length;i++)"app_version_release"==activitiesWithIcons[i].activity&&(activitiesWithIcons[i].icon="iconic iconic-plus"),"star_rating_decreased"==activitiesWithIcons[i].activity&&(activitiesWithIcons[i].icon="iconic iconic-caret-bottom"),"star_rating_increased"==activitiesWithIcons[i].activity&&(activitiesWithIcons[i].icon="iconic iconic-caret-top"),"review_count_decreased"==activitiesWithIcons[i].activity&&(activitiesWithIcons[i].icon="iconic iconic-caret-bottom"),"review_count_increased"==activitiesWithIcons[i].activity&&(activitiesWithIcons[i].icon="iconic iconic-caret-top");$scope.activitiesData=activitiesWithIcons})})}),$scope.getRelatedApps=function(appId,userCompetitors){analyticsApiService.competitors({appId:appId,country:$scope.country,params:{user_competitors:userCompetitors}}).then(function(response){for(var relatedAppsByCat=_(response.data.data.competitors).reject(function(v){return v==$scope.app.app_id}),i=0;i<relatedAppsByCat.length;i++)analyticsApiService.appInfo(relatedAppsByCat[i].app_id,$scope.country).then(function(response){$scope.relatedApps.push(response.data)},function(){})},function(){notificationService.error("Error","Failed to load related apps")})},$scope.updateTopClusters=function(){var params={limit:50,date:$scope.timeBucket,country:stateService.getCountry()};"positive"==$scope.activeClusterFilter?params.avg_rating=[4,5]:"negative"==$scope.activeClusterFilter&&(params.avg_rating=[1,2,3]),analyticsApiService.appReviewClusterSearch($scope.appId,params).then(function(response){_(response.data.data.clusters).each(function(c){return c?(c.type=$scope.isNegativeCluster(c)?"negative":"positive",void(c.exampleReview=$scope.exampleReview(c))):!1}),$scope.topClusters=response.data.data.clusters})},$scope.isNegativeCluster=function(cluster){return cluster?cluster.avg_rating<4:!1},$scope.exampleReview=function(cluster){var review;return $scope.isNegativeCluster(cluster)?(review=cluster.example_reviews.negative_example,Object.keys(review).length<1&&(review=cluster.example_reviews.positive_example)):(review=cluster.example_reviews.positive_example,Object.keys(review).length<1&&(review=cluster.example_reviews.negative_example)),review},$scope.onDataLoad=function(app){analyticsApiService.appCountries($scope.appId).then(function(response){$scope.reviewedCountries=response.data.data.countries});var attributes=app.data.attributes,catAttributes=$scope.categoryStats.attribute_stats,appAttributes=[];for(var attr in attributes)catAttributes[attr]&&appAttributes.push({attribute:attr,score:attributes[attr].score,category_avg:Math.round(100*catAttributes[attr].avg),delta:attributes[attr].score-100*catAttributes[attr].avg,tip:app.data.category_data.qa_frequencies[attr].freq,type:attributes[attr].score-100*catAttributes[attr].avg<=0||-1==attributes[attr].score?"negative":"positive"});appAttributes.sort(function(a,b){return a.delta<0&&b.delta<0?Math.abs(b.delta)-Math.abs(a.delta):a.delta-b.delta}),$scope.appAttributes=appAttributes,$scope.attributeReviews={};for(var i=0;i<appAttributes.length;i++){var currentAttr=appAttributes[i];currentAttr.score<0||("negative"==currentAttr.type,function(){var attr=currentAttr.attribute,params={limit:1,country:stateService.getCountry(),date:$scope.timeBucket};analyticsApiService.reviewSearch($scope.appId,angular.extend({attributes:attr},params)).then(function(response){$scope.attributeReviews[attr]=response.data.data})}())}},$scope.updateTopClusters()});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/economy/:appId/:countryCode",{templateUrl:"economy-view/economy-view.html",controller:"EconomyViewCtrl",reloadOnSearch:!1})}]).controller("EconomyViewCtrl",function($scope,$routeParams,$q,analyticsApiService,offeringRouterService,stateService,$filter,onboardingService){$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),stateService.getUser().then(function(user){var pageString="economy";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".most-popular-attributes",pos:"top",text:"<p>This section shows you data for your selected app's category.</p>"},{selector:".trending-apps",pos:"top",text:"<p>See the trending apps in the category that have the biggest changes up or down.<p>"},{selector:".app-release h2",pos:"top",text:"<p>Understand the ecosystem with category-wide information on stats.<p>"}]})}),$scope.filterSwitch={market:"all",country:$scope.country,category:"all"},$scope.markets=[{title:"All",market:"all"},{title:"Apple",market:"apple"},{title:"Google",market:"google"}],$scope.countryOrder=stateService.countryOrder,$scope.countries=stateService.countries,analyticsApiService.categoryList().then(function(response){$scope.categorySwitcherOptions=_(response.data.data).map(function(v){return{name:v,value:v}}),$scope.categorySwitcherOptions=$scope.categorySwitcherOptions.filter(function(v){return"google"!=v.name.toLowerCase()&&"apple"!=v.name.toLowerCase()})}),$scope.$watch("filterSwitch",function(){$scope.loadDistributionData(),$scope.economyInfo()},!0),$scope.selectMarket=function(market){market.market!=$scope.filterSwitch.market&&($scope.filterSwitch.market=market.market)},$scope.selectCountry=function(country){country!=$scope.filterSwitch.country&&($scope.filterSwitch.country=country)},$scope.goToReviews=function(activity){var appId=activity.app_id,country=activity.country;offeringRouterService.gotoView("reviews/"+appId+"/"+country)},$scope.goToAttributes=function(activity){var appId=activity.app_id,country=activity.country;offeringRouterService.gotoView("stats/"+appId+"/"+country)},$scope.trendAppInfo={star:{datum:"",diff:"",diffVal:""},attr:{datum:"",diff:"",diffVal:""},rev:{datum:"",diff:"",diffVal:""}},$scope.hoverIn=function(key,datum,diff,diffVal){$scope.trendAppInfo[key]={datum:datum,percentage:diffVal,icon:$scope.getTrendIcon(diff)}},$scope.getTrendIcon=function(trend){switch(trend){case"decrease":return"iconic iconic-caret-bottom";case"increase":return"iconic iconic-caret-top";default:return"0"}},$scope.loadDistributionData=function(options){var options={params:{market:$scope.filterSwitch.market,country:$scope.filterSwitch.country,category:$scope.filterSwitch.category}},calls={releaseDays:analyticsApiService.daysSinceRelease({params:angular.extend({bin:50},options.params)}),scores:analyticsApiService.applauseScoreDistribution(options),ratings:analyticsApiService.starRatingsDistribution(options),numReviews:analyticsApiService.numReviewsDistribution({params:angular.extend(options.params,{scale:"ln",bin:50})})};null==$scope.app&&(calls.appInfo=analyticsApiService.appInfo($scope.appId,$scope.country)),$q.all(calls).then(function(response){response.appInfo&&($scope.app=response.appInfo.data.details);var rd=$scope.app.release_date.substr(0,4)+"-"+$scope.app.release_date.substr(4,2)+"-"+$scope.app.release_date.substr(6,2);if($scope.releaseDate=moment(rd),angular.isObject(response.scores.data.data)){var scoreData={};if(Object.keys(response.scores.data.data).length<100)for(var i=0;100>i;i++)scoreData[i]=response.scores.data.data[i]||0;else scoreData=response.scores.data.data;$scope.applauseScoreData=scoreData}else $scope.applauseScoreData=null;$scope.daysSinceReleaseData=angular.isObject(response.releaseDays.data.data)?response.releaseDays.data.data:null,$scope.starRatingsData=angular.isObject(response.ratings.data.data)?response.ratings.data.data:null,$scope.numReviewsData=angular.isObject(response.numReviews.data.data)?response.numReviews.data.data:null})},$scope.getApplauseScorePlacement=function(data){for(var i=0;i<data.length;i++){{data[i].label.split("-")}if($scope.app.applause_score==data[i].x)return i}},$scope.processApplauseScoreData=function(data){var processedData=[];data=_(data).omit(function(value,key){return key>100||0>key});for(var keys=Object.keys(data),i=0;i<keys.length;i++)processedData.push({x:keys[i],y:data[keys[i]],label:keys[i]});return processedData},$scope.getRatingsPlacement=function(data){return Math.round($scope.app.store_rating)},$scope.getNumReviewsPlacement=function(data){for(var i=0;i<data.length;i++){var index=data[i].label.split("-");if($scope.app.review_count>=index[0]&&$scope.app.review_count<=index[1])return i}},$scope.processNumReviewsData=function(data){var keys=Object.keys(data);keys.sort(function(a,b){var aVal=a.split("-")[0],bVal=b.split("-")[0];return aVal-bVal});for(var processedData=[],i=0;i<keys.length;i++){var label=keys[i];processedData.push({x:i,y:data[keys[i]],label:label})}return processedData},$scope.processRatingsData=function(data){for(var keys=Object.keys(data),processedData=[],i=keys[0];i<=keys[keys.length-1];i++){var label=i>1?i+" stars":i+" star";processedData.push({x:data[i],y:i,label:label})}return processedData},$scope.getReleasePlacement=function(data){for(var daysSinceRelease=moment().diff($scope.releaseDate,"days"),i=0;i<data.length;i++){var range=data[i].label.split("-");if(daysSinceRelease>=range[0]&&daysSinceRelease<=range[1])return i}},$scope.processReleaseData=function(data,bucketSize){return data=_(data).map(function(val,key){return{y:val,label:key}}),data.sort(function(a,b){return a.label.split("-")[0]-b.label.split("-")[0]}),data=_(data).map(function(val,index){return val.x=index,val})},$scope.getReleaseTooltipLabel=function(d){var nums=d.label.split("-").map(function(c){return $filter("prettyNumber")(parseInt(c))}).join(" - ");return nums+" DAYS"},$scope.getReviewCountTooltipLabel=function(d){var nums=d.label.split("-").map(function(c){return $filter("prettyNumber")(parseInt(c))}).join(" - ");return nums+" REVIEWS"},$scope.getScoreTooltipLabel=function(d){return"SCORE: "+d.label},$scope.economyInfoData={},$scope.economyInfoPopularData={},$scope.starDiff={},$scope.attrDiff={},$scope.revDiff={},$scope.starDiffValue={},$scope.attrDiffValue={},$scope.revDiffValue={},$scope.economyInfo=function(){analyticsApiService.economyInfoTrending($scope.filterSwitch).then(function(response){if(response.data.data.star_ratings){$scope.economyInfoData.starData=response.data.data.star_ratings["^^all^^"];for(var i=0;i<$scope.economyInfoData.starData.length;i++)$scope.starDiff[i]=$scope.economyInfoData.starData[i].diff>0?"increase":"decrease",$scope.starDiffValue[i]=$scope.economyInfoData.starData[i].abs_diff;$scope.hoverIn("star",$scope.economyInfoData.starData[0],$scope.starDiff[0],$scope.starDiffValue[0])}if(response.data.data.attributes){$scope.economyInfoData.attributesData=response.data.data.attributes["^^all^^"];for(var i=0;i<$scope.economyInfoData.attributesData.length;i++)$scope.attrDiff[i]=$scope.economyInfoData.attributesData[i].diff>0?"increase":"decrease",$scope.attrDiffValue[i]=$scope.economyInfoData.attributesData[i].abs_diff;$scope.hoverIn("attr",$scope.economyInfoData.attributesData[0],$scope.attrDiff[0],$scope.attrDiffValue[0])}if(response.data.data.reviews){$scope.economyInfoData.reviewsData=response.data.data.reviews["^^all^^"];for(var i=0;i<$scope.economyInfoData.reviewsData.length;i++)$scope.revDiff[i]=$scope.economyInfoData.reviewsData[i].diff>0?"increase":"decrease",$scope.revDiffValue[i]=Math.round($scope.economyInfoData.reviewsData[i].abs_diff);$scope.hoverIn("rev",$scope.economyInfoData.reviewsData[0],$scope.revDiff[0],$scope.revDiffValue[0])}}),analyticsApiService.economyInfo($scope.filterSwitch).then(function(response){var attrStatsCalc=response.data.data.attribute_stats,attrStatsArray=_(attrStatsCalc).map(function(val,key){return val.attr=key,val});attrStatsArray.sort(function(a,b){return b.freq-a.freq}),attrStatsArray.length=3,$scope.economyInfoPopularData=attrStatsArray})}});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/international/:appId/:countryCode",{templateUrl:"international-view/international-view.html",controller:"InternationalViewCtrl",reloadOnSearch:!1})}]).controller("InternationalViewCtrl",function($scope,analyticsApiService,$q,stateService,notificationService,onboardingService){function getAutoDates(){$scope.showAllDates&&$scope.chartData&&($scope.since=d3.max(d3.values($scope.chartData[$scope.metric]),function(d){return d[0].date}).format("YYYY-MM-DD"),$scope.until=d3.min(d3.values($scope.chartData[$scope.metric]),function(d){return d[d.length-1].date}).format("YYYY-MM-DD"))}function getActiveFunction(index){return function(){return $scope.countries[index].isActive}}$scope.since="",$scope.until="",$scope.showAllDates=!0,$scope.appId=stateService.getAppId(),$scope.countryOrder=stateService.countryOrder,$scope.countries=angular.copy(stateService.countries);var countryColorMap={us:"#00baff",gb:"rgb(154, 188, 128)",au:"rgb(206, 208, 116)",ca:"rgb(211, 173, 182)",fr:"rgb(188, 128, 178)",it:"rgb(255, 122, 122)",de:"rgb(85, 209, 219)",es:"rgb(215, 148, 186)",mx:"rgb(221, 171, 129)",br:"rgb(221, 221, 212)",ar:"rgb(128, 215, 149)"};stateService.bindUrlParams($scope,{metric:"reviewCount",country:$scope.countryOrder.map(function(c){return c})}),$scope.countryOrder.forEach(function(c){$scope.countries[c].isActive=-1!==$scope.country.indexOf(c),$scope.countries[c].color=countryColorMap[c]||"#00baff"}),$scope.$watch("showAllDates",getAutoDates),stateService.getApp().then(function(app){var country=stateService.getCountry(),appObj={};appObj[country]=app,$q.all($scope.countryOrder.filter(function(c){return c!==country}).map(function(c){return analyticsApiService.appInfo(app.app_id,c)})).then(function(results){results.forEach(function(c){c.data.details&&(appObj[c.data.details.country]=c.data.details)}),$scope.app=appObj,$scope.getTableData()})}),stateService.getUser().then(function(user){var pageString="international";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".offering-picker",pos:"bottom",text:"<p>This page allows you to see how your app is doing globally.</p>",noArrow:!0},{selector:".detail-table th:nth-child(3)",pos:"left",text:"<p>Click a table column to see the graph for that metric.<p>"},{selector:".detail-table th:nth-child(5)",pos:"top",text:"<p>Easily compare stats for your apps across the globe.<p>"}]})}),$scope.getTableData=function(){for(var i=0;i<$scope.countryOrder.length;i++){var c=$scope.countryOrder[i],details=$scope.app[c];if(details){{details.store_ratings[0],details.store_ratings[1],details.store_ratings[2],details.store_ratings[3],details.store_ratings[4],details.store_ratings[5]}$scope.countries[c].starRating=details.store_rating,$scope.countries[c].applauseScore=details.applause_score,$scope.countries[c].reviewCount=details.review_count,$scope.countries[c].daysSinceRelease=moment().diff(moment(details.release_date,"YYYYMMDD"),"days")}else $scope.countries[c].notFound=!0}},$scope.hoverCountry="",$scope.setMetric=function(metricName){$scope.metric=metricName},$scope.setHover=function(country){!country.notFound&&country.isActive&&($scope.hoverCountry=country.code)},$scope.clearHover=function(){$scope.hoverCountry=""},$scope.toggleActive=function(country){country.isActive=!country.isActive,$scope.$broadcast("applause.renderIntlChart"),$scope.country=$scope.countryOrder.filter(function(c){return $scope.countries[c].isActive})},$q.all([$q.all($scope.countryOrder.map(function(d,i,a){return analyticsApiService.scoresOverTime({appId:$scope.appId,country:d,timeunit:"weeks"})})),$q.all($scope.countryOrder.map(function(d,i,a){return analyticsApiService.appRatingsOverTime($scope.appId,null,null,d,"weeks")}))]).then(function(results){for(var scoresOverTime={},reviewCount={},reviewStarRating={},activeFunctions={},colors={},maxReviewCount=0,rangeFunctions={applauseScore:function(data){return[0,100]},reviewCount:function(data){return[0,d3.max(data,function(d){return d3.max(d.points,function(d){return d.value})})]},reviewStarRating:function(data){return[0,5]}},i=0;i<$scope.countryOrder.length;i++){var code=$scope.countryOrder[i];if(activeFunctions[code]=getActiveFunction(code),colors[code]=$scope.countries[code].color,results[0][i].data.data["^^all^^"]){scoresOverTime[code]=[];for(var j=0;j<results[0][i].data.data["^^all^^"].dates.length;j++)scoresOverTime[code].push({date:moment(results[0][i].data.data["^^all^^"].dates[j],"YYYY-MM-DD"),value:results[0][i].data.data["^^all^^"].quality[j]})}if(results[1][i].data.data["^^all^^"]&&results[1][i].data.data["^^all^^"].dates){$scope.countries[code].reviewStarRating=results[1][i].data.data["^^all^^"].avg;var data=results[1][i].data.data["^^all^^"];reviewCount[code]=[],reviewStarRating[code]=[];for(var j=0;j<data.dates.length;j++){var date=moment(data.dates[j],"YYYY-MM-DD"),val=data.stars_1[j]+data.stars_2[j]+data.stars_3[j]+data.stars_4[j]+data.stars_5[j];reviewCount[code].push({date:date,value:val}),maxReviewCount=Math.max(maxReviewCount,val),reviewStarRating[code].push({date:date,value:data.avg_ratings[j]})}}}$scope.chartData={applauseScore:scoresOverTime,reviewCount:reviewCount,reviewStarRating:reviewStarRating,activeFunctions:activeFunctions,colors:colors,rangeFunctions:rangeFunctions},getAutoDates()},function(){notificationService.error("Error","Failed to get chart data")})});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/report/:appId/:countryCode",{templateUrl:"report-view/report-view.html",controller:"ReportViewCtrl",reloadOnSearch:!1})}]).controller("ReportViewCtrl",function($scope,analyticsApiService,$q,stateService,notificationService,onboardingService){$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.isCheckingPermissions=!0,$scope.hasPermission=!1,analyticsApiService.downloadAQSpreadsheet({app_ids:$scope.app_ids,resp_type:"json"}).then(function(response){200==response.status&&($scope.isCheckingPermissions=!1,$scope.hasPermission=!0)},function(error){$scope.isCheckingPermissions=$scope.hasPermission=!1}),$scope.appSuggestionsCount=6,$scope.searchHasFocus=!1,$scope.filteredApps=[],$scope.addApp=function(entry){return function(app){entry.value={appId:app.app_id,country:app.country}}},$scope.appInfos={},$scope.appInfos.col_headers=["Company Name","iPhone App ID","iPad App ID","Android App ID"],$scope.appInfos.row_headers=["Your App","Competitor 1","Competitor 2"];var row_len=$scope.appInfos.row_headers.length,col_len=$scope.appInfos.col_headers.length;$scope.appTable=new Array(row_len);for(var i=0;row_len>i;i++){$scope.appTable[i]=new Array(col_len),$scope.appTable[i][0]={value:null};for(var j=1;col_len>j;j++)$scope.appTable[i][j]={placeholder:"Search "+$scope.appInfos.col_headers[j],value:null,func:null},$scope.appTable[i][j].func=$scope.addApp($scope.appTable[i][j])}$scope.presenterInfos={},$scope.presenterInfos.col_headers=["Name","Title","Email"],$scope.presenterInfos.row_headers=["Presenter 1","Presenter 2"];var row_len=$scope.presenterInfos.row_headers.length,col_len=$scope.presenterInfos.col_headers.length;$scope.presenters=new Array(row_len);for(var i=0;row_len>i;i++)$scope.presenters[i]=new Array(col_len);isNaN(parseInt($scope.appId))?$scope.appTable[0][3].value={appId:$scope.appId,country:$scope.country}:$scope.appTable[0][1].value={appId:$scope.appId,country:$scope.country},stateService.getApp().then(function(app){$scope.appTable[0][0].value=app.publisher}),$scope.AQReportExport=function(type){$scope.app_ids=[];for(var i=0;i<$scope.appInfos.row_headers.length;i++)for(var j=1;j<$scope.appInfos.col_headers.length;j++)"undefined"!=typeof $scope.appTable[i][j].value&&null!=$scope.appTable[i][j].value&&$scope.app_ids.push($scope.appTable[i][j].value.appId);$scope.setting={app:{company_name:$scope.appTable[0][0].value,iPhone_app_id:$scope.appTable[0][1].value,iPad_app_id:$scope.appTable[0][2].value,Android_app_id:$scope.appTable[0][3].value},competitors:[{company_name:$scope.appTable[1][0].value,iPhone_app_id:$scope.appTable[1][1].value,iPad_app_id:$scope.appTable[1][2].value,Android_app_id:$scope.appTable[1][3].value},{company_name:$scope.appTable[2][0].value,iPhone_app_id:$scope.appTable[2][1].value,iPad_app_id:$scope.appTable[2][2].value,Android_app_id:$scope.appTable[2][3].value}],presenter:[{name:$scope.presenters[0][0],title:$scope.presenters[0][1],email:$scope.presenters[0][2]},{name:$scope.presenters[1][0],title:$scope.presenters[1][1],email:$scope.presenters[1][2]}]};var req=null;"pptx"==type?($scope.exportingDeck=!0,req=analyticsApiService.downloadAQReport({setting:$scope.setting,resp_type:"pptx"})):"excel"==type&&($scope.exportingSheet=!0,req=analyticsApiService.downloadAQSpreadsheet({app_ids:$scope.app_ids,resp_type:"excel"})),req.then(function(response){var resp_content_type=response.headers("Content-Type");if("application/ms-excel"==resp_content_type||"application/vnd.ms-powerpoint"==resp_content_type){var download_data_type="application/ms-excel";"pptx"==type&&(download_data_type="application/vnd.ms-powerpoint");var ret_data=response.data;if("undefined"==typeof ret_data)notificationService.error("Failed to generate report","Please contact lzhong@applause.com for support.");else{var report_result=new Blob([ret_data],{type:type+";base64"}),resp_header=response.headers("Content-Disposition");if(null!=resp_header){var str=resp_header.split('"');saveAs(report_result,str[1])}}}else{for(var array=new Uint8Array(response.data),response_str="",i=0,len=array.length;len>i;++i)response_str+=String.fromCharCode(array[i]);var response_json=JSON.parse(response_str);notificationService.error("Failed to generate report",response_json.error_msg,1e4)}$scope.exportingDeck=$scope.exportingSheet=!1},function(errors){notificationService.error("Failed to generate report","Please contact lzhong@applause.com for support."),$scope.exportingDeck=$scope.exportingSheet=!1})}});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/settings/:appId/:countryCode",{templateUrl:"settings-view/settings-view.html",controller:"SettingsViewCtrl",reloadOnSearch:!1})}]).controller("SettingsViewCtrl",function($scope,$routeParams,$timeout,analyticsApiService,$window,$q,stateService,userService,$rootScope,notificationService){function createAlertObject(app){var u=$scope.userSettings.alerts,o={};for(var key in u)if(u.hasOwnProperty(key)){var a=u[key];a.app_id===app.app_id&&a.country===app.country&&a.store===app.store&&(o[a.type]=a)}return"undefined"==typeof o.trending&&(o.trending={type:"trending",app_id:app.app_id,country:app.country,store:app.store,active:!1,value:{days:7}}),"undefined"==typeof o.version&&(o.version={type:"version",app_id:app.app_id,country:app.country,store:app.store,active:!1,value:{}}),"undefined"==typeof o.keyword&&(o.keyword={type:"keyword",app_id:app.app_id,country:app.country,store:app.store,active:!1,value:{signals:[],verbose_alerts:!1}}),o}$rootScope.offeringPickerLightBG=!0,$scope.appId=$routeParams.appId,$scope.country=$routeParams.countryCode,$scope.appSuggestionsCount=5,$scope.appSearchFocus=!1,$scope.activeApp=0,$scope.activeGroup=0,$scope.alertObject={},$scope.showAlertModal=!1,$scope.showCustomAttrModal=!1,$scope.userSettings={},$scope.attrCount=0,$scope.keyLength=function(obj){return Object.keys(obj).length},stateService.subscribeUser($scope,function(user){$scope.userSettings=angular.copy(user),$scope.attrCount=Object.keys(user.attributes).length,$scope.groups=user.groups}),$scope.$watch(function(){return $scope.userSettings.country},function(newVal,oldVal){newVal!==oldVal&&"undefined"!=typeof oldVal&&userService.setCountry(newVal)}),$scope.editAppAlert=function(groupId,index){$scope.activeApp=index,$scope.activeGroup=groupId,$scope.alertObject=createAlertObject($scope.userSettings.groups[groupId].apps[index]),$scope.isSaving=!1,$scope.showAlertModal=!0},$scope.closeAlert=function(){$scope.showAlertModal=!1},$scope.saveAlert=function(){$scope.isSaving=!0,$q.all([userService.setAlert($scope.alertObject.trending),userService.setAlert($scope.alertObject.version),userService.setAlert($scope.alertObject.keyword)]).then(function(){$scope.showAlertModal=!1,$scope.isSaving=!1},function(){notificationService.error("Error","Failed to save alert settings")})},$scope.groupAttr={},$scope.addAttr=function(opt){$scope.groupEdit&&!$scope.groupEdit.custom_attribute_ids&&($scope.groupEdit.custom_attribute_ids=[]),"undefined"!=typeof opt&&-1!==opt.value&&$scope.groupEdit.custom_attribute_ids.push(opt.value);var a=[{value:-1,name:"Add Custom Attributes to your Group"}];for(var key in $scope.userSettings.attributes)-1===$scope.groupEdit.custom_attribute_ids.indexOf($scope.userSettings.attributes[key].id)&&a.push({value:$scope.userSettings.attributes[key].id,name:$scope.userSettings.attributes[key].name});$scope.groupAttr.opts=a,$timeout(function(){$scope.groupAttr.select=-1})},$scope.removeAttr=function(index){$scope.groupEdit.custom_attribute_ids.splice(index,1),$scope.addAttr()},$scope.isGroupCreate=!1,$scope.addApp=function(app){$scope.groupEdit.apps.push(app)},$scope.removeApp=function(index){$scope.groupEdit.apps.splice(index,1)},$scope.createGroup=function(){var newGroup=userService.getDefaultGroup();$scope.groupEdit=newGroup,$scope.addAttr(),$scope.isGroupCreate=!0,$scope.isSaving=!1,$scope.showGroupModal=!0,$timeout(function(){$window.document.getElementById("group-name").focus()})},$scope.editGroup=function(e,group){e.stopPropagation(),$scope.groupEdit=angular.copy(group),$scope.addAttr(),$scope.isGroupCreate=!1,$scope.isSaving=!1,$scope.isDeleting=!1,$scope.showGroupModal=!0},$scope.cancelGroup=function(){$scope.showGroupModal=!1},$scope.saveGroup=function(group){$scope.isSaving=!0,$scope.isGroupCreate?userService.createGroup(group).then(function(response){$scope.showGroupModal=!1,$scope.isSaving=!1,response.data.success?notificationService.success("Group Created","You just created a custom group."):notificationService.error("Error","Failed to create new group. ("+response.data.data+")",0)},function(){$scope.isSaving=!1,notificationService.error("Error","Failed to create new group.",0)}):userService.updateGroup(group).then(function(response){$scope.showGroupModal=!1,$scope.isSaving=!1,response.data.success?notificationService.success("Group Updated","You just updated a custom group."):notificationService.error("Error","Failed to update group. ("+response.data.data+")",0)},function(){$scope.isSaving=!1,notificationService.error("Error","Failed to update group.",0)})},$scope.deletePrompt=function(){$scope.showRemoveModal=!0},$scope.cancelPrompt=function(){$scope.showRemoveModal=!1},$scope.deleteGroup=function(group){$scope.isSaving=!0,userService.deleteGroup(group).then(function(response){$scope.showRemoveModal=!1,$scope.showGroupModal=!1,$scope.isSaving=!1,response.data.success?notificationService.success("Group Deleted","You just deleted a custom group."):notificationService.error("Error","Failed to delete group. ("+response.data.data+")",0)},function(){$scope.isSaving=!1,notificationService.error("Error","Failed to delete group.",0)})},$scope.isAttrCreate=!1,$scope.createAttr=function(){var newAttr={name:"",signals:[]};$scope.customAttrEdit=newAttr,$scope.isAttrCreate=!0,$scope.isSaving=!1,$scope.showCustomAttrModal=!0,$timeout(function(){$window.document.getElementById("custom-attribute-name").focus()},0)},$scope.editAttr=function(attr){$scope.customAttrEdit=angular.copy(attr),$scope.isAttrCreate=!1,$scope.isSaving=!1,$scope.isDeleting=!1,$scope.showCustomAttrModal=!0},$scope.cancelAttr=function(){$scope.showCustomAttrModal=!1},$scope.saveAttr=function(attr){$scope.isSaving=!0,$scope.isAttrCreate?userService.addAttribute(attr).then(function(response){$scope.showCustomAttrModal=!1,$scope.isSaving=!1,response.data.success?notificationService.success("Attribute Created","Your attribute has been successfully created"):notificationService.error("Error","Failed to create new attribute. ("+response.data.data+")",0)},function(){notificationService.error("Error","Failed to create new attribute.",0)}):userService.updateAttribute(attr).then(function(){$scope.showCustomAttrModal=!1,$scope.isSaving=!1,notificationService.success("Attribute Updated","Your attribute has been successfully updated")},function(){notificationService.error("Error","Failed to update attribute.",0)})},$scope.deleteAttr=function(attr){$scope.isDeleting=!0,userService.removeAttribute(attr).then(function(){$scope.showCustomAttrModal=!1,$scope.isDeleting=!1},function(){notificationService.error("Error","Failed to remove attribute")})}});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/reviews/:appId/:countryCode",{templateUrl:"reviews-view/reviews-view.html",controller:"ReviewsViewCtrl",reloadOnSearch:!1})}]).controller("ReviewsViewCtrl",function($scope,$routeParams,apiService,analyticsApiService,stateService,onboardingService,$window,chartExportService,notificationService){$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.updateEventName="applause.updateReviews",$scope.updateRatingsEventName="applause.updateRatings",$scope.reviews=[],$scope.limit=50,$scope.page=1,$scope.totalPages=0,$scope.loadingReviews=!1,stateService.bindUrlParams($scope,{q:"",star:0,attr:[],showAllDates:!0,since:moment().subtract(30,"days").format("YYYY-MM-DD"),until:moment().format("YYYY-MM-DD")}),$scope.attributes={satisfaction:!1,usability:!1,security:!1,performance:!1,stability:!1,pricing:!1,interoperability:!1,content:!1,elegance:!1,privacy:!1},$scope.activeAttrs=function(){var s="";for(var key in $scope.attributes)$scope.attributes[key]&&(s+=key.charAt(0).toUpperCase()+key.slice(1)+", ");return s.slice(0,-2)},stateService.getApp().then(function(app){stateService.getUser().then(function(user){var pageString="reviews";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".review-graph",pos:"bottom",text:"<p>This chart shows how your app's reviews are trending, so you can see what customers say after a release.</p>"},{selector:".review-aside h2",pos:"left",text:"<p>Filter the reviews by searching for keywords, selecting Attributes, or picking a specific date range or star rating<p>"},{selector:".export-link",pos:"top",text:"<p>Export the reviews or the Trending Review Sentiment graph quickly and easily!<p>"}]});var customAttributes=user.getAppAttributes(app);0!==customAttributes.length&&($scope.customAttributes={},customAttributes.forEach(function(c){$scope.customAttributes[c.id]=c}))})}),"string"==typeof $scope.attr?$scope.attributes[$scope.attr]=!0:$scope.attr&&$scope.attr.length&&$scope.attr.forEach(function(c){$scope.attributes[c]=!0}),$scope.startDate=moment($scope.since,"YYYY-MM-DD")._d,$scope.endDate=moment($scope.until,"YYYY-MM-DD")._d,$scope.getRatingsOverTime=function(){var since=$scope.showAllDates?moment().subtract(120,"days"):moment($scope.startDate),until=$scope.showAllDates?moment():moment($scope.endDate);since=moment.min(since,moment(until).subtract(30,"days")),analyticsApiService.appRatingsOverTime($scope.appId,since,until,$scope.country).then(function(response){$scope.ratingsOverTime=response.data.data["^^all^^"]},function(){notificationService.error("Error","Failed to load chart data. Please refresh the page to try again.",0)}).then(function(){var options={since:moment().subtract(7,"d").format("YYYY-MM-DD"),until:moment().format("YYYY-MM-DD"),appId:$scope.appId,country:$scope.country};analyticsApiService.starTrend(options).then(function(response){if(response.data.data["^^all^^"]){var a=response.data.data["^^all^^"].trends.avg_ratings,ninety=a["90th"],last=a.last,abs_diff=Math.abs(ninety-last);0===last&&(abs_diff=ninety),0===ninety&&(ninety=abs_diff);var d=abs_diff/ninety,e=100*d;$scope.trend={percentage:e,pointage:abs_diff,icon:$scope.getTrendIcon(a.alert)}}})})},$scope.getTrendIcon=function(trend){return"same"==trend?"0":"down"==trend?"iconic iconic-caret-bottom":"up"==trend?"iconic iconic-caret-top":void 0},$scope.exportChart=function(){$scope.exportingChart=!0;var chart=$window.document.querySelector(".review-graph"),classArray=["export-color","export-bw"];chartExportService.exportToPng(chart,30,2400,classArray).then(function(){$scope.exportingChart=!1})},$scope.reviewsCsv=function(){},$scope.search=function(){var attributes=[],star=0===$scope.star?"all":$scope.star;for(var attr in $scope.attributes)$scope.attributes[attr]&&attributes.push(attr);$scope.searchActive=null==$scope.q||""===$scope.q.trim()?!1:!0;var dateRange={since:$scope.showAllDates?"":$scope.startDate,until:$scope.showAllDates?"":$scope.endDate};$scope.loadingReviews=!0;var searchParams={limit:$scope.limit,start:$scope.page*$scope.limit-$scope.limit,q:$scope.q,attributes:attributes,star:star,country:$scope.country};for(var key in $scope.customAttributes)$scope.customAttributes[key].active&&(searchParams.attributes.push($scope.customAttributes[key].name),searchParams.custom_id=$scope.customAttributes[key].id);""!==dateRange.since&&(searchParams.since=dateRange.since),""!==dateRange.until&&(searchParams.until=dateRange.until),analyticsApiService.reviewSearch($scope.appId,searchParams).then(function(response){var reviews=response.data.data;$scope.loadingReviews=!1,$scope.reviews=reviews.results,$scope.totalReviews=reviews.total,$scope.totalPages=Math.ceil($scope.totalReviews/$scope.limit)}),searchParams.csv=!0,$scope.reviewsCsv=function(){apiService.handleCsvRequest(analyticsApiService.reviewSearch($scope.appId,searchParams))}},$scope.search(),analyticsApiService.appReleases($scope.appId,$scope.country).then(function(response){$scope.releases=response.data.data.history,$scope.getRatingsOverTime()},function(){notificationService.error("Error","Failed to load app releases data. Please refresh the page to try again.",0)}),$scope.$on($scope.updateEventName,function(event,pagerEvent){pagerEvent||1===$scope.page?$scope.search():$scope.page=1;var bodyScroller=document.getElementsByTagName("body")[0];bodyScroller.scrollTop=560}),$scope.$watch("startDate",function(newVal,oldVal){newVal!==oldVal&&($scope.since=moment(newVal).format("YYYY-MM-DD"),$scope.getRatingsOverTime())}),$scope.$watch("endDate",function(newVal,oldVal){newVal!==oldVal&&($scope.until=moment(newVal).format("YYYY-MM-DD"),$scope.getRatingsOverTime())}),$scope.$watch("showAllDates",function(newVal,oldVal){newVal!==oldVal&&$scope.getRatingsOverTime()}),$scope.$watch("attributes",function(newVal,oldVal){if(newVal!==oldVal){var attrs=[];for(var key in $scope.attributes)$scope.attributes[key]&&attrs.push(key);$scope.attr=attrs}},!0)});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/stats/:appId/:countryCode",{templateUrl:"stats-view/stats-view.html",controller:"StatsViewCtrl",reloadOnSearch:!1})}]).controller("StatsViewCtrl",function($scope,stateService,$q,analyticsApiService,$window,chartExportService,offeringRouterService,onboardingService){$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.app={},stateService.bindUrlParams($scope,{attribute:"quality"}),$scope.appId=stateService.getAppId(),$scope.country=stateService.getCountry(),$scope.gotoReviews=function(query){offeringRouterService.gotoView({view:"reviews",params:{q:query,attr:[$scope.attribute]}})},$scope.setAttribute=function(attr,noScore){noScore||("quality"===attr||$scope.reviewCountData[attr]||$scope.loadReviewData(attr),$scope.attribute=attr)},$scope.attributes={quality:{},satisfaction:{},usability:{},security:{},performance:{},stability:{},pricing:{},interoperability:{},content:{},elegance:{},privacy:{}},$scope.attributeOrder=["quality","satisfaction","usability","security","performance","stability","pricing","interoperability","content","elegance","privacy"],$scope.attributeData={},$scope.signals={},$scope.signalDetails={},$scope.customAttributes={},$scope.showCustom=!1,$scope.exportChart=function(){$scope.exportingChart=!0;var chart=$window.document.querySelector(".score-over-time-graph"),classArray=["export-bw"];chartExportService.exportToPng(chart,30,2400,classArray).then(function(){$scope.exportingChart=!1})},$scope.loadReviewData=function(attr){analyticsApiService.reviewSearch($scope.appId,{attributes:[attr],full:!1,limit:1,country:$scope.country}).then(function(response){$scope.reviewCountData[attr]={review_count:response.data.data.total,daily_avg:response.data.data.total/$scope.reviewCountData.quality.counts.length}},function(){})},stateService.getApp().then(function(app){for(var key in app.data.attributes)$scope.attributes[key]="undefined"==typeof $scope.attributes[key]?{}:$scope.attributes[key],$scope.attributes[key].score=app.data.attributes[key].score;$scope.attributes.quality.score=app.applause_score,stateService.getUser().then(function(user){var pageString="stats";user.pageViews[pageString]||onboardingService.render({view:pageString,tips:[{selector:".offering-picker",pos:"bottom",text:"<p>This page is where you can see Applause data specific to your app.</p>",noArrow:!0},{selector:".stats-aside h2",pos:"left",text:"<p>Use the filters to see data specific to different Attributes.</p><p>Then, you can see the signals for each attribute.<p>"},{selector:".score-over-time-graph",pos:"bottom",text:"<p>This chart shows how your Applause Score has changed over time.</p>"}]});var customAttributes=user.getAppAttributes(app);customAttributes.length>0&&($scope.showCustom=!0,customAttributes.forEach(function(c){$scope.customAttributes[c.name]={id:c.id}})),$scope.getData(app)})}),$scope.getData=function(app){$q.all({scores:analyticsApiService.scoresOverTime({appId:$scope.appId,country:$scope.country}),reviews:analyticsApiService.reviewCounts($scope.appId,null,null,null,{country:$scope.country}),trends:analyticsApiService.scoresOverTime({appId:$scope.appId,summary:!0,country:$scope.country})}).then(function(results){$q.all({scores:$q.all(Object.keys($scope.customAttributes).map(function(c){return analyticsApiService.scoresOverTime({appId:$scope.appId,country:$scope.country,quality:!1,custom_id:$scope.customAttributes[c].id})})),signals:$q.all(Object.keys($scope.customAttributes).map(function(c){return analyticsApiService.appInfo($scope.appId,$scope.country,{custom_id:$scope.customAttributes[c].id})}))}).then(function(attrResults){attrResults.scores.map(function(c){if(!c.data.success||!c.data.data["^^all^^"])return void 0;var key=Object.keys(c.data.data["^^all^^"]).filter(function(c){return"dates"!==c})[0];return{name:key,data:c.data.data["^^all^^"][key]}}).forEach(function(c,i){if(!c)return void($scope.customAttributes[Object.keys($scope.customAttributes)[i]].noData=!0);var first=c.data[0],last=c.data[c.data.length-1],delta=last-first;$scope.customAttributes[c.name].score=last,results.scores.data.data["^^all^^"][c.name]=c.data,results.trends.data.data["^^all^^"][c.name]=delta>0?{trend:"up"}:0>delta?{trend:"down"}:{trend:"same"}}),attrResults.signals.map(function(c){if(!c.data.success||!c.data.data["^^all^^"])return void 0;var key=Object.keys(c.data.data["^^all^^"].attributes)[0];return{name:key,data:c.data.data["^^all^^"].attributes[key]}}).forEach(function(c){c&&(app.data.attributes[c.name]=c.data)}),$scope.chartData=results.scores.data.data["^^all^^"],$scope.trends=results.trends.data.data["^^all^^"],$scope.processSignals(app)});var reviews=results.reviews.data.data["^^all^^"],startDate=moment(reviews.dates[0]),endDate=moment(reviews.dates[reviews.dates.length-1]),days=endDate.diff(startDate,"days")+1;reviews.daily_avg=reviews.review_count/days,$scope.reviewCountData={quality:reviews},"quality"!==$scope.attribute&&$scope.setAttribute($scope.attribute)},function(){})},$scope.processSignals=function(app){for(var attributes=app.data.attributes,keys=Object.keys(attributes),total_signals=0,total_hits=0,i=0;i<keys.length;i++){$scope.signals[keys[i]]={signals:attributes[keys[i]].signals},$scope.signals[keys[i]].total_signals=Object.keys(attributes[keys[i]].signals).length,total_signals+=$scope.signals[keys[i]].total_signals;for(var attribute_hits=0,attr_signals=$scope.signals[keys[i]].signals,attr_signals_keys=Object.keys(attr_signals),attribute_count_limit=0,ordered_signal_list=[],j=0;j<attr_signals_keys.length;j++){for(var signal_hits=0,signal_count_limit=0,k=0;5>k;k++)attribute_hits+=attr_signals[attr_signals_keys[j]][k],signal_hits+=attr_signals[attr_signals_keys[j]][k],signal_count_limit=attr_signals[attr_signals_keys[j]][k]>signal_count_limit?attr_signals[attr_signals_keys[j]][k]:signal_count_limit;attr_signals[attr_signals_keys[j]].total_hits=signal_hits,ordered_signal_list.push({signal:attr_signals_keys[j],count:signal_hits}),attr_signals[attr_signals_keys[j]].signal_count_limit=signal_count_limit,attribute_count_limit=signal_hits>attribute_count_limit?signal_hits:attribute_count_limit,attr_signals[attr_signals_keys[j]].percents=[];for(var k=0;5>k;k++){var current_p=attr_signals[attr_signals_keys[j]][k]/attr_signals[attr_signals_keys[j]].total_hits;attr_signals[attr_signals_keys[j]].percents[k]=100*current_p}attr_signals[attr_signals_keys[j]].max_percent=Math.max(attr_signals[attr_signals_keys[j]].percents[0],attr_signals[attr_signals_keys[j]].percents[1],attr_signals[attr_signals_keys[j]].percents[2],attr_signals[attr_signals_keys[j]].percents[3],attr_signals[attr_signals_keys[j]].percents[4]),ordered_signal_list.sort(function(a,b){return a.count>b.count?-1:a.count<b.count?1:0}),$scope.signals[keys[i]].ordered_signal_list=ordered_signal_list}$scope.signals[keys[i]].total_hits=attribute_hits,total_hits+=attribute_hits}$scope.signal_details={total_signals:total_signals,total_hits:total_hits}}});
"use strict";angular.module("applause.foundation").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"welcome-view/welcome-view.html",controller:"WelcomeViewCtrl",reloadOnSearch:!1})}]).controller("WelcomeViewCtrl",function($scope,offeringRouterService,stateService){$scope.appSuggestionsCount=4,$scope.searchHasFocus=!1,$scope.filteredApps=[],$scope.goToApp=function(app){offeringRouterService.gotoView({country:app.country,app:app.app_id})},stateService.getUser().then(function(user){console.dir(user.groups),$scope.groups=user.groups})});
var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(view){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=doc.createEvent("MouseEvents");event.initMouseEvent("click",!0,!1,view,0,0,0,0,0,!1,!1,!1,!1,0,null),node.dispatchEvent(event)},webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()};view.chrome?revoker():setTimeout(revoker,arbitrary_revoke_timeout)},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);for(var i=event_types.length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}},FileSaver=function(blob,name){var object_url,target_view,slice,filesaver=this,type=blob.type,blob_changed=!1,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if((blob_changed||!object_url)&&(object_url=get_URL().createObjectURL(blob)),target_view)target_view.location.href=object_url;else{var new_tab=view.open(object_url,"_blank");void 0==new_tab&&"undefined"!=typeof safari&&(view.location.href=object_url)}filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)},abortable=function(func){return function(){return filesaver.readyState!==filesaver.DONE?func.apply(this,arguments):void 0}},create_if_not_found={create:!0,exclusive:!1};return filesaver.readyState=filesaver.INIT,name||(name="download"),can_use_save_link?(object_url=get_URL().createObjectURL(blob),save_link.href=object_url,save_link.download=name,click(save_link),filesaver.readyState=filesaver.DONE,dispatch_all(),void revoke(object_url)):(view.chrome&&type&&type!==force_saveable_type&&(slice=blob.slice||blob.webkitSlice,blob=slice.call(blob,0,blob.size,force_saveable_type),blob_changed=!0),webkit_req_fs&&"download"!==name&&(name+=".download"),(type===force_saveable_type||webkit_req_fs)&&(target_view=view),req_fs?(fs_min_size+=blob.size,void req_fs(view.TEMPORARY,fs_min_size,abortable(function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable(function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable(function(file){file.createWriter(abortable(function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL(),filesaver.readyState=filesaver.DONE,dispatch(filesaver,"writeend",event),revoke(file)},writer.onerror=function(){var error=writer.error;error.code!==error.ABORT_ERR&&fs_error()},"writestart progress write abort".split(" ").forEach(function(event){writer["on"+event]=filesaver["on"+event]}),writer.write(blob),filesaver.abort=function(){writer.abort(),filesaver.readyState=filesaver.DONE},filesaver.readyState=filesaver.WRITING}),fs_error)}),fs_error)};dir.getFile(name,{create:!1},abortable(function(file){file.remove(),save()}),abortable(function(ex){ex.code===ex.NOT_FOUND_ERR?save():fs_error()}))}),fs_error)}),fs_error)):void fs_error())},FS_proto=FileSaver.prototype,saveAs=function(blob,name){return new FileSaver(blob,name)};return FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE,dispatch(filesaver,"abort")},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,saveAs}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module?module.exports=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs});
angular.module("applause.foundation").directive("activityFeed",function(analyticsApiService,offeringRouterService){return{restrict:"E",replace:!0,scope:{app:"=",activitiesData:"="},templateUrl:"activity-feed/activity-feed.html",controller:function($scope){$scope.goSomewhere=function(activity){var appId=activity.app_id,country=activity.country;offeringRouterService.gotoView("app_version_release"==activity.activity?{view:"dashboard",app:appId,country:country}:{view:"reviews",app:appId,country:country})}}}});
angular.module("applause.foundation").service("analyticsApiService",function(apiService,$q,$location,$routeParams){function getUrl(){return apiService.getBaseUrl()+CONFIG.ROOT}function momentToUTC(d){var t=d.getTime(),offset=d.getTimezoneOffset();return new Date(t+6e4*offset)}var CONFIG={ROOT:"analyticsv3/api",SKIP_CACHE:!1,LIMIT:30,SEARCH_SIZE:20,DATE_FORMAT:"%Y-%m-%d"};this.user={detail:{get:function(){return apiService.apiCall({url:getUrl()+"/user"})}},theme:{get:function(){return apiService.apiCall({url:getUrl()+"/user/color"})},update:function(color){return"string"==typeof color&&(color={default_color:color}),apiService.post(getUrl()+"/user/color",color)}},country:{get:function(){return apiService.apiCall({url:getUrl()+"/user/country"})},update:function(countryCode){return"string"==typeof countryCode&&(countryCode={default_country:countryCode}),apiService.post(getUrl()+"/user/country",countryCode)}},bookmark:{get:function(id){return id="undefined"==typeof id?"all":id,apiService.apiCall({url:getUrl()+"/user/bookmark/"+id})},create:function(obj){return apiService.post(getUrl()+"/user/bookmark",obj)},update:function(obj){return apiService.put(getUrl()+"/user/bookmark/"+obj.id,obj)},"delete":function(id){return id="object"==typeof id?id.id:id,apiService["delete"](getUrl()+"/user/bookmark/"+id)}},alert:{get:function(id){return id="undefined"==typeof id?"all":id,apiService.apiCall({url:getUrl()+"/user/alert/"+id})},create:function(obj){return apiService.post(getUrl()+"/user/alert",obj)},update:function(id,obj){return apiService.put(getUrl()+"/user/alert/"+id,obj)},"delete":function(id){return apiService["delete"](getUrl()+"/user/alert/"+id)}},attribute:{get:function(id){return id="undefined"==typeof id?"all":id,apiService.apiCall({url:getUrl()+"/user/attribute/"+id})},create:function(obj){return apiService.post(getUrl()+"/user/attribute",obj)},update:function(id,obj){return apiService.put(getUrl()+"/user/attribute/"+id,obj)},"delete":function(id){return apiService["delete"](getUrl()+"/user/attribute/"+id)}},pageview:{get:function(){return apiService.apiCall({url:getUrl()+"/user/pageview"})},create:function(obj){return apiService.post(getUrl()+"/user/pageview",obj)}}},this.appRatings=function(appId){var versions="^^all^^";return apiService.apiCall({url:getUrl()+"/app/"+appId+"/ratings",params:{appversion:versions,quality:!0,summary:!0,date_format:"%Y-%m-%d"}})},this.attributeStats=function(attribute,market,category){return category=category||"all",market=market||"all",category=encodeURIComponent(category),market=encodeURIComponent(market),apiService.apiCall({url:getUrl()+"/aggregated/attributestats/"+attribute,params:{full:!0,category:category,market:market}})},this.scoresOverTime=function(options){var appId;angular.isString(options)?appId=options:(appId=options.appId,delete options.appId);var defaults={timeunit:"months",quality:!0,appversion:"^^all^^",date_format:"%Y-%m-%d",attribute:"^^all^^"},params=angular.extend({},defaults,options);return apiService.apiCall({url:getUrl()+"/app/"+appId+"/scores",params:params})},this.collectionStats=function(options){return angular.isArray(options.appids)?apiService.apiCall({url:getUrl()+"/aggregated/collectionstats",params:{appId:options.appids}}):$q.reject()},this.reviewCounts=function(appId,start,finish,attribute,options){options=options||{};var defaults={timeunit:"months",appversion:"^^all^^",date_format:"%Y-%m-%d"};return options=angular.extend(defaults,options),attribute=attribute||"^^all^^",apiService.apiCall({url:getUrl()+"/reviews/app/"+appId+"/counts",params:options})},this.appRatingsOverTime=function(appId,start,finish,country,timeUnit){var p={quality:!0,appversion:"^^all^^",date_format:"%Y-%m-%d",country:country||"us"};return angular.isString(start)?p.since=start:start&&(p.since=start.format("YYYY-MM-DD")),angular.isString(finish)?p.until=finish:finish&&(p.until=finish.format("YYYY-MM-DD")),apiService.apiCall({url:getUrl()+"/app/"+appId+"/ratings",params:p})},this.reviewStream=function(appId,start,limit,csv){var params={use_matthew:!0,date:"Desc",country:"us",full:!0,limit:limit,since:start};return csv&&(params.resp_type="csv"),apiService.apiCall({url:getUrl()+"/reviews/app/"+appId+"/version/%5E%5Eall%5E%5E",urlOnly:csv,params:params})},this.reviewSearch=function(appId,params){var defaultParams={q:"",limit:100,start:0,date:"Desc",full:!0,use_matthew:!0,country:"us",urlOnly:!1};if(params=angular.extend({},defaultParams,params),params.since&&(params.since=momentToUTC(params.since),params.since=moment(params.since).format("YYYY-MM-DD")),params.until&&(params.until=momentToUTC(params.until),params.until=moment(params.until).format("YYYY-MM-DD")),null!=params.attributes){angular.isArray(params.attributes)||(params.attributes=[params.attributes]);for(var i=0;i<params.attributes.length;i++)params.q=params.q+" attr:("+params.attributes[i]+")"}null!=params.star&&0==params.star&&delete params.star,null!=params.csv&&params.csv&&(params.resp_type="csv"),"mongo"==$location.search().review_index&&(params.review_index="mongo");var path="/reviews/search/app/"+appId+"/version/%5E%5Eall%5E%5E";return apiService.apiCall({url:getUrl()+path,params:params})},this.reviewsById=function(reviewIds,params){if(void 0==reviewIds)return $q.reject();var paramDefaults={use_matthew:!0};params=angular.extend(paramDefaults,params||{});return reviewIds.length>50&&(reviewIds.length=50),reviewIds="id="+reviewIds.join("&id="),apiService.apiCall({url:getUrl()+"/reviews",rawQueryParams:reviewIds,params:params})},this.appReviewClusters=function(appId,params,urlOnly){if(void 0==appId)return $q.reject();var defaultParams={full:!0,q:""};return params=angular.extend({},defaultParams,params),null!=params.date&&0==params.date&&delete params.date,apiService.apiCall({url:getUrl()+"/aggregated/clustering/"+appId,urlOnly:urlOnly,params:params})},this.appReviewClusterSearch=function(appId,params,urlOnly){if(void 0==appId)return $q.reject();var defaultParams={full:!0,q:""};if(params=angular.extend({},defaultParams,params),null!=params.avg_rating){var avgRatingStr="";if(angular.isArray(params.avg_rating))for(var i=params.avg_rating.length-1;i>=0;i--)avgRatingStr+=" avg_rating:("+params.avg_rating[i]+")";else(angular.isString(params.avg_rating)||angular.isNumber(params.avg_rating))&&(avgRatingStr+=" avg_rating:("+params.avg_rating+")");params.q=params.q+avgRatingStr,delete params.avg_rating}if(null!=params.attr){var attrStr="";if(angular.isArray(params.attr))for(var i=params.attr.length-1;i>=0;i--)attrStr+=" attr:("+params.attr[i]+")";else attrStr+=" attr:("+params.attr+")";params.q=params.q+attrStr,delete params.attr}if(null!=params.time_bucket){var timeBucketStr=" time_bucket:("+params.time_bucket+")";params.q=params.q+timeBucketStr,delete params.time_bucket}return apiService.apiCall({url:getUrl()+"/aggregated/clustering/search/"+appId,urlOnly:urlOnly,params:params})},this.appInfo=function(appId,country,params){if(void 0==appId)return $q.reject();var defaultParams={full:!0,appversion:"^^all^^",country:country||"us"};return params=angular.extend({},defaultParams,params),apiService.apiCall({url:getUrl()+"/app/"+appId+"/details",params:params})},this.appReleases=function(appId,country){return void 0==appId?$q.reject():(country=country||"us",apiService.apiCall({url:getUrl()+"/app/"+appId+"/release_history",params:{date_format:"%Y-%m-%d",country:country||"us"}}))},this.appCountries=function(appId){return"undefined"==typeof appId?$q.reject():apiService.apiCall({url:getUrl()+"/app/"+appId+"/countries"})},this.reviewCsvUrl=function(appId){var params={resp_type:"csv",full:!0,date:"Desc",limit:100,country:"us"};return apiService.apiCall({url:getUrl()+"/reviews/search/app/"+appId+"/version/^^all^^",params:params})},this.clusterCsvUrl=function(app){var params={resp_type:"csv",country:app.details?app.details.country:app.country};return apiService.apiCall({url:getUrl()+"/aggregated/clustering/"+app.appId,params:params})},this.appClusterStats=function(appIds,params){if(!appIds)return $q.reject();params=params||{},params.country=params.country||"us";var appIds="app_id="+appIds.join("&app_id=");return apiService.apiCall({url:getUrl()+"/aggregated/clustering/clusterstats",rawQueryParams:appIds,params:params})},this.appSearch=function(options){return this.searchApp.apply(this,arguments)},this.searchApp=function(options,params){if(params=params||{},null==options.q||options.q.trim&&""==options.q.trim())return $q.reject();var defaultParams={start:0,limit:20,q:options.q,country:options.country};return params=angular.extend(defaultParams,params),options.q=encodeURIComponent(options.q.trim()),apiService.apiCall({url:getUrl()+"/app/search",params:params})},this.categoryStats=function(categoryName,params){return params=params||{},apiService.apiCall({url:getUrl()+"/aggregated/categorystats/"+categoryName,params:params})},this.scorecardUrl=function(appId){var params={country:"us"};return apiService.apiCall({url:getUrl()+"/scorecard?app_id="+appId,params:params})},this.starTrend=function(options){var url=getUrl()+"/app/"+options.appId+"/ratings/alert",params={quality:!0,appversion:"%5E%5Eall%5E%5E",since:options.since,until:options.until,date_format:"%Y-%m-%d",country:options.country};return apiService.apiCall({url:url,params:params})},this.economyInfo=function(filterSwitch){var market=filterSwitch.market,cat=filterSwitch.category,params={country:filterSwitch.country};return"all"!=market&&(params.store=filterSwitch.market),apiService.apiCall({url:getUrl()+"/aggregated/categorystats/"+cat,params:params})},this.economyInfoTrending=function(filterSwitch){var params={country:filterSwitch.country};if("all"!=filterSwitch.market)var params={store:filterSwitch.market};if("all"!=filterSwitch.category)var params={category:filterSwitch.category};return apiService.apiCall({url:getUrl()+"/aggregated/trendingapps",params:params})},this.activityFeed=function(options){var url=getUrl()+"/app/"+options.appId+"/activityfeed",params={skipcache:CONFIG.SKIP_CACHE,country:options.country};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,appid:options.appId,params:params})},this.daysSinceRelease=function(options){var url=getUrl()+"/aggregated/distributionmetric/days_since_release";options=options||{},options.params=options.params||{};var params={market:"all"};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,params:params})},this.signalHitsOverTime=function(options){var url=getUrl()+"/app/"+options.appId+"/signals",params={appversion:"^^all^^",skipcache:CONFIG.SKIP_CACHE,attribute:"^^all^^",since:options.since,until:options.until,date_format:CONFIG.DATE_FORMAT,summary:!1,country:options.country||"us"};return apiService.apiCall({url:url,appid:options.appId,params:params})},this.competitors=function(options){var url=getUrl()+"/app/"+options.appId+"/competitors",params={skipcache:CONFIG.SKIP_CACHE,full:!0,apikey:"uClFS06DuQ1CWx09ZeJt4BD5NyKsIQJp",country:options.country||"us"};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,appid:options.appId,params:params})},this.applauseScoreDistribution=function(options){var url=getUrl()+"/aggregated/distributionmetric/applause_scores";options=options||{},options.params=options.params||{};var params={market:"all"};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,params:params})},this.starRatingsDistribution=function(options){var url=getUrl()+"/aggregated/distributionmetric/star_ratings";options=options||{},options.params=options.params||{};var params={market:"all",apikey:"uClFS06DuQ1CWx09ZeJt4BD5NyKsIQJp"};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,params:params})},this.numReviewsDistribution=function(options){var url=getUrl()+"/aggregated/distributionmetric/num_reviews";options=options||{},options.params=options.params||{};var params={market:"all",apikey:"uClFS06DuQ1CWx09ZeJt4BD5NyKsIQJp"};return params=angular.extend({},params,options.params),apiService.apiCall({url:url,params:params})},this.appRankings=function(data){var url=getUrl()+"/aggregated/rank/apps",defaultData={ranking_type:"review_count",date_format:"%Y-%m-%d"};return data=angular.extend({},defaultData,data),apiService.post(url,data)},this.downloadAQReport=function(options){var url=getUrl()+"/download_aq_report",params={resp_type:options.resp_type,country:options.country};return apiService.downloadApiCall({method:"post",params:params,data:options.setting,url:url,responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/vnd.ms-powerpoint;"}})},this.downloadAQSpreadsheet=function(options){var url=getUrl()+"/download_aq_spreadsheet",params={resp_type:options.resp_type,app_id:options.app_ids};return apiService.downloadApiCall({method:"get",params:params,url:url,responseType:"arraybuffer",headers:{"Content-Type":"application/json",Accept:"application/ms-excel;"}})},this.categoryList=function(){var url=getUrl()+"/info/names/categories";return apiService.apiCall({url:url})}});
angular.module("applause.foundation").service("apiService",function($http,$location){var CONFIG={PROD_URL:"https://360.applause.com/",DEV_URL:"https://360-dev.applause.com/",STAGING_URL:"https://360-staging.applause.com/",SELF_URL:"localhost"===$location.host()||"local.applause.com"===$location.host()?"https://360-dev.applause.com/":"/"};this.getBaseUrl=function(){var backend=$location.search().backend||"";switch(backend.toLowerCase()){case"dev":return CONFIG.DEV_URL;case"staging":return CONFIG.STAGING_URL;case"prod":return CONFIG.PROD_URL;case"":return CONFIG.SELF_URL;default:return"https://"+backend+".applause.com/"}};var accessToken="";try{accessToken=window.auth_init.accessToken}catch(e){}try{delete window.auth_init}catch(e){}accessToken&&($http.defaults.headers.common.Authorization="Bearer "+accessToken);var product="";try{product=window.product}catch(e){}product&&($http.defaults.headers.common["X-uTest-logger-product"]=product);var refId="";try{refId=window.refId}catch(e){}refId&&($http.defaults.headers.common["X-uTest-logger-ref-id"]=refId);var traceId=0;try{traceId=window.traceId}catch(e){}this.apiCall=function(options){options=options||{};var defaultParams={},defaultOptions={url:null,urlOnly:!1,rawQueryParams:""};null!=$location.search().review_index&&(defaultParams.review_index=$location.search().review_index),options=angular.extend({},defaultOptions,options),options.params=angular.extend({},defaultParams,options.params);for(var url=options.url+"?",paramKeys=Object.keys(options.params),paramString="",i=0;i<paramKeys.length;i++)if(0!==i&&(paramString+="&"),angular.isArray(options.params[paramKeys[i]]))for(var j=0;j<options.params[paramKeys[i]].length;++j)0!==j&&(paramString+="&"),paramString+=paramKeys[i]+"="+encodeURIComponent(options.params[paramKeys[i]][j]).replace(/%3A/g,":");else paramString+=paramKeys[i]+"="+encodeURIComponent(options.params[paramKeys[i]]).replace(/%3A/g,":");return url+=paramString,options.rawQueryParams.length>0&&(url+="&"+options.rawQueryParams),options.urlOnly?url:$http.get(url,{headers:{"X-uTest-logger-trace-id":traceId++}})},this["delete"]=function(url,options){return options=options||{},"headers"in options||(options.headers={}),options.headers["X-uTest-logger-trace-id"]=traceId++,$http["delete"](url,options)},this.post=function(url,data,options){return options=options||{},"headers"in options||(options.headers={}),options.headers["X-uTest-logger-trace-id"]=traceId++,$http.post(url,data,options)},this.put=function(url,data,options){return options=options||{},"headers"in options||(options.headers={}),options.headers["X-uTest-logger-trace-id"]=traceId++,$http.put(url,data,options)},this.downloadApiCall=function(options){options=options||{};var defaultParams={},defaultOptions={url:null,params:{},rawQueryParams:"",data:null,responseType:"arraybuffer"};null!=$location.search().review_index&&(defaultParams.review_index=$location.search().review_index),options=angular.extend({},defaultOptions,options),options.params=angular.extend({},defaultParams,options.params);for(var url=options.url+"?",paramKeys=Object.keys(options.params),paramString="",i=0;i<paramKeys.length;i++)if(angular.isArray(options.params[paramKeys[i]]))for(var j=0;j<options.params[paramKeys[i]].length;++j)paramString+="&",paramString+=paramKeys[i]+"="+options.params[paramKeys[i]][j];else paramString+="&",paramString+=paramKeys[i]+"="+options.params[paramKeys[i]];return url+=paramString,"headers"in options||(options.headers={}),options.headers["X-uTest-logger-trace-id"]=traceId++,$http("post"==options.method?options.headers?{method:"post",url:url,data:options.data,responseType:options.responseType,headers:options.headers}:{method:"post",url:url,data:options.data,responseType:options.responseType}:options.headers?{method:"get",url:url,responseType:options.responseType,headers:options.headers}:{method:"get",url:url,responseType:options.responseType})},this.handleCsvRequest=function(httpObj){httpObj.success(function(data,status,headers,config){var filename="export.csv",disposition=headers("Content-Disposition");try{filename=disposition.match(/filename=\"([^\"]+)\"/)[1]}catch(error){}angular.element("<a/>").attr({href:"data:attachment/csv; charset=utf-8,"+encodeURI(data),target:"_blank",download:filename})[0].click()}).error(function(data,status,header,config){console.log("failed download through a")})}});
angular.module("applause.foundation").directive("appHistogramGraph",function($timeout,$window,$filter,chartTickCleanService){return{restrict:"E",replace:!0,scope:{data:"=",getPlacement:"=",processData:"=",tooltipLabel:"=",tooltipLabelTwo:"=",naturalLog:"="},templateUrl:"app-histogram-graph/app-histogram-graph.html",controller:function($scope){},link:function($scope,element,attrs){var options={};null!=attrs.height&&(options.height=attrs.height),null!=attrs.width&&(options.width=attrs.width),$window.onresize=function(){$scope.$apply()},$scope.$watch("data",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.data)});var margin={top:20,right:40,bottom:10,left:30},svg=d3.select(element[0]).append("svg").attr("width","100%").attr("height","190px").append("g").attr("transform","translate("+margin.left+","+margin.top+")");$scope.render=function(data){if(data){null!=$scope.processData&&(data=$scope.processData(data,32)),null!=renderTimeout&&$timeout.cancel(renderTimeout);var renderTimeout=(d3.format(",.0f"),d3.time.format("%H:%M"),$timeout(function(){var width=d3.select(element[0])[0][0].offsetWidth-margin.left-margin.right,height=150,barWidth=width/data.length-2,placementIndex=$scope.getPlacement(data),x=d3.scale.linear().domain([0,d3.max(data,function(d){return d.x})]).range([barWidth/2,width-barWidth]),y=d3.scale.linear().domain([0,d3.max(data,function(d){return d.y})]).range([height,0]).nice(2),xAxis=d3.svg.axis().scale(x).orient("bottom").tickFormat(function(i){if(-1===data[i].label.indexOf("-"))return data[i].label;var nums=data[i].label.split("-").map(function(c){return $filter("prettyNumber")(parseInt(c))});return nums[0]+"-"+nums[1]}),yAxis=d3.svg.axis().scale(y).orient("right").tickFormat(function(d){return 0===d?0:$filter("prettyNumber")($scope.naturalLog?Math.pow(Math.E,d):d)}).ticks(5).tickSize(width);svg.selectAll(".axis").remove();var xAxisEl=svg.insert("g",":first-child").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis);xAxisEl.selectAll(".tick text").style("text-anchor",null),svg.insert("g",":first-child").attr("class","y axis").call(yAxis).selectAll("text").attr("x",-30);var barGroups=svg.selectAll(".bar-group").data(data);barGroups.enter().append("g").attr("class","bar-group").classed("active",function(d,i){return placementIndex==i}),barGroups.on("mouseenter",function(){var rectDim={width:120,height:80},triDim={width:8,height:8},padding=6,tip=d3.select(this).append("g").attr("class","tip").attr("pointer-events","none");tip.append("path").attr("class","tip-container"),tip.append("text").attr("class","tip-count").text(function(d){return $scope.naturalLog?0===d.y?0:$filter("prettyNumber")(Math.pow(Math.E,d.y)):$filter("prettyNumber")(d.y)}).attr("font-family","raleway").attr("font-size","24px").attr("y",function(d){return y(d.y)-padding-triDim.height-rectDim.height*(2/3)}).attr("fill","#fff").attr("text-anchor","middle"),tip.append("text").attr("class","tip-label").text($scope.tooltipLabel).attr("y",function(d){return y(d.y)-padding-triDim.height-rectDim.height/2+8}).attr("fill","#fff").attr("text-anchor","middle"),tip.append("text").attr("class","tip-label-two").text($scope.tooltipLabelTwo).attr("y",function(d){return y(d.y)-padding-triDim.height-.25*rectDim.height+8}).attr("fill","#fff").attr("text-anchor","middle"),rectDim.width=Math.max(rectDim.width,tip[0][0].getBoundingClientRect().width+20),tip.select(".tip-count").attr("x",function(d){return width/data.length/2-rectDim.width/2}),tip.select(".tip-label").attr("x",function(d){return width/data.length/2-rectDim.width/2}),tip.select(".tip-label-two").attr("x",function(d){return width/data.length/2-rectDim.width/2}),tip.select(".tip-container").attr("d",function(d,i){var xPos=width/data.length/2,yPos=y(d.y),commands=[];return commands.push("M"+(xPos-rectDim.width)+","+(yPos-padding-triDim.height-rectDim.height)),commands.push("H"+xPos),commands.push("V"+(yPos-padding)),commands.push("L"+(xPos-triDim.width)+","+(yPos-padding-triDim.height)),commands.push("H"+(xPos-rectDim.width)),commands.push("Z"),commands.join(" ")})}).on("mouseleave",function(){d3.select(this).selectAll(".tip").remove()});var hoverContainers=barGroups.selectAll(".hover-container").data(function(d){return[d]});hoverContainers.enter().append("rect").attr("class","hover-container").attr("width",width/data.length).attr("y",0).attr("height",height);var bars=barGroups.selectAll(".bar").data(function(d){return[d]});bars.enter().append("rect").attr("y",height).attr("class","bar").attr("width",barWidth).attr("height",0),svg.selectAll(".bar-group").transition().duration(600).attr("transform",function(d){return"translate("+(x(d.x)-barWidth/2)+",0)"}),svg.selectAll(".bar-group").selectAll(".hover-container").transition().duration(600).attr("class","hover-container").attr("width",width/data.length).attr("y",0).attr("height",height),svg.selectAll(".bar-group").selectAll(".bar").transition().duration(600).attr("y",function(d){return y(d.y)}).attr("x",function(d){return width/data.length/2-barWidth/2}).attr("height",function(d){return height-y(d.y)}).attr("width",barWidth),barGroups.exit().transition().duration(600).selectAll("rect").attr("y",height).attr("height",0).remove();var xLocation=width/data.length/2,triSize=4,lineWidth=.25,commands=[],verticalPadding=5;commands.push("M"+(xLocation-lineWidth)+","+(triSize-verticalPadding)),commands.push("L"+(xLocation-triSize)+","+-verticalPadding),commands.push("L"+(xLocation+triSize)+","+-verticalPadding),commands.push("L"+(xLocation+lineWidth)+","+(triSize-verticalPadding)),commands.push("V"+height),commands.push("H"+(xLocation-lineWidth)),commands.push("Z");var triData=commands.join(" ");svg.select(".placement-line").remove(),svg.select(".bar-group.active").append("path").attr("class","placement-line").attr("d",triData)}))}}}}});
angular.module("applause.foundation").directive("appInfo",function(analyticsApiService,offeringRouterService,stateService,userService,$window,notificationService,$timeout){return{restrict:"E",replace:!0,templateUrl:"app-info/app-info.html",scope:{app:"=",releaseDays:"=",topAttr:"=",reviewedCountries:"=",relatedApps:"=",trend:"=",countries:"="},controller:function($scope){$scope.gotoReviews=function(appId,country){offeringRouterService.gotoView({view:"reviews"})},$scope.gotoStats=function(attr){offeringRouterService.gotoView({view:"stats",params:{attribute:attr}})},$scope.gotoDash=function(appId,country){offeringRouterService.gotoView({app:appId,country:country})},stateService.getApp().then(function(app){stateService.getUser().then(function(user){$scope.groups=user.groups,$scope.appGroups=user.getAppGroups(app)}),stateService.subscribeUser($scope,function(user){$scope.groups=user.groups,$scope.appGroups=user.getAppGroups(app)})})},link:function($scope,element,attrs){$scope.groupName="",$scope.openGroups=function(e){var groupHandler=function(event){var isClickedElementChildOfPopup=-1!==[].slice.call($window.document.querySelector(".group-management").querySelectorAll("*")).indexOf(event.target);isClickedElementChildOfPopup||$scope.$apply(function(){$scope.groupOpen=!1,angular.element($window.document).unbind("click",groupHandler)})};$scope.groupOpen=!0,angular.element($window.document).bind("click",groupHandler)},$scope.plusClick=function(){$scope.showCreate?$scope.createGroup():$scope.showCreateGroup()},$scope.groupNameKeyup=function(e){return $scope.invalidName&&($scope.showCreate=!0,$timeout(function(){$scope.invalidName=!1})),13===event.keyCode?($scope.createGroup(),$scope.hideCreateGroup(),!1):void 0},$scope.showCreateGroup=function(){$scope.showCreate=!0,$timeout(function(){$window.document.getElementById("group-create-name").focus()})},$scope.hideCreateGroup=function(){$scope.invalidName=!1,$scope.showCreate=!1,$scope.groupName=""},$scope.isSaving=!1,$scope.toggleGroup=function(group){if(!$scope.isSaving){$scope.isSaving=!0;var groupCopy=angular.copy(group),isAdd=-1===$scope.appGroups.indexOf(group);if(isAdd)groupCopy.apps.push({app_id:$scope.app.app_id,country:$scope.app.country,store:$scope.app.store});else{var i=0;for(i;i<groupCopy.apps.length&&(groupCopy.apps[i].app_id!==$scope.app.app_id||groupCopy.apps[i].country!==$scope.app.country||groupCopy.apps[i].store!==$scope.app.store);i++);groupCopy.apps.splice(i,1)}userService.updateGroup(groupCopy).then(function(res){$scope.isSaving=!1,notificationService.success("App "+(isAdd?"Added":"Removed"),"App has been "+(isAdd?"added to":"removed from")+" group "+group.group_name)},function(){$scope.isSaving=!1,notificationService.error("Error","Failed to "+(isAdd?"add app to":"remove app from")+" group "+goup.group_name)})}},$scope.groupName="",$scope.createGroup=function(){if(""===$scope.groupName)return notificationService.error("Error","Group must have a name"),void($scope.invalidName=!0);$scope.isSaving=!0;var newGroup=userService.getDefaultGroup();newGroup.group_name=$scope.groupName,newGroup.apps.push({app_id:$scope.app.app_id,country:$scope.app.country,store:$scope.app.store}),userService.createGroup(newGroup).then(function(res){$scope.isSaving=!1,res.data.success?notificationService.success("Success","Successfully created new group."):(notificationService.error("Error","Failed to create new group. ("+res.data.data+")"),"Duplicate name."===res.data.data&&($scope.invalidName=!0))},function(){$scope.isSaving=!1,notificationService.error("Error","Failed to create new group.")})}}}});
angular.module("applause.foundation").directive("appRatingsSentiment",function($q,analyticsApiService){return{restrict:"E",replace:!0,scope:{data:"=",sentiment:"="},templateUrl:"app-ratings-sentiment/app-ratings-sentiment.html",controller:function($scope){$scope.$watch("data",function(newVal,oldVal){"positive"==$scope.sentiment&&newVal.self.percent>newVal.competitor.percent?$scope.overallClass="positive":"positive"==$scope.sentiment&&newVal.self.percent<newVal.competitor.percent?$scope.overallClass="negative":"negative"==$scope.sentiment&&newVal.self.percent>newVal.competitor.percent?$scope.overallClass="negative":"negative"==$scope.sentiment&&newVal.self.percent<newVal.competitor.percent&&($scope.overallClass="positive")})},link:function($scope,element,attribute){}}});
angular.module("applause.foundation").directive("appSearch",function($timeout,analyticsApiService,stateService){return{restrict:"E",replace:!0,scope:{placeholder:"=",appAction:"=",appSuggestionCount:"=",searchHasFocus:"=",filteredApps:"="},templateUrl:"app-search/app-search.html",controller:function($scope,$rootScope){$scope.q="",$scope.appSuggestions=[],$scope.appSuggestionSelection=0,$scope.countries=stateService.countryOrder.map(function(c){return{name:c,value:c}}),$scope.activeCountry="",stateService.getUser().then(function(user){$scope.activeCountry=user.country})},link:function($scope,el,attrs){function search(query){var searchLimit=$scope.appSuggestionCount||4;analyticsApiService.appSearch({q:query,country:$scope.activeCountry},{limit:searchLimit}).then(function(response){$scope.appSuggestionSelection=0,$scope.appSuggestions=$scope.filteredApps?response.data.data.apps.filter(function(a){for(var i=0;i<$scope.filteredApps.length;i++)if($scope.filteredApps[i].app_id===a.app_id&&$scope.filteredApps[i].country===a.country)return!1;return!0}):response.data.data.apps},function(){console.error("AppSearch Failed!")})}$scope.appClick=function(app){$scope.appAction(app),$scope.q=""},$scope.searchKeyUp=function(event){return 38===event.keyCode&&$scope.appSuggestionSelection>0?($scope.appSuggestionSelection--,event.preventDefault(),!1):40===event.keyCode&&$scope.appSuggestionSelection+1<$scope.appSuggestions.length?($scope.appSuggestionSelection++,event.preventDefault(),!1):13===event.keyCode&&$scope.appSuggestions[$scope.appSuggestionSelection]?($scope.appClick($scope.appSuggestions[$scope.appSuggestionSelection]),event.target.blur(),event.preventDefault(),!1):void 0};var qDebounce;$scope.$watch("q",function(newVal,oldVal){return newVal!==oldVal?("undefined"!=typeof qDebounce&&$timeout.cancel(qDebounce),""===newVal.trim()?($scope.appSuggestions=[],void($scope.appSuggestionSelect=0)):void(qDebounce=$timeout(function(){search(newVal)},500))):void 0}),$scope.$watch("activeCountry",function(newVal,oldVal){newVal!==oldVal&&$scope.q&&($timeout.cancel(qDebounce),search($scope.q))})}}});
angular.module("applause.foundation").directive("applauseSidebar",function(offeringRouterService,analyticsApiService,$rootScope,$window,stateService,$timeout){return{restrict:"E",replace:!0,scope:{},templateUrl:"applause-sidebar/applause-sidebar.html",controller:function($scope){$scope.router=offeringRouterService,$scope.gotoView=offeringRouterService.gotoView,$scope.cachedApps={},$scope.currentApp,$scope.searchQuery="",$scope.searchResults=[],$scope.countryOrder=stateService.countryOrder,$scope.countries=stateService.countries,$scope.activeCountry="",$scope.searchLoading=!1,$scope.searchAppendLoading=!1,$scope.start=0,$scope.limit=20},link:function($scope,el,attrs){function searchApps(append){append?$scope.searchAppendLoading=!0:($scope.searchResults=[],$scope.searchLoading=!0);var q=$scope.searchQuery.trim();if(qDebounce&&$timeout.cancel(qDebounce),""===q)return $scope.searchLoading=!1,void($scope.searchAppendLoading=!1);var params={};append&&(params.start=$scope.start+$scope.limit);var options={q:$scope.searchQuery,country:$scope.activeCountry,limit:$scope.limit};qDebounce=$timeout(function(){analyticsApiService.appSearch(options,params).then(function(response){append?($scope.start=$scope.start+$scope.limit,$scope.searchResults=$scope.searchResults.concat(response.data.data.apps)):$scope.searchResults=response.data.data.apps.filter(function(a){return $scope.currentApp?$scope.currentApp.app_id!==a.app_id:!0}),$scope.searchAppendLoading=!1,$scope.searchLoading=!1},function(){$scope.searchAppendLoading=!1,$scope.searchLoading=!1,console.error("ApplauseSidebar - searchApps() Failed!")})},500)}$scope.$on("APPLAUSE.SEARCH_MORE",function(){searchApps(!0)}),$scope.appId=stateService.getAppId(),$scope.$watch(function(){return stateService.getAppId()},function(appId){null!=appId&&""!=appId?($scope.appId=appId,$scope.bookmarksActive=!1):$scope.bookmarksActive=!0}),stateService.subscribeApp($scope,function(app,country){$scope.currentApp=app,$scope.filteredApps=[$scope.currentApp.app_id]}),$scope.gotoWelcome=function(){offeringRouterService.gotoView({view:"",params:{}})},$scope.searchKeyDown=function(e){27===e.keyCode&&($scope.searchActive=!1,e.target.blur(),Array.prototype.forEach.call($scope.blurElements,function(el,i){el.classList.remove("offering-search-blur")})),13===e.keyCode&&searchApps()},$scope.showSearch=function(){$scope.searchActive||stateService.getUser().then(function(user){$scope.activeCountry=user.country}),$scope.blurElements=$window.document.querySelectorAll("#foundation > *:not(.applause-chrome), .applause-chrome > *:not(.offering-search)"),$scope.searchActive=!0,Array.prototype.forEach.call($scope.blurElements,function(el,i){el.classList.add("offering-search-blur")});var searchWindowEvent=function(e){27===e.keyCode&&($scope.hideSearch(!0),$window.removeEventListener("keydown",searchWindowEvent,!1))};$window.addEventListener("keydown",searchWindowEvent,!1)},$scope.hideSearch=function(apply){$scope.searchActive=!1,$scope.searchQuery="",$scope.searchResults=[],apply&&$scope.$apply(),$window.document.querySelector(".applause-chrome .sidebar-search-box").blur(),Array.prototype.forEach.call($scope.blurElements,function(el,i){el.classList.remove("offering-search-blur")})},$scope.$watch("activeCountry",function(newVal,oldVal){oldVal&&newVal!==oldVal&&searchApps()});var qDebounce;$scope.$watch("searchQuery",function(newVal,oldVal){newVal!==oldVal&&searchApps()});var qDebounce;$scope.setApp=function(app){$scope.cachedApps[app.app_id+"_"+app.country]=app,offeringRouterService.gotoView({app:app.app_id,country:app.country})},$scope.setCountry=function(country){$scope.activeCountry=country,$window.document.querySelector(".sidebar-search-box").focus()}}}});
angular.module("applause.foundation").directive("attributeCard",function(analyticsApiService,offeringRouterService){return{restrict:"E",replace:!0,scope:{app:"=",categoryStats:"=",reviewTotal:"=",appAttributes:"=",attributeReviews:"="},controller:function($scope,offeringRouterService){},templateUrl:"attribute-card/attribute-card.html",link:function($scope,element,attrs){$scope.attributeHoverMap={elegance:"Elegance\n\nThe elegance of an applications UX is very important on mobile. Take a look at top apps that score high in excellence such as Path, and Google+",security:"Security\n\nPerception is as important as reality when it comes to user sentiment around security. Are there issue with users logging on or resetting passwords?",privacy:"Privacy\n\nEven the perception of privacy issues can cause alarm. Do you ask for more information than you need? Does the app link to questionable external content or appear to be fraudulent or deceptive?",performance:"Performance\n\nSpeed is everything on mobile. slow launch times, network speed can ruin the experience. Speed up your app. Make things faster, or make them look faster!",content:"Content\n\nAds, incorrect data, or content download issues can seriously affect users perception of app quality.",satisfaction:"Satisfaction\n\nYour app may be fast, reliable, and secure, but does it make people happy?",pricing:'Pricing\n\nEven great apps that are too expensive get poor reviews. Acceptable price is in the eye of the beholder, but take note of competitive app pricing, and consider the perception of the "cost" of ads.',usability:"Usability\n\nIs your app easy to use? Obvious and intuitive? Does it work well on large/small devices? Does it work for the hard of hearing, or sight?",stability:"Stability\n\nIf your app crashes, especially if that freeze or hang results in the user losing data or time, it can be a huge detriment to your reviews. Crashes and hangs are often caused by networking or unusual usage paths in the product.",interoperability:"Interoperability\n\nInteraction with the device, camera, other apps, or audio and video output issues can be frustrating to users. Test how your app interacts with everything outside of your app."},$scope.attributeIconClass=function(attr){return $scope.attributeClassMap[attr]},$scope.gotoStats=function(attr){offeringRouterService.gotoView({view:"stats",params:{attribute:attr}})},$scope.attributeSorterOptions=[{name:"delta",value:"delta"},{name:"importance",value:"importance"}],$scope.$watch("sortAttributes",function(newVal){newVal&&$scope.sortTheAttributes(newVal)}),$scope.sortTheAttributes=function(order){$scope.appAttributes.sort("delta"!=order?function(a,b){return a.tip<0&&b.tip<0?Math.abs(b.tip)-Math.abs(a.tip):b.tip-a.tip}:function(a,b){return a.delta<0&&b.delta<0?Math.abs(b.delta)-Math.abs(a.delta):a.delta-b.delta})}}}});
angular.module("applause.foundation").directive("attributeFilter",function(){return{restrict:"AE",replace:!0,scope:{attr:"=",attributeList:"="},templateUrl:"attribute-filter/attribute-filter.html",controller:function($scope){},link:function($scope,el,attrs){$scope.attributesSelected=!1,$scope.attributeList={Satisfaction:!1,Usability:!1,Security:!1,Performance:!1,Stability:!1,Pricing:!1,Interoperability:!1,Content:!1,Elegance:!1,Privacy:!1},$scope.attributeList=angular.extend($scope.attributeList,$scope.params.attributeList||{}),$scope.attributesSelectedString="all",$scope.checkAttribute=function(attr){$scope.attributeList[attr]=!$scope.attributeList[attr],$scope.$broadcast("APPLAUSE.REVIEW_CRITERIA_CHANGED");var attributes=$scope.selectedAttributesArray();$scope.attributesSelectedString=attributes.length>0?"selected":"all",$scope.attributesSelected=attributes.length>0,$scope.search()},$scope.selectedAttributesArray=function(){for(var selected=[],keys=Object.keys($scope.attributeList),i=0;i<keys.length;i++)$scope.attributeList[keys[i]]&&selected.push(keys[i].toLowerCase());return selected}}}});
angular.module("applause.foundation").directive("attributeStreamGraph",function($timeout,$window,offeringRouterService,$filter){return{restrict:"E",scope:{dates:"=",data:"=",self:"=",competitor:"="},replace:!0,templateUrl:"attribute-stream-graph/attribute-stream-graph.html",link:function($scope,element,attrs){var titleCase=$filter("titleCase");element=d3.select(element[0]).select(".attribute-stream-graph-chart")[0];var options={dateRange:$scope.dateRange,invert:"true"==attrs.invert?!0:!1};null!=attrs.height&&(options.height=attrs.height),options.width=null!=attrs.width?attrs.width:920,$window.onresize=function(){$scope.$apply()},$scope.$watch("data",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!0),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.data)});var margin={top:20,right:0,bottom:30,left:30,center:10},svg=d3.select(element[0]).append("svg").attr("width","100%").attr("height","100%"),chart=svg.append("g").attr("class","chart").attr("transform","translate("+margin.left+","+margin.top+")"),verticalIndicator=svg.append("g").attr("class","indicator-group"),verticalIndicatorLine=verticalIndicator.append("line").attr("class","vertical-indicator").attr("transform","translate("+margin.left+", 0)"),r=4,selfIndicatorDot=verticalIndicator.append("circle").attr("class","indicator-dot self").attr("r",r),competitorIndicatorDot=verticalIndicator.append("circle").attr("class","indicator-dot competitor").attr("r",r);$scope.render=function(data){if(data){var selfData,competitorData;angular.isObject(data)?(selfData=data.self,Object.keys(data).length>1&&(competitorData=data.competitor)):selfData=data,null!=renderTimeout&&$timeout.cancel(renderTimeout);var getLayersStack=function(data,keys,length){for(var stack=d3.layout.stack().offset("zero").values(function(d){return d.values}),layers=[],i=0;i<keys.length;i++){var dObj=data.find(function(v){return keys[i]==v.attribute}),attr={attr:keys[i],name:"attr-"+keys[i],values:[]};if(null!=dObj)for(var j=0;length>j;j++)attr.values.push({x:j,y:dObj.data[j]});else for(var j=0;length>j;j++)attr.values.push({x:j,y:0});layers.push(attr)}return layers=stack(layers)},renderTimeout=$timeout(function(){var layersCompetitor,width=d3.select(element[0])[0][0].offsetWidth-margin.left-margin.right,length=selfData[0].data.length,attributes=["content","elegance","interoperability","performance","pricing","privacy","satisfaction","security","stability","usability"],layersSelf=getLayersStack(selfData,attributes,length);null!=competitorData&&(layersCompetitor=getLayersStack(competitorData,attributes,length)),$scope.layers={self:layersSelf,competitor:layersCompetitor};var height=d3.select(element[0])[0][0].offsetHeight;$scope.height=height;{var yMax;width/data.length-2}yMax=null!=selfData&&null!=competitorData?Math.max(d3.max(layersSelf,function(layer){return d3.max(layer.values,function(d){return d.y0+d.y})}),d3.max(layersCompetitor,function(layer){return d3.max(layer.values,function(d){return d.y0+d.y})})):d3.max(layersSelf,function(layer){return d3.max(layer.values,function(d){return d.y0+d.y})});var graphHeight=(height-margin.top-margin.bottom-margin.center/2)/2,getXScale=function(data){return x=d3.scale.linear().domain([0,data[0].data.length-1]).range([0,width])},getYScale=function(layers,yMax,invert){var y=d3.scale.linear().domain([0,yMax]);return y.range(invert?[0,graphHeight]:[graphHeight,0]),y.nice(2),y},getArea=function(x,y,invert){var area=d3.svg.area().interpolate("monotone").x(function(d){return x(d.x)}).y0(function(d,i){return y(d.y0)+.5}).y1(function(d){return y(d.y0+d.y)});return area},getBlankArea=function(x,y,invert){var area=d3.svg.area().interpolate("monotone").x(function(d){return x(d.x)}).y0(function(d,i){return y(0)}).y1(function(d){return y(0)});return area},updateStreamGraph=function(layers,area,blankArea,y,invert){var selector=invert?".competitor":".self",group=chart.selectAll(selector);group.data([{invert:invert,id:invert?"competitor":"self"}],function(d){return d.id}).enter().insert("g").classed("competitor",invert).classed("self",!invert).attr("transform",function(d){if(d.invert){var offset=(height-margin.top-margin.bottom)/2+margin.center/2;return"translate(0,"+offset+")"}}),group=chart.selectAll(selector);var mouseOver=function(d){chart.selectAll(".attribute-band").classed("inactive",!0),chart.selectAll("."+d.name).classed("active",!0).classed("inactive",!1);for(var attrIndex,i=0;i<attributes.length;i++)attributes[i]!=d.attr||(attrIndex=i);var mousex=d3.mouse(this)[0],invertedx=x.invert(mousex),index=Math.round(invertedx),selfDotData=$scope.layers.self[attrIndex].values[index],selfThickness=graphHeight-ySelf(selfDotData.y),competitorDotData=$scope.layers.competitor[attrIndex].values[index],competitorThickness=graphHeight-yCompetitor(competitorDotData.y);verticalIndicator.classed("active",!0),verticalIndicatorLine.attr("x1",x(index)).attr("x2",x(index)),selfIndicatorDot.attr("cx",x(index)+margin.left).attr("cy",$scope.ySelf(selfDotData.y0)+margin.top-selfThickness/2+.5),competitorIndicatorDot.attr("cx",x(index)+margin.left).attr("cy",$scope.yCompetitor(competitorDotData.y0)+margin.top+graphHeight-competitorThickness/2+7.5),$scope.selfHoverAttrCount=$scope.layers.self[attrIndex].values[index].y,$scope.competitorHoverAttrCount=$scope.layers.competitor[attrIndex].values[index].y,$scope.hoverAttrDate=moment($scope.dates[index])._d,$scope.hoverAttr=d.attr,$scope.$apply(),chart.selectAll("."+d.name).classed("active",!0)},gs=group.selectAll("path").data(layers);gs.exit().remove(),gs.enter().append("path").attr("d",function(d){return blankArea(d.values)}).attr("class",function(d,i){return"attribute-band "+d.name+" band-"+(i+1)}).classed("stream-graph-fill",!0).classed("invert",invert).on("mouseover",mouseOver).on("mousemove",mouseOver).on("mouseout",function(d,i){chart.selectAll(".attribute-band").classed("inactive",!1).classed("active",!1),verticalIndicator.classed("active",!1),$scope.selfHoverAttrCount=null,$scope.competitorHoverAttrCount=null,$scope.attrHover=null,$scope.attrHoverDate=null,$scope.$apply()}).on("click",function(d,i){var route={view:"reviews",params:{attr:[titleCase(d.attr)],since:$scope.dates[0],until:$scope.dates[$scope.dates.length-1],showAllDates:!1}};invert&&(route.app=$scope.competitor.app_id),console.dir(route),offeringRouterService.gotoView(route),$scope.$apply()}),group.selectAll("path").transition().duration(750).attr("d",function(d){return area(d.values)})},x=getXScale(selfData),ySelf=getYScale(layersSelf,yMax,!1);$scope.ySelf=ySelf;var areaSelf=getArea(x,ySelf,!1),blankAreaSelf=getBlankArea(x,ySelf,!1),xAxis=d3.svg.axis().scale(x).orient("top").tickSize(height,0,0).tickFormat(function(d,i){return""}),xAxisLabels=d3.svg.axis().scale(x).orient("bottom").tickFormat(function(d,i){return d3.time.format("%b %e")(moment($scope.dates[d])._d)});chart.selectAll(".axis").remove();var xLabels=chart.append("g").attr("class","x axis").attr("transform","translate(0,"+(height-margin.top-margin.bottom+12)+")");xLabels.append("g").attr("class","x ticks").call(xAxis),xLabels.append("g").attr("class","x labels").call(xAxisLabels);var yAxisSelf=d3.svg.axis().scale(ySelf).orient("left").tickFormat(function(d,i){return 0===d?"":d}).ticks(4),yLabelsSelf=chart.append("g").attr("class","y axis");if(yLabelsSelf.append("g").attr("class","y ticks").call(yAxisSelf),updateStreamGraph(layersSelf,areaSelf,blankAreaSelf,ySelf,!1),competitorData){var yCompetitor=getYScale(layersCompetitor,yMax,!1);$scope.yCompetitor=yCompetitor;var areaCompetitor=getArea(x,yCompetitor,!1),blankAreaCompetitor=getBlankArea(x,yCompetitor,!1),yAxisCompetitor=d3.svg.axis().scale(yCompetitor).orient("left").tickFormat(function(d,i){return 0===d?"":d}).ticks(4),yLabelsCompetitor=chart.append("g").attr("class","y axis").attr("transform",function(d){var offset=(height-margin.top-margin.bottom)/2+margin.center/2;return"translate(0,"+offset+")"});yLabelsCompetitor.append("g").attr("class","y ticks").call(yAxisCompetitor),updateStreamGraph(layersCompetitor,areaCompetitor,blankAreaCompetitor,yCompetitor,!0)}verticalIndicatorLine.attr("y2",0).attr("y1",height-margin.bottom+3)})}}}}});
angular.module("applause.foundation").run(["$templateCache",function($templateCache){$templateCache.put("tool-tip/tool-tip-hover.html",'<div class="tool-tip-hover" ng-show="title"><div class="arrow arrow-{[{orientation}]}"></div><div ng-bind=\'title\'></div></div>')}]),angular.module("applause.foundation").directive("attributeWeightChart",[function(){return{restrict:"EA",replace:!0,scope:{attribute:"=",app:"=",attributeHoverMap:"="},templateUrl:"attribute-weight-chart/attribute-weight-chart.html",controller:["$scope",function($scope){$scope.hoverIn=function(){$scope.showTooltip=!0},$scope.hoverOut=function(){$scope.showTooltip=!1}}],link:function($scope,element,attrs,ctrl){$scope.attrTip={title:$scope.attributeHoverMap[$scope.attribute.attribute]},$scope.appTip={title:$scope.attribute.score},$scope.categoryTip={title:$scope.attribute.category_avg}}}}]);
angular.module("applause.foundation").service("authApiService",function(apiService){function getUrl(){return apiService.getBaseUrl()+CONFIG.ROOT}var CONFIG={ROOT:"auth"};this.signOut=function(){return apiService.apiCall({url:getUrl()+"/signout"})}});
angular.module("applause.foundation").directive("bookmarkBar",function(offeringRouterService,stateService){return{restrict:"E",replace:!0,scope:{currentApp:"=",active:"="},templateUrl:"bookmark-bar/bookmark-bar.html",link:function($scope,el,attrs){$scope.gotoApp=function(app){$scope.active=!1,offeringRouterService.gotoView({country:app.country,app:app.app_id})},$scope.gotoSettings=function(){$scope.active=!1,offeringRouterService.gotoView({view:"settings"})},stateService.subscribeUser($scope,function(user){$scope.toggles={},$scope.groups=user.groups}),$scope.filter=function(apps){return $scope.q?apps.filter(function(c){var lowerQ=$scope.q.toLowerCase();return c.title.toLowerCase().indexOf(lowerQ)>-1||c.publisher.toLowerCase().indexOf(lowerQ)>-1}):apps}}}});
angular.module("applause.foundation").directive("chartArc",function(){return{restrict:"E",replace:!0,scope:{chartConfig:"="},templateUrl:"chart-arc/chart-arc.html",controller:function($scope){$scope.margins={top:0,right:0,bottom:0,left:0},$scope.render=function(chartConfig,width,height,svg){var size=height>width?width/2:height/2,outer=size-chartConfig.padding,inner=outer-chartConfig.size,arc=d3.svg.arc().outerRadius(outer).innerRadius(inner),pie=d3.layout.pie().sort(null).value(function(d){return d.value}),g=svg.append("g").attr("transform","translate("+width/2+","+height/2+")"),arcs=g.selectAll(".arc").data(pie(chartConfig.data));arcs.exit().remove(),arcs=arcs.enter().append("g").attr("class",function(d){return console.log(d),"arc "+d.data.cls}),arcs.append("path").attr("d",arc),"function"==typeof chartConfig.postRender&&chartConfig.postRender(svg,width,height)}}}});
angular.module("applause.foundation").directive("chartBaseResponsive",function($window,$timeout){return{restrict:"E",replace:!0,scope:{config:"=",render:"=",margins:"="},template:"<svg></svg>",link:function($scope,element,attrs){function getDims(){var dims=d3.select(element[0])[0][0].getBoundingClientRect();return{width:dims.width-margin.left-margin.right,height:dims.height-margin.top-margin.bottom}}function draw(config){if(svg.selectAll("*").remove(),config){renderTimeout&&$timeout.cancel(renderTimeout);var dims=getDims();$scope.render(config,dims.width,dims.height,svg)}}var renderTimeout,margin="undefined"!=typeof $scope.margins?$scope.margins:{top:0,right:0,bottom:0,left:0},svg=d3.select(element[0]).attr("width","100%").attr("height","100%").append("g").attr("transform","translate("+margin.left+","+margin.top+")");$window.onresize=function(){$scope.$apply()},$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.config&&draw($scope.config)}),$scope.$watch("config",function(newVal,oldVal){return newVal?newVal!==oldVal?draw(newVal):null:void 0},!1)}}});
angular.module("applause.foundation").service("chartExportService",function($window,notificationService,$timeout,$q,$rootScope,$compile){function exportChart(chart,padding,width,className){var defer=$q.defer();className&&chart.classList.add(className);var styleCache={};self.cacheStyles(chart,styleCache),self.inlineStyles(chart);var svgRect=chart.getBoundingClientRect(),canvas=$window.document.createElement("canvas"),ctx=canvas.getContext("2d"),img=new Image;width="undefined"==typeof width?svgRect.width:width;var height=svgRect.height*(width/svgRect.width);padding="undefined"==typeof padding?20:padding,chart.setAttribute("viewBox","0 0 "+svgRect.width+" "+svgRect.height),chart.setAttribute("width",width),chart.style.width=width,chart.setAttribute("height",height),chart.style.height=height,chart.style.margin=0;var svg_xml=(new XMLSerializer).serializeToString(chart);return canvas.width=width+2*padding,canvas.height=height+2*padding,ctx.fillStyle=$window.getComputedStyle(chart).getPropertyValue("background-color"),ctx.fillRect(0,0,width+2*padding,height+2*padding),className&&chart.classList.remove(className),self.revertStyles(chart,styleCache),img.onload=function(){ctx.drawImage(img,padding,padding);var url=canvas.toDataURL("image/png");defer.resolve(url)},img.src="data:image/svg+xml;base64,"+btoa(svg_xml),defer.promise}function displayModal(urls){var modal=$window.document.createElement("chart-export-modal"),scope=$rootScope.$new(!0);scope.images=urls;$compile(modal)(scope);angular.element($window.document.body).append(modal),$window.document.body.style.overflow="hidden"}var self=this;self.exportToPng=function(chart,padding,width,classArray){var defer=$q.defer();return $timeout(function(){var promises=[];if(promises.push(exportChart(chart,padding,width)),classArray)for(var i=0;i<classArray.length;i++)promises.push(exportChart(chart,padding,width,classArray[i]));$q.all(promises).then(function(urls){displayModal(urls)}),defer.resolve()},10),defer.promise},self.cacheStyles=function(elem,cacheObj){cacheObj.width=elem.getAttribute("width"),cacheObj.height=elem.getAttribute("height"),cacheObj.viewBox=elem.getAttribute("viewBox"),cacheObj.styles=[],cacheObj.styles.push(elem.style.cssText);for(var children=elem.querySelectorAll("*"),i=0;i<children.length;i++)cacheObj.styles.push(children[i].style.cssText)},self.revertStyles=function(elem,cacheObj){cacheObj.width?elem.setAttribute("width",cacheObj.width):elem.removeAttribute("width"),cacheObj.height?elem.setAttribute("height",cacheObj.height):elem.removeAttribute("height"),cacheObj.viewBox?elem.setAttribute("viewBox",cacheObj.viewBox):elem.removeAttribute("viewBox"),elem.style.cssText=cacheObj.styles[0];for(var children=elem.querySelectorAll("*"),i=0;i<children.length;i++)children[i].style.cssText=cacheObj.styles[i+1]},self.inlineStyles=function(elem){var clone=angular.element(elem).clone()[0];clone.setAttribute("class",""),angular.element($window.document.body).append(clone);for(var elStyles=$window.getComputedStyle(elem,null),cloneStyles=$window.getComputedStyle(clone,null),s=0;s<elStyles.length;s++){var prop=elStyles[s];elStyles[prop]!==cloneStyles[prop]&&(elem.style[prop]=elStyles[prop],clone.style[prop]=elStyles[prop])}for(var children=elem.querySelectorAll("*"),defaults=clone.querySelectorAll("*"),i=0;i<children.length;i++)for(var c=$window.getComputedStyle(children[i],null),d=$window.getComputedStyle(defaults[i],null),j=0;j<c.length;j++){var prop=c[j];c[prop]!==d[prop]&&(children[i].style[prop]=c[prop],defaults[i].style[prop]=c[prop])}angular.element(clone).remove()}}),angular.module("applause.foundation").directive("chartExportModal",function($window){return{restrict:"E",templateUrl:"chart-export-service/chart-export-modal.html",replace:!0,scope:!0,controller:function($scope){},link:function($scope,$el,$attr){$scope.remove=function(){$window.document.body.style.overflow=null,$el.remove()}}}});
angular.module("applause.foundation").service("chartTickCleanService",function(){var self=this;self.cleanTicks=function(axisEl){for(var ticks=axisEl.selectAll(".tick"),ticksClean=!1;!ticksClean;){ticksClean=!0;for(var j=0;j<ticks[0].length;j++){var c=ticks[0][j],n=ticks[0][j+1];if(c&&n&&c.getBoundingClientRect&&n.getBoundingClientRect&&c.getBoundingClientRect().right>n.getBoundingClientRect().left){ticksClean=!1;break}}ticksClean||(axisEl.selectAll(".tick:nth-child(even)").remove(),ticks=axisEl.selectAll(".tick"))}}});
angular.module("applause.foundation").directive("clusterDetail",function(analyticsApiService){return{restrict:"E",replace:!0,templateUrl:"cluster-detail/cluster-detail.html",controller:function($scope){$scope.clearCluster=function(){$scope.activeCluster=!1}},link:function($scope,element,attrs){}}});
angular.module("applause.foundation").directive("clusterFilters",function(){return{restrict:"E",replace:!0,scope:{query:"=",eventName:"=",timeBucket:"=",activeClusterFilter:"=",app:"="},templateUrl:"cluster-filters/cluster-filters.html",controller:function($scope,$rootScope,apiService,analyticsApiService){$scope.clusterCsvUrl=function(app){apiService.handleCsvRequest(analyticsApiService.clusterCsvUrl(app))},$scope.timeBucketSelected=0,$scope.timeBucketOptions=[{name:"1 day",value:1},{name:"3 days",value:3},{name:"7 days",value:7},{name:"14 days",value:14},{name:"30 days",value:30},{name:"90+ days",value:0}],$scope.setClusterFilter=function(filterOn){$scope.activeClusterFilter=filterOn},$scope.dayString=function(day){return day>1?day+" days":1==day?day+" day":"90+ days"}}}});
angular.module("applause.foundation").directive("clusterStats",function(analyticsApiService){return{restrict:"E",replace:!0,scope:{data:"="},controller:function($scope){},templateUrl:"cluster-stats/cluster-stats.html",link:function($scope,element,attrs){$scope.$watch("data",function(newVal){})}}});
angular.module("applause.foundation").directive("clusterStream",function($q,analyticsApiService,stateService){return{restrict:"E",replace:!0,scope:{clusters:"="},templateUrl:"cluster-stream/cluster-stream.html",controller:function($scope){$scope.exampleReview=function(cluster){var review;return $scope.isNegativeCluster(cluster)?(review=cluster.example_reviews.negative_example,Object.keys(review).length<1&&(review=cluster.example_reviews.positive_example)):(review=cluster.example_reviews.positive_example,Object.keys(review).length<1&&(review=cluster.example_reviews.negative_example)),review},$scope.sentimentIcon=function(cluster){return $scope.isNegativeCluster(cluster)?{"fa-thumbs-down":!0,negative:!0}:{"fa-thumbs-up":!0,positive:!0}},$scope.isNegativeCluster=function(cluster){return cluster?cluster.avg_rating<4:!1},$scope.activeCluster=!1,$scope.zoomCluster=function(cluster){$scope.activeCluster=cluster;var params={country:stateService.getCountry()};analyticsApiService.reviewsById(cluster.reviews,params).then(function(response){$scope.oneCluster=response.data.data.results})}}}});
angular.module("applause.foundation").directive("clusterSummaryChart",function(){return{restrict:"E",replace:!0,scope:{data:"="},template:'<div class="cluster-summary-chart"><chart-arc chart-config="chartConfig" /></div>',controller:function($scope){function watch(newVal,oldVal){console.log(newVal),newVal!==oldVal&&processData()}function postRender(svg,width,height){svg.selectAll(".arc-label").remove();var label=svg.append("g");label.append("text").text($scope.chartConfig.total).attr("class","label-value").attr("transform","translate("+width/2+","+(height/2-5)+")"),label.append("text").text("Total clusters").attr("class","label-label").attr("transform","translate("+width/2+","+(height/2+30)+")")}function processData(){for(var data=[],total=$scope.data.total_clusters,keys=Object.keys($scope.data.cluster_breakdown),i=0;i<keys.length;i++){var percent=$scope.data.cluster_breakdown[keys[i]]/total*100;data.push({name:keys[i]+"-star-clusters",cls:"star-"+keys[i],value:$scope.data.cluster_breakdown[keys[i]],percent:percent})}$scope.chartConfig={postRender:postRender,total:total,data:data,padding:0,size:3}}$scope.$watch("data",watch),null!=$scope.data&&processData()}}});
angular.module("applause.foundation").directive("competitorRankGraph",function($timeout,$window,dominantColorService){return{restrict:"E",replace:!0,scope:{data:"=",self:"=",metricLabel:"="},templateUrl:"competitor-rank-graph/competitor-rank-graph.html",link:function($scope,element,attrs){var options={};null!=attrs.height&&(options.height=attrs.height),null!=attrs.width&&(options.width=attrs.width),$window.onresize=function(){$scope.$apply()},$scope.$watch("data",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.data)});var svg=d3.select(element[0]).select(".rank-lines").append("svg").attr("width","100%").attr("height","100%").style("position","absolute").style("top",0).style("left",0),rankTable=d3.select(element[0]).select(".app-rankings-table");$scope.$watch("self",function(newVal,oldVal){newVal!==oldVal&&$scope.activateApp(newVal)}),$scope.activateApp=function(appId){$scope.selected=$scope.appId,rankTable.selectAll(".app-circle").classed("active",!1),svg.selectAll("path").classed("active",!1),rankTable.selectAll('[data-app-id="'+appId+'"]').classed("active",!0),svg.selectAll('[data-app-id="'+appId+'"]').classed("active",!0)},$scope.render=function(data){if(data){null!=renderTimeout&&$timeout.cancel(renderTimeout);var generateLineData=function(data){for(var lineData=[],rows=rankTable.selectAll("tr"),cols=d3.select(rows[0][0]).selectAll("td"),rowCoords=[],colCoords=[],i=0;i<rows[0].length;i++)rowCoords[i]={height:rows[0][i].offsetHeight,top:rows[0][i].offsetTop};var imgOne=d3.select(cols[0][0]).select("img")[0][0];colCoords[0]={left:imgOne.offsetLeft,width:imgOne.offsetWidth};for(var j=1;j<cols[0].length;j++)colCoords[j]={left:cols[0][j].offsetLeft,width:cols[0][j].offsetWidth};for(var keys=Object.keys(data.apps),k=0;k<keys.length;k++){lineData[k]={app_id:data.apps[keys[k]].app_id,color:data.apps[keys[k]].color,values:[]};for(var l=0;l<data.apps[keys[k]].rankings.length;l++){var appCoords={x:l,y:data.apps[keys[k]].rankings[l]-1},x=colCoords[appCoords.x].left+colCoords[appCoords.x].width/2,y=rowCoords[appCoords.y].top+rowCoords[appCoords.y].height/2;lineData[k].values[l]={x:x,y:y}}}return lineData},renderTimeout=$timeout(function(){var lineData=generateLineData(data),line=d3.svg.line().x(function(d){return d.x}).y(function(d){return d.y}),rankLines=svg.selectAll(".app-ranking-line").data(lineData);rankLines.enter().append("path").attr("class",function(d){return"app-ranking-line "+d.app_id}),rankLines.attr("data-app-id",function(d){return d.app_id}).attr("d",function(d){return line(d.values)}),rankLines.exit().remove(),$scope.selected||$scope.activateApp($scope.self)})}}}}});
angular.module("applause.foundation").directive("countryPicker",function($window,$timeout,stateService){return{restrict:"AE",replace:!0,scope:{activeCountry:"="},templateUrl:"country-picker/country-picker.html",link:function($scope,el,attrs){function setActiveCountry(country){map.selectAll(".active").classed("active",!1),$scope.countries[country].selection.classed("active",!0),map.transition().duration(1e3).call(zoomOut).transition().duration(1e3).call(zoomToCountry,country)}function zoomOut(selection){var zoom=Math.max(el[0].offsetHeight/oHeight,el[0].offsetWidth/oWidth);selection.attr("transform","translate(0,0)scale("+zoom+")")}function zoomToCountry(selection,country){var padding={top:60,right:20,bottom:20,left:10},cntryRect=$scope.countries[country].rect,svgRect=svg[0][0].getBoundingClientRect(),zoom=Math.min(el[0].offsetHeight/(cntryRect.height+padding.top/(el[0].offsetHeight/cntryRect.height)+padding.bottom/(el[0].offsetHeight/cntryRect.height)),el[0].offsetWidth/(cntryRect.width+padding.left/(el[0].offsetWidth/cntryRect.width)+padding.right/(el[0].offsetWidth/cntryRect.width))),offsetLeft=(svgRect.left-cntryRect.left)*zoom+padding.left,offsetTop=(svgRect.top-cntryRect.top)*zoom+padding.top;selection.attr("transform","translate("+offsetLeft+","+offsetTop+")scale("+zoom+")")}var countrySetBeforeLoad=!1;$scope.$watch("activeCountry",function(newVal,oldVal){return newVal!==oldVal?$scope.countries[newVal]?void(svg?setActiveCountry(newVal):countrySetBeforeLoad=!0):void console.error("Country "+newVal+" not found!"):void 0}),$window.onresize=function(){$scope.$apply()};var renderTimeout;$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){map&&$scope.activeCountry&&(renderTimeout&&$timeout.cancel(renderTimeout),renderTimeout=$timeout(function(){map.call(zoomToCountry,$scope.activeCountry)},200))}),$scope.isDropActive=!1,$scope.toggleDrop=function(e){e.stopPropagation();var countryListener=function(e){$scope.isDropActive=!1,$window.removeEventListener("click",countryListener,!1),$scope.$apply()};$scope.isDropActive=!$scope.isDropActive,$scope.isDropActive?$window.addEventListener("click",countryListener,!1):$window.removeEventListener("click",countryListener,!1)},$scope.selectCountry=function(country){$scope.activeCountry=country.code},$scope.countries=angular.copy(stateService.countries);var countryIdMap={us:"USA",gb:"Royaume Uni",au:"Australie",ca:"Canada",fr:"France",it:"Italie",de:"Allemagne",es:"Espagne",br:"Bresil",mx:"Mexique",ar:"Argentine"};for(var key in $scope.countries)$scope.countries[key].mapId=countryIdMap[key];var svg,map,oWidth,oHeight;d3.xml("/analyticsv3/static/third_party/world-map/world_map.svg","image/svg+xml",function(xml){svg=d3.select(el[0].appendChild(xml.documentElement)),oWidth=svg.attr("width"),oHeight=svg.attr("height"),map=svg.select(".map");for(var key in $scope.countries)$scope.countries[key].selection=map.select("[id='"+$scope.countries[key].mapId+"']"),$scope.countries[key].rect=$scope.countries[key].selection[0][0].getBoundingClientRect();map.call(zoomOut),countrySetBeforeLoad&&setActiveCountry($scope.activeCountry)})}}});
angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function($templateCache){$templateCache.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{[{$iconLeft}]}"></i></button></th><th colspan="{[{ rows[0].length - 2 }]}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{[{$iconRight}]}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday }" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("applause.foundation").directive("datePicker",function(){return{restrict:"E",templateUrl:"date-picker/date-picker.html",replace:!0,scope:{model:"=",max:"=",min:"="},controller:function($scope){var dateFormat="YYYY-MM-DD";$scope.model&&($scope.modelDate=moment($scope.model,dateFormat).toDate()),$scope.max&&($scope.maxDate=moment($scope.max,dateFormat).toDate()),$scope.min&&($scope.minDate=moment($scope.min,dateFormat).toDate()),$scope.$watch("model",function(newVal,oldVal){newVal&&newVal!==oldVal&&($scope.modelDate=moment($scope.model,dateFormat).toDate())}),$scope.$watch("max",function(newVal,oldVal){newVal&&newVal!==oldVal&&($scope.maxDate=moment(newVal,dateFormat).toDate())}),$scope.$watch("min",function(newVal,oldVal){newVal&&newVal!==oldVal&&($scope.minDate=moment($scope.min,dateFormat).toDate())}),$scope.$watch("modelDate",function(newVal,oldVal){if(newVal&&newVal!==oldVal){var newDate=moment(newVal).format(dateFormat);$scope.model!==newDate&&($scope.model=newDate)}})},link:function($scope,el,attrs){var input=el[0].children[0];$scope.focus=function(){input.focus()}}}});
angular.module("applause.foundation").directive("dateFilter",function(){return{restrict:"AE",replace:!0,scope:{},templateUrl:"date-filter/date-filter.html",controller:function($scope){},link:function($scope,el,attrs){$scope.validateDateRange=function(dateRange,oldVal){var start=moment(dateRange.start),end=moment(dateRange.end),now=moment();return end.isAfter(now)?!1:(end.diff(start,"days")>90&&(dateRange.end.getTime()==oldVal.end.getTime()&&(dateRange.end=moment($scope.reviewRange.start).add(92,"days")._d),dateRange.start.getTime()==oldVal.start.getTime()&&(dateRange.start=moment($scope.reviewRange.end).subtract(92,"days")._d)),start.isAfter(end)?!1:!0)},$scope.selectDateRange=function(){$scope.showAllDates&&($scope.showAllDates=!1,$scope.loadRatingsOverTime(),$scope.search(!0))},$scope.unselectDateRange=function(){$scope.showAllDates=!0,$scope.loadRatingsOverTime(),$scope.search(!0)},$scope.$watch("reviewRange",function(newVal,oldVal){if(null!=newVal){if($scope.showAllDates||$scope.validateDateRange(newVal,oldVal)||($scope.reviewRange=oldVal),newVal.start.getTime()==oldVal.start.getTime()&&newVal.end.getTime()==oldVal.end.getTime())return;$scope.loadRatingsOverTime(),$scope.search(!0)}},!0)}}});
angular.module("applause.foundation").directive("dateRangePicker",function(){return{restrict:"E",templateUrl:"date-range-picker/date-range-picker.html",replace:!0,scope:{since:"=",until:"="},controller:function($scope){}}});
angular.module("applause.foundation").service("dominantColorService",function($q){this.loadColors=function(apps){for(var promises={},i=0;i<apps.length;i++){var appId=apps[i].app_id,imgUrl=apps[i].img_url;promises[appId]=this.loadImageData(appId,imgUrl)}var deferred=$q.defer();return $q.all(promises).then(function(deferred,response){deferred.resolve(response)}.bind(this,deferred)),deferred.promise},this.loadImageData=function(appId,imgUrl){var deferred=$q.defer(),img=new Image,canvas=document.createElement("canvas"),src=(canvas.getContext("2d"),imgUrl);return img.crossOrigin="Anonymous",img.onload=function(deferred){for(var offset,r,g,b,a,colorCount=5,quality=10,image=new CanvasImage(img),imageData=image.getImageData(),pixels=imageData.data,pixelCount=image.getPixelCount(),pixelArray=[],i=0;pixelCount>i;i+=quality)offset=4*i,r=pixels[offset+0],g=pixels[offset+1],b=pixels[offset+2],a=pixels[offset+3],a>=125&&(r>250&&g>250&&b>250||pixelArray.push([r,g,b]));var cmap=MMCQ.quantize(pixelArray,colorCount),palette=cmap.palette();image.removeCanvas(),deferred.resolve(palette)}.bind(null,deferred),img.src=src,(img.complete||void 0===img.complete)&&(img.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",img.src=src),deferred.promise}});
angular.module("applause.foundation").directive("dropdown",function($window){return{restrict:"E",replace:!0,scope:{options:"=",selected:"=",selectAction:"="},templateUrl:"dropdown/dropdown.html",controller:function($scope){if(!$scope.selected)var removeWatch=$scope.$watch("selected",function(newVal){if(newVal){var o=$scope.options.filter(function(c){return c.value===newVal})[0];$scope.select(o),removeWatch()}})},link:function($scope,element,attrs){$scope.label="",$scope.select=function(obj){$scope.selected=obj.value,$scope.label=obj.name,"function"==typeof $scope.selectAction&&$scope.selectAction(obj)},$scope.$watch("selected",function(newVal,oldVal){if(newVal!==oldVal)for(var i=0;i<$scope.options.length;i++)if($scope.options[i].value===newVal)return void($scope.label=$scope.options[i].name)}),$scope.$watch("options",function(options){if(null!=options&&options.length>0){if(null==$scope.selected)return void($scope.label=options[0].name);for(var i=0;i<options.length;i++)if(options[i].value==$scope.selected)return void($scope.label=options[i].name)}}),$scope.isDropActive=!1,$scope.toggleDrop=function(e){e.stopPropagation();var listener=function(e){$scope.isDropActive=!1,$window.removeEventListener("click",listener,!1),$scope.$apply()};$scope.isDropActive=!$scope.isDropActive,$scope.isDropActive?$window.addEventListener("click",listener,!1):$window.removeEventListener("click",listener,!1)}}}});
angular.module("applause.foundation").directive("donutChart",function(){return{restrict:"E",replace:!0,scope:{clusterStats:"="},controller:function($scope){$scope.chartDataLoading=!0,$scope.$watch("clusterStats",function(clusterStats){if(clusterStats){for(var chartData=[],i=1;5>=i;i++){var d;d=null!=clusterStats.cluster_breakdown[i]?{value:clusterStats.cluster_breakdown[i],key:i}:{value:0,key:i},chartData.push(d)}$scope.chartDataLoading=!1,$scope.chartData=chartData}},!0)},template:'<svg class="chart chart-donut"></svg>',link:function($scope,element,attrs){$scope.chartEl=d3.select(element[0]),$scope.$watch("chartData",function(newVal,oldVal){if(null==$scope.chart){var w=$(element).parent().width(),h=w;$(element).width(w).height(h),$scope.chart=d3.custom.donut({width:w,height:h,innerRadius:w/2-38,outerRadius:w/2-22,margin:35})}$scope.chartEl.datum(newVal).call($scope.chart)})}}}),d3.custom={},d3.custom.donut=function(options){function exports(_selection){_selection.each(function(data){function tweenFromEmpty(d){var interpolate=d3.interpolate({startAngle:0,endAngle:0},d);return this._current=interpolate(0),function(t){return arc(interpolate(t))}}function tweenToEmpty(d){var interpolate=d3.interpolate(this._current,{startAngle:0,endAngle:0});return this._current=interpolate(0),function(t){return arc(interpolate(t))}}function tweenArc(d){var interpolate=d3.interpolate(this._current,d);return this._current=interpolate(0),function(t){return arc(interpolate(t))}}if(null!=data){var arc=d3.svg.arc().innerRadius(cfg.innerRadius).outerRadius(cfg.outerRadius);if(svg&&null!=d3.select(this).select("svg")[0][0]||(svg=d3.select(this).append("svg").attr("class","chart donut-chart").attr("width",cfg.width).attr("height",cfg.height),svg.append("path").classed("donut-0-star",!0).attr("transform","translate("+cfg.width/2+","+cfg.height/2+")").attr("d",arc({startAngle:0,endAngle:2*Math.PI}))),fromEmpty)duration=400,tween=tweenFromEmpty,fromEmpty=!1;else{for(var empty=!0,i=0;5>i;i++)data[i].value>0&&(empty=!1);empty?(duration=400,tween=tweenToEmpty,fromEmpty=!0):(duration=200,tween=tweenArc)}var pie=d3.layout.pie().sort(null).startAngle(0).endAngle(2*Math.PI).value(function(d){return d.value}),g=svg.selectAll(".arc").data(pie(data),function(d){return d.data.key});g.enter().append("path").attr("class",function(d){return"arc donut-"+d.data.key+"-star"}).attr("transform","translate("+cfg.width/2+","+cfg.height/2+")").each(function(d){this._current=d}),g.transition().ease("cubic-out").duration(duration).attrTween("d",tween)}})}var tween,svg,duration,cfg={width:200,height:200,innerRadius:45,outerRadius:90},fromEmpty=!0;return angular.extend(cfg,options||{}),exports};
angular.module("applause.foundation").service("feedbackApiService",function(apiService){function getUrl(){return apiService.getBaseUrl()+CONFIG.ROOT}var CONFIG={ROOT:"analyticsv3/api",SKIP_CACHE:!1,LIMIT:30,SEARCH_SIZE:20,DATE_FORMAT:"%Y-%m-%d"};this.feedback=function(options){var defaults={product:"analytics",url:"/fuckyeah",rating:!0,feedback:"fuckyeah fuckyeah fuckyeah",user_agent:"internet explorer 3.2",ip_address:"127.0.0.1"};return options=angular.extend(defaults,options||{}),apiService.post(getUrl()+"/feedback",options,{transformRequest:function(data){for(var formData=new FormData,i=0;i<Object.keys(data).length;i++)formData.append(Object.keys(data)[i],data[Object.keys(data)[i]]);return formData},headers:{"Content-Type":void 0}})}});
angular.module("applause.foundation").directive("feedback",function(notificationService,feedbackApiService,$timeout){return{restrict:"E",replace:!0,scope:{},templateUrl:"feedback/feedback.html",link:function($scope,el,attrs){$scope.resetForm=function(){$scope.active=!1,$timeout(function(){$scope.sentiment=null,$scope.notes=null,$scope.loading=null,$scope.error=null,$scope.success=null},1e3)},$scope.toggleFeedback=function(){$scope.active=!$scope.active,$scope.active||resetForm()},$scope.thumbsUp=function(){$scope.sentiment="positive"},$scope.thumbsDown=function(){$scope.sentiment="negative"},$scope.sendFeedback=function(){$scope.loading=!0;var ua=navigator.userAgent,rating=$scope.sentiment||"meh";rating=rating.substr(0,3),feedbackApiService.feedback({feedback:$scope.notes,user_agent:ua,rating:rating}).then(function(data){$scope.loading=!1,data.data.success?$scope.success=!0:$scope.error=!0},function(data){$scope.loading=!1,$scope.error=!0})}}}});
"use strict";angular.module("applause.foundation").filter("safeHtml",function(){return function(html){return $sce.trustAsHtml(html)}}).filter("addPlus",function(){return function(number,appScore){return-1!=appScore?number>0?"+"+number:number:"-"}}).filter("starRound",function(){return function(number,decimalPlaces){return decimalPlaces=decimalPlaces||2,number.toFixed(decimalPlaces)}}).filter("starIcon",function(){return function(number){return new Array(~~number+1).join("<i class='fa fa-star'></i>")}}).filter("moment",function(){return function(dateString,format){if(null==dateString)return"";var d=new Date(dateString),t=d.getTime(),offset=d.getTimezoneOffset();return moment(t+6e4*offset).format(format)}}).filter("highlightText",function(){return function(content,stringToHighlight){if(!stringToHighlight||!content)return content;if(angular.isArray(stringToHighlight)){stringToHighlight=_(stringToHighlight).reject(function(v){return v[0].length<3||"ing"==v[0]||"but"==v[0]||"est"==v[0]});var outputString=_(stringToHighlight).reduce(function(memo,val,i,list){var newVal=memo+val[0];return i<list.length-1&&(newVal+="|"),newVal},"");outputString="\\b("+outputString+")([a-z]*)"}else var outputString="\\b("+stringToHighlight+")([a-z]*)";return content.replace(new RegExp(outputString,"gi"),"<span class='highlightText'>$1$2</span>")}}).filter("truncate",function(){return function(str,len){return null==str||""==str?"...":str.length>=len?str.substr(0,len)+"...":str}}).filter("prettyNumber",function(){return function(num,type){return isNaN(num)?"-":"score"===type&&-1===num?"*":1e3>num?num===+num&&num!==(0|num)?parseFloat(num.toFixed(1)):num:num>1e6?(num/=1e6,num%Math.floor(num)>0?num.toFixed(1)+"M":num+"M"):(num/=1e3,num%Math.floor(num)>0?num.toFixed(1)+"k":num+"k")}}).filter("titleCase",function(){return function(str){return str?str.charAt(0).toUpperCase()+str.slice(1):str}}).filter("upperCase",function(){return function(str){return str.toUpperCase()}}).filter("sanitizeReviewStream",function(){return function(s){if(!s)return"";s=s.replace(/\\u([0-9a-f]{3,4})/g,"&#x$1;"),s=s.replace(/\\[nrltvfab]+/g," "),s=s.replace(/\\(['"])/g,"$1"),s=s.replace(/[\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF]/g,"");var conv={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"'},units=s.match(/(&[a-z]+;)|&#\d+;|&#x[0-9a-f]{3,4};|./g),chars=[];if(null!=units){for(var i=0;i<units.length;++i){var a=units[i];if(1==a.length)chars.push(a);else if(a in conv)chars.push(conv[a]);else{var match1=a.match(/&#(\d+);/),match2=a.match(/&#x([0-9a-f]+);/);chars.push(match1?String.fromCharCode(match1[1]):match2?String.fromCharCode(parseInt(match2[1],16).toString()):a)}}return chars.join("")}}}).filter("freqPercentatize",function(){return function(n){return Math.round(100*n)}}).filter("keylength",function(){return function(input){return angular.isObject(input)?Object.keys(input).length:0}});
angular.module("applause.foundation").service("insightsApiService",function(apiService){});
angular.module("applause.foundation").directive("internationalChart",function($window,$timeout,$filter){return{restrict:"E",replace:!0,scope:{chartData:"=",chartMetric:"=",hoverCountry:"=",since:"=",until:"="},template:'<svg class="international-chart"></svg>',link:function($scope,element,attrs){var renderTimeout,x,y,days,onTop,margin={top:0,right:0,bottom:30,left:0},height=350-margin.top-margin.bottom,svg=d3.select(element[0]).attr("width","100%").attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")");$scope.$on("applause.renderIntlChart",function(event,intType){$scope.render($scope.chartData,$scope.chartMetric)}),$scope.$watch("hoverCountry",function(newVal,oldVal){newVal!==oldVal&&onTop&&days&&(onTop.attr("xlink:href","#"+newVal),days.classed("out",function(d){return newVal&&this.id!==newVal}))}),$window.onresize=function(){$scope.$apply()},$scope.$watch("chartMetric",function(newVal,oldVal){newVal!==oldVal&&$scope.render($scope.chartData,newVal)}),$scope.$watch("since",function(newVal,oldVal){newVal!==oldVal&&$scope.render($scope.chartData,$scope.chartMetric)}),$scope.$watch("until",function(newVal,oldVal){newVal!==oldVal&&$scope.render($scope.chartData,$scope.chartMetric)}),$scope.$watch("chartData",function(newVal,oldVal){return $scope.chartData?newVal!==oldVal?$scope.render($scope.chartData,$scope.chartMetric):null:void 0},!1),$scope.$watch("chartData",function(newVal){$scope.chartData&&$scope.render($scope.chartData,$scope.chartMetric)},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.chartData&&$scope.render($scope.chartData,$scope.chartMetric)}),$scope.render=function(newData,metric){svg.selectAll("*").remove(),newData&&(renderTimeout&&$timeout.cancel(renderTimeout),renderTimeout=$timeout(function(){function filterNoScores(d){return d.value>-1}function filterDates(d){return xLow<=d.date&&d.date<=xHigh}var width=d3.select(element[0])[0][0].getBoundingClientRect().width-margin.left-margin.right,data=[];for(var key in newData[metric])if(newData.activeFunctions[key]()){var country={points:newData[metric][key].filter(filterNoScores),code:key,color:newData.colors[key]};data.push(country)}for(var xLow=moment($scope.since,"YYYY-MM-DD"),xHigh=moment($scope.until,"YYYY-MM-DD"),i=0;i<data.length;i++)data[i].points=data[i].points.filter(filterDates);x=d3.time.scale().range([30,width]).domain([xLow._d,xHigh._d]),y=d3.scale.linear().domain(newData.rangeFunctions[metric](data)).range([height,0]).nice(5);var xAxis=d3.svg.axis().scale(x).orient("bottom").ticks(10).tickFormat(d3.time.format("%b %e %Y")),yAxis=d3.svg.axis().scale(y).orient("right").tickSize(width).ticks(5);svg.append("g").attr("class","y axis").call(yAxis).selectAll("text").attr("x",0).attr("dy",16),svg.append("g").attr("class","x axis").attr("transform","translate(0, "+height+")").call(xAxis),days=svg.selectAll(".day").data(data).enter().append("g").attr("class","day").attr("id",function(d){return d.code}).on("mouseenter",function(d){$scope.hoverCountry=d.code}).on("mouseleave",function(d){$scope.hoverCountry=""});{var line=d3.svg.line().interpolate("linear").x(function(d){return x(d.date._d)}).y(function(d){return y(d.value)}),lineDrawDuration=2e3;days.append("path").attr("class","line").attr("stroke",function(d){return d.color}).attr("d",function(d){return line(d.points)}).attr("stroke-dasharray",function(d){var l=this.getTotalLength();return l+" "+l}).attr("stroke-dashoffset",function(d){return this.getTotalLength()}).transition().duration(lineDrawDuration).ease("linear").attr("stroke-dashoffset",0)}onTop=svg.append("use").attr("id","on-top").attr("xlink:href","")},200))}}}});
angular.module("applause.foundation").directive("keyWordWidget",function($timeout){return{restrict:"E",templateUrl:"key-word-widget/key-word-widget.html",replace:!0,scope:{keyWords:"="},controller:function($scope,$routeParams){},link:function($scope,el,attrs){$scope.newWordText="",$scope.showInput=!1;var newKeywordInput=el[0].getElementsByClassName("new-keyword-input")[0],newKeywordWidth=el[0].getElementsByClassName("new-keyword-input-width")[0];$timeout(function(){$scope.inputWidth=newKeywordWidth.offsetWidth},0),$scope.editWord=function(){$scope.showInput=!0,$timeout(function(){newKeywordInput.focus()},0,!1)},$scope.removeWord=function(index){$scope.keyWords.splice(index,1)},$scope.onType=function(e){$timeout(function(){$scope.inputWidth=newKeywordWidth.offsetWidth},0),(13===e.keyCode||32===e.keyCode||9===e.keyCode)&&(e.preventDefault(),$scope.addWord(),13===e.keyCode&&($scope.showInput=!1))},$scope.addWord=function(){$scope.newWordText&&-1===$scope.keyWords.indexOf($scope.newWordText)&&$scope.keyWords.push($scope.newWordText),$scope.newWordText=""}}}});
angular.module("applause.foundation").service("notificationService",function($window,$rootScope,$compile,$timeout){function Notification(type,title,msg,lifespan){this.type=type,this.classes={},this.classes[type]=!0,this.title=title,this.msg=msg,this.lifespan="undefined"!=typeof lifespan?lifespan:5e3,this.reset()}{var area=$window.document.createElement("notification-area");$compile(area)($rootScope.$new(!0))}angular.element($window.document.body).append(area);var self=this;self.notifications=[],self.info=function(title,msg,lifespan){var notification=new Notification("info",title,msg,lifespan);return self.notifications.push(notification),notification},self.error=function(title,msg,lifespan){var notification=new Notification("error",title,msg,lifespan);return self.notifications.push(notification),notification},self.success=function(title,msg,lifespan){var notification=new Notification("success",title,msg,lifespan);return self.notifications.push(notification),notification},self.pause=function(){self.notifications.forEach(function(c){c.pause()})},self.reset=function(){self.notifications.forEach(function(c){c.reset()})},Notification.prototype.reset=function(){0!==this.lifespan&&(this.death=$timeout(this.fadeOut.bind(this),this.lifespan))},Notification.prototype.pause=function(){this.death&&$timeout.cancel(this.death),this.classes["fade-out"]=!1},Notification.prototype.remove=function(){var i=self.notifications.indexOf(this);self.notifications.splice(i,1)},Notification.prototype.fadeOut=function(){this.classes["fade-out"]=!0,this.death=$timeout(this.remove,1e3)}}),angular.module("applause.foundation").directive("notificationArea",function(){return{restrict:"E",templateUrl:"notification-service/notification-area.html",replace:!0,scope:!0,controller:function($scope,notificationService){$scope.notifications=notificationService.notifications,$scope.pause=notificationService.pause,$scope.reset=notificationService.reset}}});
angular.module("applause.foundation").directive("offeringHeader",function(offeringRouterService,analyticsApiService,$timeout,$rootScope){return{restrict:"E",templateUrl:"offering-header/offering-header.html",replace:!0,controller:function($scope,$routeParams){$scope.router=offeringRouterService,$scope.gotoView=offeringRouterService.gotoView,$scope.searchHasFocus=!1,$scope.apiService=analyticsApiService,$scope.cachedApps={},$scope.currentApp={},$scope.appSuggestionsCount=4,$scope.filteredApps=[],$scope.setApp=function(app){$scope.cachedApps[app.app_id]=app,offeringRouterService.gotoView(offeringRouterService.selectedView.split(":appId")[0]+app.app_id)}},link:function($scope,el,attrs){$rootScope.$on("$routeChangeSuccess",function(e,newRoute,prevRoute){var appId=newRoute.params.appId;return $scope.filteredApps=[appId],$scope.cachedApps[appId]?void($scope.currentApp=$scope.cachedApps[appId]):void analyticsApiService.appSearch({q:appId,limit:1}).then(function(results){$scope.cachedApps[appId]=results.data.data.apps[0],$scope.currentApp=$scope.cachedApps[appId]},function(){console.error("AppInfo request for app "+appId+" failed!")})})}}});
angular.module("applause.foundation").directive("offeringNav",function(offeringRouterService){return{restrict:"E",templateUrl:"offering-nav/offering-nav.html",replace:!0,controller:function($scope,$routeParams,stateService){$scope.router=offeringRouterService,$scope.followRoute=function(route,index){if(!route.subNav)return void offeringRouterService.gotoView({view:route.target});for(var i=0;i<$scope.offeringRoutes.length;i++)i!==index&&($scope.offeringRoutes[i].subActive=!1);route.subActive=!route.subActive},$scope.isActive=function(route){return offeringRouterService.selectedView.indexOf(route.target)>-1},stateService.subscribeUser($scope,function(user){$scope.pageViews=user.pageViews}),$scope.offeringRoutes=[{target:"dashboard",iconClass:"iconic iconic-globe",displayName:"Dashboard"},{target:"appNav",iconClass:"iconic iconic-iphone",displayName:"Application",subNav:[{target:"stats",iconClass:"iconic iconic-star",displayName:"Applause Stats"},{target:"reviews",iconClass:"iconic iconic-comment-square",displayName:"Reviews"},{target:"clusters",iconClass:"iconic iconic-layers",displayName:"Clusters"},{target:"international",iconClass:"iconic iconic-flag",displayName:"International"}]},{target:"competeNav",iconClass:"iconic iconic-pulse",displayName:"Competition",subNav:[{target:"benchmark",iconClass:"iconic iconic-dashboard",displayName:"Benchmarking"},{target:"compare",iconClass:"iconic iconic-ratio",displayName:"Compare"}]},{target:"economy",iconClass:"iconic iconic-server",displayName:"Apps Economy"},{target:"report",iconClass:"iconic iconic-server",displayName:"Analyst Corner",noOnboard:!0}]}}});
angular.module("applause.foundation").directive("offeringPicker",function($timeout,$window,$sce,permissionService){return{restrict:"E",replace:!0,scope:{},templateUrl:"offering-picker/offering-picker.html",controller:function($scope,$rootScope){$rootScope.$on("$routeChangeStart",function(){$rootScope.offeringPickerLightBG=!1})},link:function($scope,el,attrs){$scope.offerings=[{abbr:$sce.trustAsHtml("ALX&deg;"),offering:"alx",name:"ANALYTICS",dest:"/analyticsv3/",learnMoreUrl:"http://www.applause.com/analytics",active:!0},{abbr:$sce.trustAsHtml("TS"),offering:"ts",name:"TESTING SERVICES",dest:"/testing",learnMoreUrl:"http://www.applause.com/testing-services"},{abbr:$sce.trustAsHtml("AU"),offering:"au",name:"AUTOMATION",dest:"/automation/",learnMoreUrl:"http://www.applause.com/automation"},{abbr:$sce.trustAsHtml("MBM"),offering:"mbm",name:"MOBILE BETA MANAGEMENT",dest:"/beta",learnMoreUrl:"http://www.applause.com/beta"},{abbr:$sce.trustAsHtml("SDK"),offering:"sdk",name:"SOFTWARE DEV KIT",dest:"/sdk",learnMoreUrl:"http://www.applause.com/sdk"},{abbr:$sce.trustAsHtml("360&deg;"),name:"APP QUALITY",dest:"/welcome/",learnMoreUrl:"/welcome/"}],$scope.navToOffering=function(offering){offering.active||($window.location=permissionService.userPermissions[offering.offering]?offering.dest:offering.learnMoreUrl)},$scope.pickerClick=function(e){e.stopPropagation();var pickerListener=function(e){$scope.isOpen=!1,$window.removeEventListener("click",pickerListener,!1),$scope.$apply()};$scope.isOpen=!$scope.isOpen,$scope.isOpen?$window.addEventListener("click",pickerListener,!1):$window.removeEventListener("click",pickerListener,!1)}}}});
angular.module("applause.foundation").service("offeringRouterService",function($window,$location,$rootScope,$routeParams,stateService){this.selectedView="",this.gotoView=function(options){if("string"==typeof options)return void $location.path(options);if(null!=options.view&&""==options.view)return void $location.path("/");var dest={view:options.view||this.selectedView.split("/")[0]||"dashboard",app:options.app||$routeParams.appId||stateService.getAppId(),country:options.country||$routeParams.countryCode||stateService.getCountry()};if("undefined"!=typeof options.params)for(var key in options.params)$location.search(key,options.params[key]);$location.path("/"+dest.view+"/"+dest.app+"/"+dest.country)},$rootScope.$on("$routeChangeSuccess",function(e,newRoute,prevRoute){this.selectedView=newRoute.originalPath.substr(1,newRoute.originalPath.length-1),$window.ga&&$window.ga("send","pageview",this.selectedView.replace(":appId",$routeParams.appId).replace(":countryCode",$routeParams.countryCode))}.bind(this))});
angular.module("applause.foundation").service("offeringStateService",function($rootScope,$window){var cacheKey="applause.foundation.analytics",cache={},saveCache=function(){$window.localStorage.setItem(cacheKey,JSON.stringify(cache))},loadCache=function(){cache=JSON.parse($window.localStorage.getItem(cacheKey))||{}};this.get=function(key){return cache[key]},this.set=function(key,value){cache[key]=value,saveCache()},loadCache()});
angular.module("applause.foundation").directive("onOffSwitch",function(){return{restrict:"E",replace:!0,scope:{value:"="},template:'<span class="on-off-switch" ng-click="switchValue()" ng-class="{ active: value }"></span>',controller:function($scope){},link:function($scope,element,attrs){$scope.switchValue=function(){$scope.value=!$scope.value}}}});
angular.module("applause.foundation").service("onboardingService",function($window,$timeout,userService){function render(options){var win=angular.element($window),tipTips=options.tips.map(function(tip){return new Tip(tip)}),tipAdjuster=getTipAdjuster(tipTips);win.on("resize",tipAdjuster);var overlay=angular.element('<div id="onboarding-overlay"></div>').on("click",function(){angular.element(this).remove(),userService.viewPage(options.view),win.off("resize",tipAdjuster)});angular.element(document.getElementById("applause-offering")).append(overlay),tipTips.forEach(function(tip){tip.placeOn(overlay)})}function getTipAdjuster(tipsToAdjust){return function(){tipsToAdjust.forEach(function(tip){tip.adjust()})}}function getPositionString(el){do if(el.style&&"fixed"===$window.getComputedStyle(el,null).position)return"position:fixed;";while(el=el.offsetParent);return""}function getOffsetLeft(el){var offset=0;do isNaN(el.offsetLeft)||(offset+=el.offsetLeft);while(el=el.offsetParent);return offset}function getOffsetTop(el){var offset=0;do isNaN(el.offsetTop)||(offset+=el.offsetTop);while(el=el.offsetParent);return offset}function Tip(tip){for(var key in tip)tip.hasOwnProperty(key)&&(this[key]=tip[key])}var self=this,document=$window.document;self.render=function(options){$timeout(function(){render(options)})},Tip.prototype.getTipPlacement=function(){var el=document.querySelector(this.selector),style="";switch(this.pos){case"top":style+="left:"+(getOffsetLeft(el)+el.offsetWidth/2)+"px;",style+="top:"+getOffsetTop(el)+"px;";break;case"bottom":style+="left:"+(getOffsetLeft(el)+el.offsetWidth/2)+"px;",style+="top:"+(getOffsetTop(el)+el.offsetHeight)+"px;";break;case"right":style+="left:"+(getOffsetLeft(el)+el.offsetWidth)+"px;",style+="top:"+(getOffsetTop(el)+el.offsetHeight/2)+"px;";break;case"left":style+="left:"+getOffsetLeft(el)+"px;",style+="top:"+(getOffsetTop(el)+el.offsetHeight/2)+"px;"}return style+=getPositionString(el)},Tip.prototype.placeOn=function(cont){this.el=angular.element('<article class="onboard-tip '+this.pos+(this.noArrow?" no-arrow":"")+'" style="'+this.getTipPlacement()+'">'+this.text+"</article>"),cont.append(this.el)},Tip.prototype.adjust=function(){this.el[0].style.cssText=this.getTipPlacement()}});
angular.module("applause.foundation").directive("pager",function(){return{restrict:"E",replace:!0,scope:{eventName:"=",page:"=",totalPages:"="},templateUrl:"pager/pager.html",controller:function($scope,$rootScope){$scope.pageUp=function(){$scope.page<$scope.totalPages&&$scope.page++},$scope.pageDown=function(){$scope.page>1&&$scope.page--},$scope.$watch("page",function(newValue,oldValue){newValue!==oldValue&&$rootScope.$broadcast($scope.eventName,!0)})}}});
angular.module("applause.foundation").service("permissionService",function($rootScope){this.userPermissions=window.USER_PERMISSIONS});
angular.module("applause.foundation").directive("radarChart",function($window,$timeout){return{restrict:"E",replace:!0,scope:{appList:"=",showCat:"=",updateVisibleEvent:"=",chartDrawn:"="},template:'<svg class="radar-chart"></svg>',controller:function($scope){},link:function($scope,element,attrs){function RadarAxis(name,startX,startY){this.name=name,this.startX=startX,this.startY=startY,this.endX=0,this.endY=0,this.labelPos="TOP",this.labelAnchor=function(){switch(this.labelPos){case"TOP":case"BOTTOM":return"middle";case"RIGHT":return"start";case"LEFT":return"end"}},this.coordX=function(score){return this.startX+score/100*(this.endX-this.startX)},this.coordY=function(score){return this.startY+score/100*(this.endY-this.startY)},this.coord=function(score){return this.coordX(score)+","+this.coordY(score)}}var renderTimeout,margin={top:50,right:100,bottom:50,left:100},svg=d3.select(element[0]).append("g").attr("transform","translate("+margin.left+","+margin.top+")");$scope.$watchCollection("appList",function(newVal,oldVal){newVal.length>0&&$scope.render(newVal)}),$scope.$watch("showCat",function(newVal,oldVal){newVal!==oldVal&&svg.selectAll(".cat-avg").classed("out",!newVal)}),$scope.$on($scope.updateVisibleEvent,function(event,app){svg.select(".app-layer[data-app-id='"+app.appId+"'][data-app-country='"+app.details.country+"']").classed("out",app.isHidden)}),$window.onresize=function(){$scope.$apply()},$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.appList)}),$scope.render=function(data){svg.selectAll("*").remove(),data&&(renderTimeout&&$timeout.cancel(renderTimeout),renderTimeout=$timeout(function(){var width=Math.min(700,d3.select(element[0])[0][0].getBoundingClientRect().width)-margin.left-margin.right,height=6*(width+margin.left+margin.right)/7-margin.top-margin.bottom;d3.select(element[0]).attr("height",height+margin.top+margin.bottom);var axes=[];if(data.length>0)for(var key in data[0].scores){for(var include=!0,i=0;i<data.length;i++)if(-1===data[i].scores[key].score){include=!1;break}include&&axes.push(new RadarAxis(key,width/2,height/2))}else for(var i=0;10>i;i++)axes.push(new RadarAxis("",width/2,height/2));for(var i=0;i<axes.length;i++){var a=0+2*Math.PI/axes.length*i;a-=2*Math.PI/4,axes[i].endX=width/2+width/2*Math.cos(a),axes[i].endY=height/2+height/2*Math.sin(a),axes[i].labelPos=0===i?"TOP":i<axes.length/2?"RIGHT":i===axes.length/2?"BOTTOM":"LEFT"}var chartLayer=svg.append("g").attr("class","chart-layer").classed("no-data",function(){return 0===data.length});chartLayer.append("polygon").attr("class","line outer").attr("points",function(d){return axes.map(function(a){return a.coord(100)}).join(" ")}),chartLayer.append("polygon").attr("class","line").attr("points",function(d){return axes.map(function(a){return a.coord(66)}).join(" ")}),chartLayer.append("polygon").attr("class","line").attr("points",function(d){return axes.map(function(a){return a.coord(33)}).join(" ")});var axisLines=chartLayer.selectAll(".axis-line").data(axes);if(axisLines.enter().append("g").attr("class","axis-line").append("line").attr("class","line").attr("x1",function(d){return d.startX}).attr("y1",function(d){return d.startY}).attr("x2",function(d){return d.endX}).attr("y2",function(d){return d.endY}),axisLines.append("text").attr("x",function(d){return d.coordX(105)}).attr("y",function(d){return d.coordY(105)}).attr("text-anchor",function(d){return d.labelAnchor()}).text(function(d){return d.name}),axisLines.append("circle").attr("cx",function(d){return d.coordX(100)}).attr("cy",function(d){return d.coordY(100)}).attr("r",3),0===data.length)return chartLayer.append("text").attr("class","no-data-message").text("Not enough data available.").attr("x",width/2).attr("y",height/2-20),chartLayer.append("text").attr("class","no-data-detail").text("The apps you have selected do not have enough review data to populate this chart.").attr("x",width/2).attr("y",height/2+10),void chartLayer.append("text").attr("class","no-data-detail").text("Please try some different apps.").attr("x",width/2).attr("y",height/2+30);var catAvg=chartLayer.append("g").attr("class","cat-avg").classed("out",!$scope.showCat);catAvg.append("polygon").attr("points",function(){return axes.map(function(a){return a.coord(0)})}).transition().duration(400).attr("points",function(){return axes.map(function(a){return a.coord(data[0].catScores[a.name].avg)})});for(var i=0;i<axes.length;i++)catAvg.append("circle").attr("cx",function(d){return axes[i].coordX(0)}).attr("cy",function(d){return axes[i].coordY(0)}).attr("r",5).transition().duration(400).attr("cx",function(d){return axes[i].coordX(data[0].catScores[axes[i].name].avg)}).attr("cy",function(d){return axes[i].coordY(data[0].catScores[axes[i].name].avg)});var appLayers=svg.selectAll(".app-layer").data(data),apps=appLayers.enter().append("g").attr("class","app-layer").attr("data-app-id",function(d){return d.id}).attr("data-app-country",function(d){return d.country}).classed("out",function(d){return d.isHidden});apps.append("polygon").attr("points",function(d){return axes.map(function(a){return a.coord(0)})}).attr("fill",function(d){return d.color}).attr("stroke",function(d){return d.color}).transition().duration(400).attr("points",function(d){return axes.map(function(a){return a.coord(d.scores[a.name].score)}).join(" ")});for(var j=0;j<axes.length;j++)apps.append("circle").attr("cx",function(d){return axes[j].coordX(0)}).attr("cy",function(d){return axes[j].coordY(0)}).attr("r",5).attr("fill",function(d){return d.color}).attr("stroke",function(d){return d.color}).transition().duration(400).attr("cx",function(d){return axes[j].coordX(d.scores[axes[j].name].score)}).attr("cy",function(d){return axes[j].coordY(d.scores[axes[j].name].score)})},400))}}}});
angular.module("applause.foundation").directive("relatedAppsGraph",function($timeout,$window){return{restrict:"E",replace:!0,scope:{data:"="},template:'<div class="related-apps-graph"></div>',link:function($scope,el,attrs){var force,svg,foci,height=220,nodeSize=60;$scope.$watch("data",function(data){$scope.render(data)}),$window.onresize=function(){$scope.$apply()},$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){if(force){var width=el.parent()[0].clientWidth;foci.even.x=width-nodeSize,foci.even.y=height/2,foci.odd.x=nodeSize,foci.odd.y=height/2,force.size([width,height]).start()}}),$scope.render=function(data){if(data){svg&&svg.remove();var width=el.parent()[0].clientWidth;svg=d3.select(el[0]).append("svg").attr("width","100%").attr("height",height),foci={even:{x:width-nodeSize,y:height/2},odd:{x:nodeSize,y:height/2}};var maxReviews=d3.max(data.competitors,function(d){return d.review_count}),nodes=[data.self].concat(data.competitors);nodes.forEach(function(c,i){0===i&&(c.x=width/2,c.y=height/2);var floor=15;c.size=floor+Math.sqrt(c.review_count/maxReviews)*(nodeSize-floor)});var links=data.competitors.map(function(c,i){return{source:0,target:i+1,strength:c.review_count/maxReviews}});force=d3.layout.force().charge(-240).linkDistance(60).linkStrength(function(d){return d.strength}).size([width,height]),force.nodes(nodes).links(links).start();var link=svg.selectAll(".link").data(links).enter().append("line").attr("class","link"),node=svg.selectAll(".node").data(nodes).enter().append("g").attr("class","node").classed("self",function(d,i){return 0===i}).classed("active",function(d,i){return 1===i}).call(force.drag);node.on("click",function(d,i){0===i||this.classList.contains("active")||($scope.$emit("APPLAUSE.COMPETITOR_SELECTED",d),svg.selectAll(".node.active").classed("active",!1),this.classList.add("active"))}),node.append("circle").attr("class","active-circle").attr("r",function(d){return d.size/2+50}),node.append("circle").attr("class","active-circle").attr("r",function(d){return d.size/2+20}),node.append("circle").attr("class","active-circle").attr("r",function(d){return d.size/2+10}),node.append("image").attr("xlink:href",function(d){return d.img_url}).attr("width",function(d){return d.size}).attr("height",function(d){return d.size}).attr("x",function(d){return d.size/-2}).attr("y",function(d){return d.size/-2}).attr("clip-path",function(d){return"url("+location.href+"#"+d.app_id+"-"+d.country+")"}).append("title").text(function(d){return d.title}),node.append("clipPath").attr("id",function(d){return d.app_id+"-"+d.country}).append("circle").attr("class","circle-clip").attr("r",function(d){return d.size/2});var borderWidth=2;node.append("circle").attr("class","border").attr("stroke-width",borderWidth).attr("r",function(d){return d.size/2+borderWidth/2}),node.append("circle").attr("class","review-border").classed("neg",function(d){return d.store_rating<3.5}).attr("stroke-width",borderWidth).attr("r",function(d){return d.size/2+5});var store=node.append("g").attr("class","store").attr("transform",function(d){var x=d.size/2*Math.cos(45*Math.PI/180)+4,y=d.size/2*Math.sin(45*Math.PI/180)+4;return"translate("+x+" "+y+")"});store.append("circle").attr("class","store-container").attr("r",8).attr("cx",0).attr("cy",0),store.append("text").attr("class","store-icon").text(function(d){return"apple"===d.market?"":""}),force.on("tick",function(e){var k=.2*e.alpha;nodes.forEach(function(o,i){if(0===i){var size=force.size();o.x+=4*(size[0]/2-o.x)*k,o.y+=4*(size[1]/2-o.y)*k}else o.x+=(foci[1&i?"even":"odd"].x-o.x)*k}),link.attr("x1",function(d){return d.source.x}).attr("y1",function(d){return d.source.y}).attr("x2",function(d){return d.target.x}).attr("y2",function(d){return d.target.y}),node.attr("transform",function(d){return"translate("+d.x+" "+d.y+")"})})}}}}});
angular.module("applause.foundation").directive("reviewGraph",function($window,$timeout){return{restrict:"E",replace:!0,scope:{ratings:"=",releases:"="},templateUrl:"review-graph/review-graph.html",controller:function($scope){},link:function($scope,element,attrs){var renderTimeout,margin={top:0,right:0,bottom:30,left:0},height=370-margin.top-margin.bottom,svg=d3.select(element[0]).attr("width","100%").attr("height",height+margin.top+margin.bottom).style("overflow","visible").append("g").attr("transform","translate("+margin.left+","+margin.top+")");$window.onresize=function(){$scope.$apply()},$scope.$watch("ratings",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!1),$scope.$watch("ratings",function(newVals){$scope.render(newVals)},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.ratings)}),$scope.render=function(data){svg.selectAll("*").remove(),data&&(renderTimeout&&$timeout.cancel(renderTimeout),renderTimeout=$timeout(function(){for(var width=d3.select(element[0])[0][0].getBoundingClientRect().width-margin.left-margin.right,data=[],i=0;i<$scope.ratings.dates.length;i++)data.push({date:moment($scope.ratings.dates[i],"YYYY-MM-DD"),avg:$scope.ratings.avg_ratings[i],pos:$scope.ratings.stars_5[i]+$scope.ratings.stars_4[i],neg:$scope.ratings.stars_3[i]+$scope.ratings.stars_2[i]+$scope.ratings.stars_1[i]});for(var x=d3.time.scale().range([30,width-width/data.length]).domain(d3.extent(data,function(d){return d.date._d})),start=x.domain()[0],end=x.domain()[1],releaseMap={},filteredReleases=$scope.releases.map(function(d){return moment(d.release_date,"YYYY-MM-DD")}).filter(function(d,i){return d>=start&&end>=d?(releaseMap[d._d.toString()]=$scope.releases[i].version,!0):!1}),xAxis=d3.svg.axis().scale(x).orient("bottom").ticks(10).tickFormat(d3.time.format("%b %d")),yRange=d3.max(data,function(d){return Math.max(d.pos,d.neg,4)}),centerPad=50,yPos=d3.scale.linear().range([height/2-centerPad/2,0]).domain([0,yRange]).nice(2),yPosAxis=d3.svg.axis().scale(yPos).tickSize(width).ticks(5).orient("right"),yNeg=d3.scale.linear().range([height/2+centerPad/2,height]).domain([0,yRange]).nice(2),yNegAxis=d3.svg.axis().scale(yNeg).tickSize(width).ticks(5).orient("right"),xAxisEl=svg.append("g").attr("class","x axis").attr("transform","translate(0, "+height+")").call(xAxis),dateTicks=xAxisEl.selectAll(".tick"),ticksClean=!1;!ticksClean;){ticksClean=!0;for(var j=0;j<dateTicks[0].length;j++){var c=dateTicks[0][j],n=dateTicks[0][j+1];if(c&&n&&c.getBoundingClientRect&&n.getBoundingClientRect&&c.getBoundingClientRect().right>n.getBoundingClientRect().left){ticksClean=!1;break}}ticksClean||(xAxisEl.selectAll(".tick:nth-child(even)").remove(),dateTicks=xAxisEl.selectAll(".tick"))}svg.append("g").attr("class","y axis").call(yPosAxis).selectAll("text").attr("x",0).attr("dy",12),svg.append("g").attr("class","y axis").call(yNegAxis).selectAll("text").attr("x",0).attr("dy",-4);var releases=svg.selectAll(".release").data(filteredReleases);releases.exit().remove(),releases.enter().append("path").attr("class","release").attr("d",function(d){var xPos=x(d),commands=[];return commands.push("M"+xPos+",0"),commands.push("V"+(height/2-4)),commands.push("A4 4 0 0 1 "+xPos+" "+(height/2+4)),commands.push("A4 4 0 0 1 "+xPos+" "+(height/2-4)),commands.push("M"+xPos+","+(height/2+4)),commands.push("V"+height),commands.join(" ")});var days=svg.selectAll(".day").data(data);days.exit().remove();var gs=days.enter().append("g").attr("class","day");gs.append("rect").attr("class","hover-container").attr("x",function(d){return x(d.date._d)-width/data.length/2}).attr("width",width/data.length).attr("y",0).attr("height",height),gs.append("rect").attr("class","hover-line").attr("x",function(d){return x(d.date._d)-width/data.length/4}).attr("width",width/data.length/2).attr("y",0).attr("height",height),gs.append("rect").attr("class","pos bar").attr("x",function(d){return x(d.date._d)-width/data.length/4}).attr("width",width/data.length/2).attr("y",height/2).attr("height",0).transition().duration(400).attr("y",function(d){return yPos(d.pos)}).attr("height",function(d){return height/2-centerPad/2-yPos(d.pos)}),gs.append("rect").attr("class","neg bar").attr("x",function(d){return x(d.date._d)-width/data.length/4}).attr("width",width/data.length/2).attr("y",height/2+centerPad/2).attr("height",0).transition().duration(400).attr("height",function(d){return yNeg(d.neg)-(height/2+centerPad/2)});var tableWidth=250,tableHeight=88,triangleSize=6,tableSpace=width/data.length/4+triangleSize+3;gs.on("mouseenter",function(){d3.select(this).append("foreignObject").attr("class","details").attr("pointer-events","none").attr("x",function(d){var i=data.indexOf(d3.select(this).datum());return i>data.length/2?x(d.date._d)-(tableWidth+tableSpace):x(d.date._d)+tableSpace}).attr("y",function(d){return yPos(d.pos)-tableHeight/2}).attr("width",tableWidth).attr("height",tableHeight).append("xhtml:body").classed("left-arrow",function(d){var i=data.indexOf(d3.select(this).datum());return i<=data.length/2}).html(function(d){var percent=d3.format("%"),html=[];return html.push("<table>"),html.push("  <tbody>"),html.push("    <tr>"),html.push('      <td colspan="3">'+d.date.format("MMM DD, YYYY")),"undefined"!=typeof releaseMap[d.date._d.toString()]&&html.push('        <span class="pull-right" style="text-transform:none;">v. '+releaseMap[d.date._d.toString()]+"</span>"),html.push("      </td>"),html.push("    </tr>"),html.push("    <tr>"),html.push("      <td>POSITIVE REVIEWS</td>"),html.push("      <td>"+d.pos+"</td>"),html.push("      <td>"+(0===d.pos&&0===d.neg?"*":percent(d.pos/(d.pos+d.neg)))+"</td>"),html.push("    </tr>"),html.push("    <tr>"),html.push("      <td>NEGATIVE REVIEWS</td>"),html.push("      <td>"+d.neg+"</td>"),html.push("      <td>"+(0===d.pos&&0===d.neg?"*":percent(d.neg/(d.pos+d.neg)))+"</td>"),html.push("    </tr>"),html.push("  </tbody>"),html.push("</table>"),html.join("\r\n")})}).on("mouseleave",function(){d3.select(this).selectAll(".details").remove()})},200))}}}});
angular.module("applause.foundation").directive("reviewStream",function($q,analyticsApiService){return{restrict:"E",replace:!0,scope:{reviews:"=",query:"="},templateUrl:"review-stream/review-stream.html"}});
angular.module("applause.foundation").directive("reviewVolumeGraph",function($window,$timeout){return{restrict:"E",replace:!0,scope:{data:"="},templateUrl:"review-volume-graph/review-volume-graph.html",controller:function($scope){$scope.processData=function(data){return data}},link:function($scope,element,attrs,ctrl){var options={};null!=attrs.height&&(options.height=attrs.height),null!=attrs.width&&(options.width=attrs.width);var duration=500,height=200;$window.onresize=function(){$scope.$apply()},$scope.$watch("data",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!0),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.data)});var margin={top:20,right:5,bottom:20,left:0},svg=d3.select(element[0]).append("svg").attr("width","100%").attr("height",height+"px").append("g"),container=svg.append("g").classed("container-group",!0),yaxis=(container.append("g").classed("x-axis-group axis",!0),container.append("g").classed("y-axis-group axis",!0));yaxis.selectAll("g").classed("minor",!0),container.append("g").classed("chart-group",!0);var chartGroup=svg.select(".chart-group"),compGroup=chartGroup.selectAll("g.comp-chart").data([{}]).enter().append("g").attr("class","comp-chart"),selfGroup=chartGroup.selectAll("g.self-chart").data([{}]).enter().append("g").attr("class","self-chart"),defs=svg.append("defs");defs.append("linearGradient").attr("id","self-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",1).selectAll("stop").data([{offset:"0%",color:"rgb(2,144,254)",opacity:"0.4"},{offset:"80%",color:"rgb(2,144,254)",opacity:"0"}]).enter().append("stop").attr("offset",function(d){return d.offset}).attr("stop-color",function(d){return d.color}).attr("stop-opacity",function(d){return d.opacity}),defs.append("linearGradient").attr("id","comp-gradient").attr("gradientUnits","objectBoundingBox").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",1).selectAll("stop").data([{offset:"0%",color:"rgb(153,153,153)",opacity:".4"},{offset:"80%",color:"rgb(153,153,153)",opacity:"0"}]).enter().append("stop").attr("offset",function(d){return d.offset}).attr("stop-color",function(d){return d.color}).attr("stop-opacity",function(d){return d.opacity}),$scope.render=function(data){if(data){null!=renderTimeout&&$timeout.cancel(renderTimeout);var renderTimeout=$timeout(function(){var fullWidth=d3.select(element[0])[0][0].offsetWidth,width=d3.select(element[0])[0][0].offsetWidth-margin.left-margin.right,chartW=width,chartH=height-margin.top-margin.bottom,x1=d3.time.scale().range([30,chartW]).domain(d3.extent(data.dates,function(d){return moment(d)._d})),xAxis=d3.svg.axis().scale(x1).orient("bottom").ticks(d3.time.day,5).tickFormat(d3.time.format("%b %d")),limit=d3.max(data.ratings.map(function(d){return d.values[0]>d.values[1]?d.values[0]:d.values[1]})),y1=d3.scale.linear().domain([0,limit]).range([chartH,0]).nice(2),yAxis=d3.svg.axis().scale(y1).orient("right").ticks(4).tickSize(fullWidth).tickFormat(function(d){return 0===d?"":parseInt(d)?Math.abs(d):""});svg.transition().duration(duration).attr({width:width,height:height}),svg.select(".x-axis-group.axis").attr({transform:"translate(0,"+chartH+")"}).call(xAxis),svg.select(".y-axis-group.axis").call(yAxis).selectAll("text").attr("x",0).attr("dy",12);var selfData=_(data.ratings).map(function(d){return{date:d.date,value:d.values[0]}}),compData=_(data.ratings).map(function(d){return{date:d.date,value:d.values[1]}}),area=d3.svg.area().x(function(d){return x1(moment(d.date)._d)}).y0(chartH).y1(function(d){return y1(d.value)}),line=d3.svg.line().x(function(d){return x1(moment(d.date)._d)}).y(function(d){return y1(d.value)}),comp=compGroup.selectAll(".comp").data([compData]);comp.enter().append("path").attr("class","comp").style("fill","url("+location.href+"#comp-gradient)"),comp.transition().duration(400).attr("d",area);var compLine=compGroup.selectAll(".comp-line").data([compData]);compLine.enter().append("path").attr("class","comp-line"),compLine.transition().duration(400).attr("d",line);var compDots=compGroup.selectAll(".dot").data(compData);compDots.enter().append("circle").attr("class","dot").attr("r",3.5),compDots.transition().duration(600).attr("cy",function(d){return y1(d.value)}).attr("cx",function(d){return x1(moment(d.date)._d)});var self=selfGroup.selectAll(".self").data([selfData]);self.enter().append("path").attr("class","self").style("fill","url("+location.href+"#self-gradient)"),self.transition().duration(400).attr("d",area);var selfLine=selfGroup.selectAll(".self-line").data([selfData]);selfLine.enter().append("path").attr("class","self-line"),selfLine.transition().duration(400).attr("d",line);var selfDots=selfGroup.selectAll(".dot").data(selfData);selfDots.enter().append("circle").attr("class","dot"),selfDots.transition().duration(400).attr("r",3.5).attr("cx",function(d){return x1(moment(d.date)._d)}).attr("cy",function(d){return y1(d.value)})})}}}}});
angular.module("applause.foundation").directive("safeHtml",function(){return function(scope,element,attr){scope.$watch(attr.safeHtml,function(value){element.html(scope.$eval(attr.safeHtml))})}});
angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function($templateCache){$templateCache.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{[{$iconLeft}]}"></i></button></th><th colspan="{[{ rows[0].length - 2 }]}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{[{$iconRight}]}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday }" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("applause.foundation").directive("reviewFilters",function(){return{restrict:"E",replace:!0,scope:{query:"=",eventName:"=",attributes:"=",customAttributes:"=",showAllDates:"=",startDate:"=",endDate:"=",starCount:"="},templateUrl:"review-filters/review-filters.html",controller:function($scope,$rootScope){function fireEvent(newValue,oldValue){newValue!==oldValue&&$rootScope.$broadcast($scope.eventName)}$scope.customNone=!0,$scope.updateAttr=function(name){$scope.attributes[name]=!$scope.attributes[name],fireEvent(!0,!1)},$scope.updateCustomAttr=function(attr){if("undefined"==typeof attr){for(var key in $scope.customAttributes)$scope.customAttributes[key].active=!1;return $scope.customNone||fireEvent(!0,!1),void($scope.customNone=!0)}if(!attr.active){$scope.customNone=!1;for(var key in $scope.customAttributes)$scope.customAttributes[key].active=$scope.customAttributes[key].id!==attr.id?!1:!0;fireEvent(!0,!1)}};var debounceTimer;$scope.$watch("query",function(newValue,oldValue){debounceTimer&&clearTimeout(debounceTimer),debounceTimer=setTimeout(function(){fireEvent(newValue,oldValue)},500)}),$scope.$watch("showAllDates",fireEvent),$scope.$watch("startDate",fireEvent),$scope.$watch("endDate",fireEvent),$scope.$watch("starCount",fireEvent)}}});
angular.module("applause.foundation").directive("searchResults",function($rootScope){return{restrict:"A",controller:function($scope){},link:function($scope,el,attrs){el.on("scroll",function(){this.scrollTop+this.offsetHeight>=this.scrollHeight-100&&$rootScope.$broadcast("APPLAUSE.SEARCH_MORE")})}}});
angular.module("applause.foundation").directive("starPicker",function($window){return{restrict:"E",replace:!0,scope:{starCount:"=",readOnly:"="},templateUrl:"star-picker/star-picker.html",controller:function($scope,$rootScope){$scope.updateStars=function(newCount){$scope.readOnly||($scope.starCount=newCount===$scope.starCount?0:newCount)}},link:function($scope,element,attrs){var oldStar,oldWidth;$scope.activeWidth=function(){var star=$scope.starCount;if("undefined"==typeof star)return"0px";if(star===oldStar)return oldWidth;oldStar=star;var i,el=element[0],widthNum=0,starFloor=Math.floor(star);for(i=0;starFloor>i;i++)widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("margin-left"),10),widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("padding-left"),10),widthNum+=el.children[i].offsetWidth,widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("padding-right"),10),widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("margin-right"),10);widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("margin-left"),10),widthNum+=parseInt($window.getComputedStyle(el.children[i]).getPropertyValue("padding-left"),10),widthNum+=el.children[i].offsetWidth*(star-starFloor);var width=widthNum+"px";return oldWidth=width,width}}}});
angular.module("applause.foundation").directive("scoreOverTimeGraph",function($window,$timeout,chartTickCleanService){return{restrict:"E",replace:!0,scope:{chartData:"=",scoreAttribute:"=",releases:"="},template:'<svg class="score-over-time-graph"></svg>',link:function($scope,element,attrs){var renderTimeout,x,days,gs,margin={top:0,right:0,bottom:30,left:0},height=320-margin.top-margin.bottom,svg=d3.select(element[0]).attr("width","100%").attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")"),area=d3.svg.area().x(function(d){return x(d.date._d)}).y0(height).y1(function(d){return y(d.value)}),y=d3.scale.linear().domain([0,100]).range([height,0]);$window.onresize=function(){$scope.$apply()},$scope.$watch("chartData",function(newVal,oldVal){return $scope.chartData&&$scope.chartData[$scope.scoreAttribute]?newVal!==oldVal?$scope.render($scope.chartData,$scope.scoreAttribute):null:void 0},!1),$scope.$watch("chartData",function(newVal){$scope.chartData&&$scope.chartData[$scope.scoreAttribute]&&$scope.render($scope.chartData,$scope.scoreAttribute)},!1),$scope.$watch("scoreAttribute",function(newVal,oldVal){$scope.chartData&&$scope.chartData[newVal]&&$scope.update($scope.chartData,newVal)},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.chartData&&$scope.chartData[$scope.scoreAttribute]&&$scope.render($scope.chartData,$scope.scoreAttribute)}),$scope.update=function(data,attr){var chartData=data[attr].map(function(d,i){return{date:moment(data.dates[i],"YYYY-MM-DD"),value:Math.max(d,0)}});svg.select(".area").datum(chartData).transition().duration(400).attr("d",area),svg.select(".line").datum(chartData).transition().duration(400).attr("d",function(d){var commands=[];commands.push("M"+x(d[0].date._d)+","+y(d[0].value));for(var i=1;i<chartData.length;i++)commands.push("L"+x(d[i].date._d)+","+y(d[i].value));return commands.join(" ")}),svg.selectAll(".details, .detail-triangle").remove(),days=svg.selectAll(".day").data(chartData);var tableWidth=175,tableHeight=69,triangleSize=6,tableSpace=triangleSize;gs.on("mouseenter",function(){d3.select(this).append("foreignObject").attr("class","details").attr("pointer-events","none").attr("x",function(d){var i=chartData.indexOf(d3.select(this).datum());return i>chartData.length/2?x(d.date._d)-(tableWidth+tableSpace):x(d.date._d)+tableSpace}).attr("y",function(d){return y(d.value)-tableHeight/2}).attr("width",tableWidth).attr("height",tableHeight).append("xhtml:body").classed("left-arrow",function(d){var i=chartData.indexOf(d3.select(this).datum());return i<=chartData.length/2}).html(function(d){var html=[];return html.push("<table>"),html.push("  <tbody>"),html.push("    <tr>"),html.push('      <td colspan="3">'+d.date.format("MMM DD, YYYY")+"</td>"),html.push("    </tr>"),html.push("    <tr>"),html.push("      <td>"+attr.toUpperCase()+" SCORE</td>"),html.push("      <td>"+d.value+"</td>"),html.push("    </tr>"),html.push("  </tbody>"),html.push("</table>"),html.join("\r\n")})}).on("mouseleave",function(){d3.select(this).selectAll(".details").remove()})},$scope.render=function(data,attr){svg.selectAll("*").remove(),data&&(renderTimeout&&$timeout.cancel(renderTimeout),renderTimeout=$timeout(function(){var width=d3.select(element[0])[0][0].getBoundingClientRect().width-margin.left-margin.right,chartData=data[attr].map(function(d,i){return{date:moment(data.dates[i],"YYYY-MM-DD"),value:Math.max(d,0)}});x=d3.time.scale().range([30,width]).domain(d3.extent(chartData,function(d){return d.date._d}));var xAxis=d3.svg.axis().scale(x).orient("bottom").tickFormat(d3.time.format("%b %e %Y")),yAxis=d3.svg.axis().scale(y).orient("right").tickSize(width).ticks(8);svg.append("g").attr("class","y axis").call(yAxis).selectAll("text").attr("x",0).attr("dy",12);var xAxisEl=svg.append("g").attr("class","x axis").attr("transform","translate(0, "+height+")").call(xAxis);xAxisEl.select(".tick:first-of-type text").style("text-anchor","start"),xAxisEl.select(".tick:last-of-type text").style("text-anchor","end"),chartTickCleanService.cleanTicks(xAxisEl),svg.append("path").datum(chartData).attr("class","area").attr("d",function(d){var commands=[];commands.push("M"+x(d[0].date._d)+","+y(0));for(var i=1;i<d.length;i++)commands.push("L"+x(d[i].date._d)+","+y(0));return commands.join(" ")}),svg.append("path").datum(chartData).attr("class","line").attr("d",function(d){var commands=[];commands.push("M"+x(d[0].date._d)+","+y(0));for(var i=1;i<d.length;i++)commands.push("L"+x(d[i].date._d)+","+y(0));return commands.join(" ")}),days=svg.selectAll(".day").data(chartData),gs=days.enter().append("g").attr("class","day"),gs.append("rect").attr("class","hover-container").attr("x",function(d){return x(d.date._d)-width/chartData.length/2}).attr("width",width/chartData.length).attr("y",0).attr("height",height),gs.append("path").attr("class","hover-line").attr("d",function(d){var xLocation=x(d.date._d),triSize=0,lineWidth=.25,commands=[];return commands.push("M"+(xLocation-lineWidth)+","+triSize),commands.push("L"+(xLocation-triSize)+",0"),commands.push("L"+(xLocation+triSize)+",0"),commands.push("L"+(xLocation+lineWidth)+","+triSize),commands.push("L"+(xLocation+lineWidth)+","+(height-triSize)),commands.push("L"+(xLocation+triSize)+","+height),commands.push("L"+(xLocation-triSize)+","+height),commands.push("L"+(xLocation-lineWidth)+","+(height-triSize)),commands.push("Z"),commands.join(" ")}),$scope.update(data,attr)},200))}}}});
angular.module("applause.foundation").directive("starRatingFilter",function(){return{restrict:"AE",replace:!0,templateUrl:"star-rating-filter/star-rating-filter.html",controller:function($scope){},link:function($scope,el,attrs){$scope.selectStar=function(star){$scope.showStars=star,$scope.search(!0)},$scope.starString=function(v){return 0==v?"Show All Ratings":v+" star ratings"}}}});
angular.module("applause.foundation").service("stateService",function($q,$rootScope,analyticsApiService,userService,$location,$timeout,$window){function setApp(newAppId,newCountry){appId=newAppId,country=newCountry,appResolved&&(appResolved=!1,appDefer=$q.defer(),appDefer.promise.then(function(){appResolved=!0})),analyticsApiService.appInfo(newAppId,newCountry).then(function(result){result.data.details.data=result.data.data["^^all^^"],app=result.data.details,country=newCountry,broadcastApp()})}function setUser(newUser){userResolved&&(userResolved=!1,userDefer=$q.defer(),$rootScope.loadingPage=!0,userDefer.promise.then(function(){userResolved=!0,$rootScope.loadingPage=!1})),$rootScope.lightThemeEnabled="light"===newUser.theme,user=newUser,broadcastUser()}function broadcastApp(){$rootScope.$broadcast(stateChangeEvents.app),appDefer.resolve(app)}function broadcastUser(){$rootScope.$broadcast(stateChangeEvents.user),userDefer.resolve(user)}function getParamWatch(key){return function(newVal,oldVal){newVal!==oldVal&&$location.search(key,newVal).replace()}}function getLocalStorage(){var s=$window.localStorage.getItem(localStorageKey),o=JSON.parse(s);return o||{}}function setLocalStorage(){$window.localStorage.setItem(localStorageKey,JSON.stringify(localStorageObj))}var user,self=this,stateChangeEvents={app:"APPLAUSE.STATE_CHANGE_APP",user:"APPLAUSE.STATE_CHANGE_USER"},appId="",country="us",app={},appDefer=$q.defer(),appResolved=!1,userDefer=$q.defer(),userResolved=!1,urlParamWatchers=[],urlParamCache={},currentViewPath="",localStorageKey="APPLAUSE.ANALYTICS",localStorageObj=getLocalStorage();self.urlParams={appId:"appId",countryCode:"countryCode"},self.countryOrder=["us","gb","au","ca","fr","it","de","es","br","mx","ar"],self.countries={us:{code:"us",displayName:"United States"},gb:{code:"gb",displayName:"United Kingdom"},au:{code:"au",displayName:"Australia"},ca:{code:"ca",displayName:"Canada"},fr:{code:"fr",displayName:"France"},it:{code:"it",displayName:"Italy"},de:{code:"de",displayName:"Germany"},es:{code:"es",displayName:"Spain"},br:{code:"br",displayName:"Brazil"},mx:{code:"mx",displayName:"Mexico"},ar:{code:"ar",displayName:"Argentina"}},self.subscribeApp=function(scope,callback){scope.$on(stateChangeEvents.app,function(){callback(app,country)}),appResolved&&$timeout(function(){callback(app,country)})},self.getApp=function(){return appDefer.promise},self.subscribeUser=function(scope,callback){scope.$on(stateChangeEvents.user,function(){callback(user)}),userResolved&&$timeout(function(){callback(user)})},self.getUser=function(){return userDefer.promise},self.updateUser=function(userObj){for(var key in userObj)userObj.hasOwnProperty(key)&&(user[key]=userObj[key]);setUser(user)},self.getCountry=function(){return country},self.getAppId=function(){return appId},self.bindUrlParams=function(scope,obj){var params=$location.search(),cache=urlParamCache[currentViewPath]||{};for(var key in obj)urlParamWatchers.push({key:key,dereg:scope.$watch(key,getParamWatch(key))}),("true"===params[key]||"false"===params[key])&&(params[key]="true"===params[key]),scope[key]="undefined"!=typeof params[key]?params[key]:"undefined"!=typeof cache[key]?cache[key]:obj[key],scope[key]!==params[key]&&$location.search(key,scope[key]);$location.replace()},$rootScope.loadingPage=!0,$q.all([userDefer.promise,appDefer.promise]).then(function(){appResolved=!0,userResolved=!0,$rootScope.loadingPage=!1}),$rootScope.lightThemeEnabled=localStorageObj.lightThemeEnabled===!0,$rootScope.$watch("lightThemeEnabled",function(newVal,oldVal){newVal!==oldVal&&"undefined"!=typeof oldVal&&(localStorageObj.lightThemeEnabled=newVal,setLocalStorage(),userService.setTheme(newVal===!0?"light":"dark"))}),userService.get().then(function(results){setUser(results)},function(){console.error("stateService - ERROR: Failed to retrieve user details.")}),$rootScope.$on(userService.updateEvent,function(e,userObj){self.updateUser(userObj)}),$rootScope.$on("$routeChangeStart",function(e,newRoute,prevRoute){currentViewPath=newRoute.originalPath;var newAppId=newRoute.params[self.urlParams.appId],countryCode=newRoute.params[self.urlParams.countryCode],appChange=!1;if((newAppId&&newAppId!==appId||countryCode&&countryCode!==country)&&(appChange=!0,setApp(newAppId,countryCode)),null==newAppId&&appDefer.resolve(),"undefined"!=typeof prevRoute){for(var state={};urlParamWatchers.length>0;){var w=urlParamWatchers.pop(),p=$location.search();w.dereg(),state[w.key]=p[w.key],$location.search(w.key,null)}appChange?urlParamCache={}:urlParamCache[prevRoute.originalPath]=state}})});
angular.module("applause.foundation").directive("starRatingsGraph",function($timeout,$window,$filter){return{restrict:"E",replace:!0,scope:{data:"=",getPlacement:"=",processData:"="},templateUrl:"star-ratings-graph/star-ratings-graph.html",link:function($scope,element,attrs){var options={};null!=attrs.height&&(options.height=attrs.height),null!=attrs.width&&(options.width=attrs.width),$window.onresize=function(){$scope.$apply()},$scope.$watch("data",function(newVals,oldVals){return newVals!==oldVals?$scope.render(newVals):null},!1),$scope.$watch(function(){return angular.element($window)[0].innerWidth},function(){$scope.render($scope.data)});var margin={top:20,right:40,bottom:10,left:30},svg=d3.select(element[0]).append("svg").attr("width","100%").attr("height","190px").append("g").attr("transform","translate("+margin.left+","+margin.top+")");$scope.render=function(data){if(data){null!=$scope.processData&&(data=$scope.processData(data,30)),null!=renderTimeout&&$timeout.cancel(renderTimeout);var renderTimeout=(d3.format(",.0f"),d3.time.format("%H:%M"),$timeout(function(){var width=d3.select(element[0])[0][0].offsetWidth-margin.left-margin.right,height=150,barHeight=height/data.length-20,placementIndex=-1;null!=$scope.getPlacement&&(placementIndex=$scope.getPlacement(data));var x=d3.scale.linear().domain([0,d3.max(data,function(d){return d.x})]).range([0,width]).nice(4),y=d3.scale.linear().domain([1,5]).range([height,0]),xAxis=d3.svg.axis().scale(x).orient("top").ticks(5).tickSize(height).tickFormat(d3.format("s")),yAxis=d3.svg.axis().scale(y).orient("left").ticks(5);svg.selectAll(".axis").remove(),svg.insert("g",":first-child").attr("class","x axis").attr("transform","translate(0,"+height+")").call(xAxis).selectAll("text").attr("y",20),svg.insert("g",":first-child").attr("class","y axis").call(yAxis);var chartGroup=svg.selectAll(".bar-group").data(data,function(d,i){return d.label});chartGroup.enter().append("g").attr("class","bar-group").attr("transform",function(d){return"translate(0,"+(y(d.y)-barHeight/2)+")"}).classed("active",function(d,i){return placementIndex-1==i}),chartGroup.each(function(d,i){var barGroup=d3.select(this).selectAll("rect").data([d],function(d){return d.label});barGroup.enter().append("rect").attr("class","hover-container").attr("width",width).attr("height",barHeight),barGroup.enter().append("rect").attr("x",0).attr("class","bar").attr("width",0).attr("height",barHeight)}),chartGroup.exit().remove(),chartGroup.on("mouseenter",function(){var rectDim={width:120,height:60},triDim={width:8,height:8},padding=6,tip=d3.select(this).append("g").attr("class","tip").attr("pointer-events","none");tip.append("path").attr("class","tip-container").attr("d",function(d,i){var xPos=x(d.x),yPos=barHeight/2,commands=[];return commands.push("M"+(xPos+padding)+","+yPos),commands.push("H"+(xPos+padding+triDim.width+rectDim.width)),commands.push("V"+(yPos+rectDim.height)),commands.push("H"+(xPos+padding+triDim.width)),commands.push("V"+(yPos+triDim.height)),commands.push("Z"),commands.join(" ")}),tip.append("text").attr("class","tip-count").text(function(d){return $filter("prettyNumber")(d.x)}).attr("font-family","raleway").attr("font-size","24px").attr("x",function(d){return x(d.x)+triDim.width+padding+rectDim.width/2}).attr("y",function(d){return barHeight/2+rectDim.height/2-2}).attr("fill","#fff").attr("text-anchor","middle"),tip.append("text").attr("class","tip-label").text("APPS").attr("x",function(d){return x(d.x)+triDim.width+padding+rectDim.width/2}).attr("y",function(d){return barHeight/2+.75*rectDim.height+2}).attr("fill","#fff").attr("text-anchor","middle")}).on("mouseleave",function(){d3.select(this).selectAll(".tip").remove()}),chartGroup.select(".bar").transition().duration(600).attr("width",function(d){return x(d.x)});var yLocation=barHeight/2,triSize=4,lineWidth=.25,commands=[],padding=5;commands.push("M"+(0-padding)+","+(yLocation+triSize)),commands.push("L"+(0-padding+triSize)+","+(yLocation+lineWidth/2)),commands.push("L"+width+","+(yLocation+lineWidth/2)),commands.push("L"+(width+triSize)+","+(yLocation+triSize)),commands.push("L"+(width+triSize)+","+(yLocation-triSize)),commands.push("L"+width+","+(yLocation-lineWidth/2)),commands.push("L"+(0-padding+triSize)+","+(yLocation-lineWidth/2)),commands.push("L"+(0-padding)+","+(yLocation-triSize)),commands.push("Z");var triData=commands.join(" ");svg.select(".placement-line").remove(),svg.select(".bar-group.active").append("path").attr("class","placement-line").attr("d",triData)}))}}}}});
angular.module("applause.foundation").directive("scrollHeight",function($window){return function($scope,element,attr){$scope.scrollHeight=0,angular.element($window).bind("scroll",function(){$scope.scrollHeight=this.pageYOffset,$scope.$apply()})}});
angular.module("applause.foundation").directive("textScroll",function($timeout,$interval){return function($scope,el,attr){el.on("mouseenter",function(){var diff=el[0].scrollWidth-el[0].offsetWidth;if(!(0>=diff)){var indent="-"+(diff+1)+"px";el[0].style.transition=diff/40+"s text-indent linear",el[0].style["text-indent"]=indent}}).on("mouseleave",function(){el[0].style["text-indent"]="0"})}});
angular.module("applause.foundation").directive("toolTip",function(toolTipService){return{restrict:"E",replace:!0,scope:{},templateUrl:"tool-tip/tool-tip.html",controller:function($scope){$scope.showTip=function(){toolTipService.showTip($scope.element,$scope.view,$scope.section,$scope.orientation)},$scope.hideTip=function(){toolTipService.hideTip()},$scope.showMoreThanTheTip=function(){$scope.templateUrl&&toolTipService.showTipOverlay($scope.templateUrl)}},link:function($scope,element,attrs){$scope.element=element,attrs.tip&&($scope.view=attrs.tip.split("/")[0],$scope.section=attrs.tip.split("/")[1]),attrs.templateUrl&&($scope.templateUrl=attrs.templateUrl),$scope.orientation=attrs.orientation||"top",element.on("mouseover",$scope.showTip),element.on("mouseout",$scope.hideTip),element.on("click",$scope.showMoreThanTheTip)}}});
angular.module("applause.foundation").service("toolTipService",function($compile,$rootScope,$window,$templateCache){var tpl='<div id="tool-tip-hover" class="{[{orientation}]}" ng-class="{\'active\':active}" ng-show="active">{[{content}]}<div class="arrow {[{orientation}]}"></div></div>';this.toolTipContent={dashboard:{attributes:{content:"Applause Attributes are ten directional indicators based on user review data that correlates with user satisfaction and app quality."},activityFeed:{content:"The Activity Feed is a stream of the last eight activities across your app and four related apps, including app store rating changes, review counts and version releases."},topClusters:{content:"Top Clusters highlights reviews grouped by phrase commonality, recency and frequency, which impact your app's star rating."},applauseScore:{content:"Applause Score tells you, on a scale of 0 to 100, how satisfied with your app your users are. 100 is great, 0… not so much. Your Applause Score is based on your app's Applause Attributes weighted by your app store category."}},cluster:{analysis:{content:"Clusters highlight reviews grouped by phrase commonality, recency and frequency, which are affecting your app's average star rating. Each cluster has an average star rating from one to five based on its associated reviews. This chart gives you a quick glance into the star rating distribution across clusters, which allows you to disover and monitor general cluster rating sentiment at a glance."},stream:{content:"The cluster stream is a continuous flow of reviews (both positive and negative) related to star rating."}},benchmark:{competitionBenchmark:{content:"This chart shows the difference between you and your competitors based on a relativity score which incorporates the similarity of your app store app descriptions, similar apps that users have downloaded, and app store category. The distance from your app highlights how similar the competitor's app is to you, and the size of the circle is correlated to number of reviews."},reviewSentiment:{content:"These charts highlight your percentage of positive and negative reviews over a span of 14 days in comparison to an app selected from above."},reviewSentimentpositive:{content:"Positive reviews from the app store over the last 14 days"},reviewSentimentnegative:{content:"Negative reviews from the app store over the last 14 days"},attributeStream:{content:"These charts highlight your volume of reviews per attribute over a span of 14 days in comparision to an app selected from above. "},competitorRank:{content:"This chart compares and ranks your app to four of your competitors over a span of 14 days based on app store star rating, review star rating or Applause Score."}},appEconomy:{trendingAttributes:{content:"Trending Attributes shows you which Applause Attributes occur most frequently within your selected apps economy filters."},trendingApps:{content:"Trending Apps shows you which apps are rising to the top of your selected apps economy filters."},starRating:{content:"Each bar in this chart displays the total number of apps with a particular star rating based on your apps economy filters, as displayed on the right filter bar."},releaseCadence:{content:"Each bar in this chart displays the total number of apps with N average days between releases, where N is a bucket range defined on the x-axis labels. These charts are based on your apps economy filters, as displayed on the right filter bar."},reviewCount:{content:"Each bar in this chart displays the total number of apps with N total reviews, where N is a bucket range defined on the x-axis labels. These charts are based on your apps economy filters, as displayed on the right filter bar."},applauseScore:{content:"Each bar in this chart displays the total number of apps with a particular Applause Score, as defined on the x-axis labels. These charts are based on your apps economy filters, as displayed on the right filter bar."}},stats:{statChart:{content:"This chart displays Applause Attribute ranking for a selected attribute across the life span of available data. It highlights how many reviews you have for that specific attribute, the average number of new reviews per day and the percentage change over time (whether positive or negative). The circles on the graph indicate a new version release."},attribute:{content:"Dive into the signals that are driving this attribute"},customAttrs:{content:"Custom Attributes with a score of '*' do not have data. This could be because the attribute or app was recently added to their group, or because there are insufficient reviews with this attribute's keywords."}},reviews:{reviewChart:{content:"This chart displays the number of positive (4 and 5 star ratings) and negative reviews (3 star ratings and below) for your app by attribute for any given day over a specified date range. The circles on the graph indicate a version release. By clicking the export to CSV icon, you can download your results."},reviewStream:{content:"In direct correlation to the Trending Review Sentiment chart, the Review Stream shows all reviews based on the selected filters. Reviews read as star rating, date of review, author or review, review title in bold, the review itself and the associated signals and attributes."}},compare:{compareAside:{content:"Search and select up to four apps to see how your app compares with to the competition."},compareChart:{content:"This Compare chart plots your app in comparison to up to four apps of your choice based on Applause Attribute rankings."}},international:{countryTable:{content:"Apps economy statistics for any market supported by Applause Analytics that your app currently ships in."}},aqCorner:{deckExport:{content:"This Powerpoint Export will auto-generate the power point slide deck with your app quality statistics, including comparison with your top two competitors across each iPhone, iPad, Android platform per your input. You can easily edit or directly share the slide deck report with your peers."},spreadsheetExport:{content:"This Excel Export will give you an option to receive a quick data dump of all the inputted app quality data into an Excel spreadsheet."}}},this.selectedTipScope=$rootScope.$new(!0),this.overlayTipScope=$rootScope.$new(!0);(function(){}).bind(this);this.getTip=function(view,section){return this.toolTipContent[view][section]};var setPos=function(element,tip,orientation){var rect=element[0].getBoundingClientRect(),offset={top:rect.top+$window.document.body.scrollTop,left:rect.left+$window.document.body.scrollLeft},top=0,left=0;switch(orientation){case"bottom":top=offset.top+element[0].offsetHeight+10,left=offset.left-tip[0].offsetWidth/2;break;case"left":top=offset.top-tip[0].offsetHeight-10,left=offset.left-tip[0].offsetWidth/2;break;case"right":top=offset.top-tip[0].offsetHeight-10,left=offset.left-tip[0].offsetWidth/2;break;default:top=offset.top-tip[0].offsetHeight-10,left=offset.left-tip[0].offsetWidth/2+1}tip.css({top:top+"px",left:left+"px"})},keydown=function(e){27===e.keyCode&&(this.overlayTipScope.active=!1,this.overlayTipScope.$apply())}.bind(this),click=function(e){e.target.isSameNode(this.tip[0].children[0])||(this.overlayTipScope.active=!1,this.overlayTipScope.$apply())}.bind(this);this.showTipOverlay=function(templateUrl){this.hideTip();var tip=angular.element($window.document.getElementById("tool-tip-overlay"));0===tip.length&&(tip=$compile($templateCache.get("tool-tip/tool-tip-overlay.html"))(this.overlayTipScope),angular.element($window.document.getElementById("foundationBody")).append(tip)),tip.html($compile($templateCache.get(templateUrl))(this.overlayTipScope)[0].outerHTML),this.overlayTipScope.active=!0,this.overlayTipScope.$apply(),window.addEventListener("keydown",keydown),tip[0].addEventListener("click",click),this.tip=tip},this.hideTipOverlay=function(){this.overlayTipScope.active=!1,this.overlayTipScope.$apply(),window.removeEventListener("keydown",keydown),tip.removeEventListener("click",click)},this.showTip=function(element,view,section,orientation){var tip=angular.element($window.document.getElementById("tool-tip-hover"));0===tip.length&&(tip=$compile(tpl)(this.selectedTipScope),angular.element($window.document.getElementById("foundationBody")).append(tip)),this.selectedTipScope.content=this.getTip(view,section).content,this.selectedTipScope.orientation=orientation||"top",this.selectedTipScope.active=!0,this.selectedTipScope.$apply(),setPos(element,tip,orientation)},this.hideTip=function(){this.selectedTipScope.active=!1,this.selectedTipScope.$apply()}});
angular.module("applause.foundation").directive("topClusters",function(analyticsApiService,$window,stateService){return{restrict:"E",replace:!0,scope:{topClusters:"=",eventName:"=",timeBucket:"=",activeClusterFilter:"="},controller:function($scope,$rootScope,$q,stateService){$scope.activeCluster=!1,$scope.app={appId:stateService.getAppId(),country:stateService.getCountry()},$scope.zoomCluster=function(cluster){$scope.activeCluster=cluster;var params={limit:1,country:"us",date:$scope.timeBucket};analyticsApiService.reviewsById(cluster.reviews,params).then(function(response){$scope.oneCluster=response.data.data.results})}},templateUrl:"top-clusters/top-clusters.html",link:function($scope,element,attrs){$scope.setClusterFilter=function(filterOn){$scope.activeClusterFilter=filterOn},$scope.dayString=function(day){return day>1?day+" days":1==day?day+" day":"90+ days"}}}});
angular.module("applause.foundation").service("userService",function(apiService,analyticsApiService,$q,$rootScope){function transformApiResponse(results){var o=new User;if(results.user){var u=results.user.data.data;o.name=u.first_name+" "+u.last_name,o.imgUrl=u.s3_avatar_url}if(results.theme&&(o.theme=results.theme.data.data.default_color),results.country&&(o.country=results.country.data.data.default_country),results.bookmarks){for(var key in results.bookmarks.data.data)"undefined"==typeof results.bookmarks.data.data[key].custom_attribute_ids&&(results.bookmarks.data.data[key].custom_attribute_ids=[]);o.groups=results.bookmarks.data.data}return results.alerts&&(o.alerts=results.alerts.data.data),results.attributes&&(o.attributes=results.attributes.data.data),results.pageViews&&(o.pageViews=results.pageViews.data.data.page_views),o}function broadcastUserUpdate(userObj){$rootScope.$emit(self.updateEvent,userObj)}function User(){}var self=this;self.updateEvent="APPLAUSE.USER_UPDATE",self.get=function(){var defer=$q.defer();return $q.all({user:analyticsApiService.user.detail.get(),theme:analyticsApiService.user.theme.get(),country:analyticsApiService.user.country.get(),bookmarks:analyticsApiService.user.bookmark.get(),alerts:analyticsApiService.user.alert.get(),attributes:analyticsApiService.user.attribute.get(),pageViews:analyticsApiService.user.pageview.get()}).then(function(results){defer.resolve(transformApiResponse(results))},function(){console.error("userService - ERROR: Failed to retrieve user info"),defer.reject()}),defer.promise},self.setTheme=function(theme){var defer=$q.defer();return $q.all({theme:analyticsApiService.user.theme.update(theme)}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(results.theme)},function(){console.error("userService - Failed to update theme"),broadcastUserUpdate({}),defer.reject()}),defer.promise},self.setCountry=function(countryCode){var defer=$q.defer();return $q.all({country:analyticsApiService.user.country.update(countryCode)}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(results.country)},function(){console.error("userService - Failed to update country"),broadcastUserUpdate({}),defer.reject()}),defer.promise},self.getDefaultGroup=function(){return{group_name:"",apps:[],custom_attribute_ids:[],related_apps:!1,activity_feed:!0,product_switcher:!0,competitors:!1}},self.createGroup=function(group){function fail(){broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.bookmark.create(group).then(function(r){$q.all({bookmarks:analyticsApiService.user.bookmark.get()}).then(function(res){broadcastUserUpdate(transformApiResponse(res)),defer.resolve(r)},fail)},fail),defer.promise},self.updateGroup=function(group){function fail(){broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.bookmark.update(group).then(function(r){$q.all({bookmarks:analyticsApiService.user.bookmark.get()}).then(function(res){broadcastUserUpdate(transformApiResponse(res)),defer.resolve(r)},fail)},fail),defer.promise},self.deleteGroup=function(group){function fail(){broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.bookmark["delete"](group).then(function(r){$q.all({bookmarks:analyticsApiService.user.bookmark.get()}).then(function(res){broadcastUserUpdate(transformApiResponse(res)),defer.resolve(r)},fail)},fail),defer.promise},self.setAlert=function(alert){function fail(){console.error("userService - Failed to set alert"),broadcastUserUpdate({}),defer.reject()}function success(res){$q.all({alerts:analyticsApiService.user.alert.get()}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(res)},fail)}var defer=$q.defer();return alert=angular.copy(alert),alert.active=alert.active.toString(),"undefined"!=typeof alert.id?analyticsApiService.user.alert.update(alert.id,alert).then(success,fail):analyticsApiService.user.alert.get().then(function(results){var alerts=transformApiResponse(results).alerts;for(var key in alerts){var a=alerts[key];if(a.app_id===alert.app_id&&a.country===alert.country&&a.store===alert.store&&a.type===alert.type)return void analyticsApiService.user.alert.update(a.id,alert).then(success,fail)}analyticsApiService.user.alert.create(alert).then(success,fail)},fail),defer.promise},self.addAttribute=function(attr){function fail(){console.error("userService - Failed to add attribute"),broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.attribute.create(attr).then(function(res){$q.all({attributes:analyticsApiService.user.attribute.get()}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(res)},fail)},fail),defer.promise},self.updateAttribute=function(attr){function fail(){console.error("userService - Failed to update attribute"),broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.attribute.update(attr.id,attr).then(function(res){$q.all({attributes:analyticsApiService.user.attribute.get()}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(res)},fail)},fail),defer.promise},self.removeAttribute=function(attr){function fail(){console.error("userService - Failed to remove attribute"),broadcastUserUpdate({}),defer.reject()}var defer=$q.defer();return analyticsApiService.user.attribute["delete"](attr.id).then(function(res){$q.all({attributes:analyticsApiService.user.attribute.get()}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(res)},fail)},fail),defer.promise},self.viewPage=function(page){var defer=$q.defer();return $q.all({pageViews:analyticsApiService.user.pageview.create({page:page,viewed:!0})}).then(function(results){broadcastUserUpdate(transformApiResponse(results)),defer.resolve(results.pageViews)},function(){broadcastUserUpdate({}),defer.reject()}),defer.promise},User.prototype.maxGroups=10,User.prototype.maxGroupApps=15,User.prototype.maxAttributes=10,User.prototype.getAppGroups=function(app){var a=[];for(var key in this.groups)for(var i=0;i<this.groups[key].apps.length;i++){var cApp=this.groups[key].apps[i];if(app.app_id===cApp.app_id&&app.country===cApp.country&&app.store===cApp.store){a.push(this.groups[key]);break}}return a},User.prototype.getAppAttributes=function(app){var o={},appAttributeIds=this.getAppGroups(app);return 0===appAttributeIds.length?[]:(appAttributeIds=appAttributeIds.map(function(c){return c.custom_attribute_ids}).reduce(function(a,b){return a.concat(b)}).filter(function(c){return o.hasOwnProperty(c)?!1:o[c]=!0}),appAttributeIds.map(function(c){return this.attributes[c]}.bind(this)))}});
angular.module("applause.foundation").directive("userSettings",function(offeringRouterService,$routeParams,$window,stateService,authApiService,$rootScope){return{restrict:"E",replace:!0,scope:{},templateUrl:"user-settings/user-settings.html",controller:function($scope){stateService.subscribeUser($scope,function(user){$scope.userName=user.name,$scope.userImage=user.imgUrl})},link:function($scope,element,attrs){$scope.goToView=function(){offeringRouterService.gotoView({view:"settings"})},$scope.signOut=function(){authApiService.signOut().then(function(response){if(response.data.success){var domain=window.location.host;switch(domain){case"360.applause.com":break;case"360-staging.applause.com":break;default:domain="360-dev.applause.com"}var authUrl="https://"+domain+"/auth/signin";$window.location.href=authUrl}else console.error("Signout Failed!")},function(){console.error("Signout Failed!")})}}}});
angular.module("applause.foundation").run(["$templateCache",function($templateCache){$templateCache.put("activity-feed/activity-feed.html",'<div class="activity-feed-container">\n	<h2 class="to-the-left-to-the-left">Activity Feed<tool-tip tip="dashboard/activityFeed" template-url=\'activity-feed/tool-tip.html\' orientation="bottom"></tool-tip></h2>\n	<h4>Monitor you and your competition</h4>\n	<div class="clickable feed-items" ng-repeat="activity in activitiesData | limitTo: 8" ng-click="goSomewhere(activity)">\n		<img class="app-logo" ng-attr-title="{[{activity.title}]}" ng-src="{[{activity.img_url}]}" alt="{[{activity.title}]} Icon" /> \n		<div class="activity-text" text-scroll>{[{activity.activity_text}]}</div>\n		<div class="activity-details" text-scroll>{[{activity.activity_date * 1000 | moment:\'l\'}]} · {[{activity.title}]}</div>\n	</div>\n</div>'),$templateCache.put("activity-feed/tool-tip.html",'<div class="tool-tip-content">\n	<h1>ACTIVITY FEED</h1>\n	<p>The Activity Feed is a stream of the last eight activities across your app and four related apps, including app store rating changes, review counts and version releases.</p>\n	<h1>How do I use this information?</h1>\n	<p>Keep tabs on related apps for competitive benchmarking. Make more informed decisions on what to include in your next build with insights into releases, review count changes and app store star ratings trends.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/c82l89sfm3" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("app-histogram-graph/app-histogram-graph.html",'<div class="app-histogram-graph"></div>'),$templateCache.put("app-info/app-info.html",'<div class="app-info-container">\n  <img class="app-background-logo" ng-src="{[{app.img_url_large}]}" alt="{[{app.title}]} Background Icon" />\n	<div class="cf app-stats">\n    <div class="full">\n      <div class="group-management" ng-click="openGroups($event)">\n        <a class="group-count">{[{appGroups.length || \'+\'}]}</a>\n        <div class="group-popup" ng-class="{ \'open\': groupOpen, \'disabled\': isSaving }">\n          <span class="group-label">Manage which groups this app is in</span>\n          <ul class="group-list">\n            <li class="clickable group" ng-repeat="group in groups" ng-click="toggleGroup(group)"\n                ng-class="{ \'active\': appGroups.indexOf(group) !== -1 }">\n              {[{group.group_name}]}\n            </li>\n          </ul>\n          <div class="group-create">\n            <span for="group-create-name" class="group-create-label" ng-click="showCreateGroup()">\n              Create a new group\n            </span>\n            <div class="group-create-container" ng-class="{ \'active\': showCreate, \'invalid\': invalidName }">\n              <input type="text" ng-blur="hideCreateGroup()" ng-keyup="groupNameKeyup($event)" ng-model="groupName"\n                    id="group-create-name" placeholder="{[{invalidName ? \'Chose a unique name\' : \'Name your new group\'}]}" />\n              <span for="group-create-name" class="group-create-plus" ng-mousedown="plusClick()">+</span>  \n            </div>\n          </div>\n        </div>\n      </div>\n			<!-- <i class="iconic iconic-bookmark" ng-class="{\'active\':isBookmarked}"></i>\n      <span class="bookmark-count">{[{groupCount}]}</span> -->\n    	<img class="app-logo" ng-src="{[{app.img_url}]}" alt="{[{app.title}]} Icon" height="57px" width="57px" />\n  		<div class="app-title">\n  			{[{app.title | truncate: 30}]}\n  			<i class="app-store-icon fa fa-{[{app.market === \'google\' ? \'android\': app.market}]}"></i>\n  		</div>\n  		<div class="app-category">\n  			{[{app.category_name}]}\n  		</div>\n		  <star-picker class="app-rating" star-count="app.store_rating" read-only="true"></star-picker>\n    </div>\n\n    <div class="half app-star-rating">\n			<span class="star-rating-here">{[{app.store_rating | number:2}]}</span>\n			<!-- <i class="trend-icon {[{trend.icon}]}"></i>\n			<span class="maths-here" ng-if="trend.percentage && trend.icon != \'0\'">\n				{[{trend.pointage | number:2}]} ({[{trend.percentage | number:2}]}%)\n			</span> -->\n			<span class="app-label">Star Rating</span>\n		</div>\n\n		<br />\n		<div class="half app-score">\n			<span class="app-applause-score">{[{app.applause_score | prettyNumber:\'score\'}]}</span>/100\n			<span class="app-label">\n				Applause Score\n				<tool-tip tip="dashboard/applauseScore" template-url=\'app-info/tool-tip-applause-score.html\' orientation="top"></tool-tip>\n			</span>\n		</div>\n		<br />\n		<div class="half app-last-release">\n			{[{releaseDays | prettyNumber}]} days ago\n			<span class="app-label">Last Release</span>\n		</div>\n		<br />\n		<div class="half app-reviews" ng-click="gotoReviews(app.appId, app.country)">\n			{[{app.review_count | prettyNumber}]}\n			<span class="app-label">Reviews</span>\n		</div>\n		<br />\n		<div class="half app-top-attributes" ng-click="gotoStats(topAttr[0])">\n			<span ng-if="topAttr != null">{[{ topAttr[0] | titleCase }]}, {[{ topAttr[1] | titleCase }]}</span>\n			<span class="app-label" ng-if="topAttr != null">Top Attributes</span>\n		</div>\n		<br />\n		<div class="half app-reviewed-countries">\n			<span class="flag-icon flag-icon-{[{country}]}" ng-repeat="country in reviewedCountries" ng-click="gotoDash(app.appId, country)" ng-attr-title="{[{app.title}]} on {[{app.store|titleCase}]} store in {[{countries[country].displayName}]}"></span>\n			<span class="app-label">Reviewed in these countries</span>\n		</div>\n		<br />\n		<div class="full app-related-apps">\n      		<img ng-repeat="app in relatedApps | limitTo:4" ng-attr-title="{[{app.details.title}]}" ng-src="{[{app.details.img_url}]}" alt="{[{app.details.title}]} Icon" class="app-related-app-icon" ng-click="gotoDash(app.appId, app.details.country)">\n			<span class="app-label">Related Apps</span>\n		</div>\n	</div>\n</div>\n'),$templateCache.put("app-info/tool-tip-applause-score.html",'<div class="tool-tip-content">\n	<h1>APPLAUSE SCORE</h1>\n	<p>Applause Score tells you, on a scale of 0 to 100, how satisfied with your app your users are. 100 is great, 0…not so much. Your Applause Score is based on your app\'s Applause Attributes weighted by your app store category.</p>\n	<h1>How do I use this?</h1>\n	<p>You can sort by clicking \'All\' to see all grouped reviews, thumbs down to see negative clusters, and thumbs up to see positive clusters over the specified date range. Adjusting the date range from the drop down menu will recalculate your top clusters.</p>\n	<p>You can click on a top cluster to see the associated reviews and learn which attributes of your app are being affected. By clicking the export to CSV icon, you can download your results.</p>\n	<h1>How do I use this information?</h1>\n	<p>Top Clusters unearth user stories that may be hidden in a mountain of review data. By parsing through this data, your top clusters help you connect directly to your user\'s wants, needs, and issues. </p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/dt0fk7f2a5" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("app-search/app-search.html",'<div class="app-search">\n  <input type="search" ng-focus="searchHasFocus = true" ng-blur="searchHasFocus = false" ng-model="q"\n        ng-keydown="searchKeyUp($event)" placeholder="{[{placeholder}]}" id="app-search-box" />\n  <dropdown options="countries" selected="activeCountry"></dropdown>\n  <label for="app-search-box"><i class="iconic iconic-magnifying-glass"></i></label>\n  <ul class="app-search-suggestions" ng-show="searchHasFocus">\n    <li ng-repeat="app in appSuggestions" ng-mousedown="appClick(app)"\n          ng-class="{ \'active\': appSuggestionSelection === $index }">\n      <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} Icon" class="app-icon {[{app.store}]}" />\n      <span class="app-title">{[{app.title}]}</span>\n      <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n    </li>\n  </ul>\n</div>'),$templateCache.put("app-ratings-sentiment/app-ratings-sentiment.html",'<div class="app-ratings-sentiment">\n	<div class="header">\n		<div class="title">\n			<span class="{[{sentiment}]}">{[{sentiment | titleCase}]} Reviews</span><span class="sentiment-label"> From App Store<tool-tip tip="benchmark/reviewSentiment{[{sentiment}]}" template-url="benchmark-view/tool-tip-review-sentiment.html"></tool-tip></span>\n		</div>\n		<div class="ratings">\n\n			<div class="competitor-percent-breakdown" ng-show="data.competitor.percent">\n				<div class="percent"><span class="{[{overallClass}]}">{[{data.competitor.percent}]}</span><span class="percent-sign">&#37;</span></div>\n				<div class="competitor app-title"><i class="fa fa-circle"></i>{[{data.competitor.details.title | truncate:12}]}</div>\n			</div>\n\n			<div class="self-percent-breakdown" ng-show="!data.competitor.percent">\n				<span class="no-data">No data available.</span>\n				<div class="competitor app-title"><i class="fa fa-circle"></i>{[{data.competitor.details.title | truncate:12}]}</div>\n			</div>\n\n			<div class="self-percent-breakdown" ng-show="data.self.percent">\n				<div class="percent"><span class="{[{overallClass}]}">{[{data.self.percent}]}</span><span class="percent-sign">&#37;</span></div>\n				<div class="self app-title"><i class="fa fa-circle"></i>{[{data.self.details.title | truncate:12}]}</div>\n			</div>\n			<div class="self-percent-breakdown" ng-show="!data.self.percent">\n				<span class="no-data">No data available.</span>\n				<div class="self app-title"><i class="fa fa-circle"></i>{[{data.self.details.title | truncate:12}]}</div>\n			</div>\n		</div>	\n	</div>\n\n	<review-volume-graph data=\'data.data\'></review-volume-graph>\n\n</div>\n'),$templateCache.put("applause-sidebar/applause-sidebar.html",'<div class="applause-chrome">\n  <aside class="applause-sidebar" ng-class="{\'no-app\':!appId}">\n    <div class="applause-sidebar-header" ng-class="{\'bookmarks-active\': !appId||bookmarksActive}">\n      <!-- LOGO -->\n      <img src="/analyticsv3/static/images/applause-logo-white.svg" alt="Applause Logo" class="sidebar-logo" ng-click="gotoWelcome()">\n\n      <div class="bookmark-toggle-content" ng-click="bookmarksActive = !bookmarksActive">\n        <!-- ACTIVE APP -->\n        <div class="sidebar-app" ng-class="{ \'active\': bookmarksActive }">\n          <div class="app-icon">\n            <img ng-src="{[{currentApp.img_url}]}" ng-show="currentApp.img_url" alt="Current App Icon" />\n            <i class="fa fa-{[{currentApp.store === \'google\' ? \'android\' : currentApp.store}]} app-store-icon"></i>\n          </div>\n          <span class="app-title" text-scroll>\n            {[{currentApp.title}]}\n            <span class="title-data">\n              <span class="meta">&middot;</span>\n              <span class="flag-icon flag-icon-{[{currentApp.country}]}"></span>\n            </span>\n          </span>\n          <span class="app-company">\n            {[{currentApp.publisher}]}\n          </span>\n        </div>\n      </div>\n    </div>\n    \n    <!-- USER SETTINGS -->\n    <!-- user-settings placed before offering-nav in HTML so we can use adjacent sibling selector when user-settings has active class -TedA -->\n    <user-settings></user-settings>\n    <bookmark-bar current-app="currentApp" active="bookmarksActive"></bookmark-bar>\n    <!-- OFFERING NAV -->\n    <offering-nav ng-if="currentApp"></offering-nav>\n  </aside>\n  <!-- SEARCH -->\n  <div class="offering-search" ng-class="{ \'active\': searchActive, \'no-app\': !appId }">\n    <div class="search-backdrop"></div>\n    <div class="search-results" search-results ng-click="hideSearch(false)">\n      <ul class="app-list">\n        <li ng-repeat="app in searchResults" class="app" ng-click="setApp(app)" title="{[{app.title}]}">\n          <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} app icon" class="app-icon" />\n          <div class="app-left">\n            <span class="app-title">\n              {[{app.title}]}\n              &nbsp;\n              <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n            </span>\n            <span class="app-category">{[{app.category_name}]}</span>\n            <star-picker class="app-rating" star-count="app.store_rating" read-only="true"></star-picker>\n          </div>\n          <div class="app-star-rating">\n            <span class="app-data">{[{app.review_count | prettyNumber}]}</span>\n            <span class="app-data-label">Review Count</span>\n          </div>\n          <div class="app-score">\n            <span class="app-data">{[{app.applause_score | prettyNumber:\'score\'}]} / 100</span>\n            <span class="app-data-label">Applause Score</span>\n          </div>\n        </li>\n      </ul>\n      <div class="section-header" ng-if="!searchLoading && searchResults.length === 0 && searchQuery">\n        <h1>We couldn\'t find that</h1>\n        <span class="subtitle">\n          Please try another search\n        </span>\n      </div>\n      <div class="loading-ring" ng-if="searchLoading"><div></div></div>\n    </div>\n    <div class="sidebar-search" ng-class="{\'bookmarks-active\': bookmarksActive&&currentApp, \'no-app\':!appId}">\n      <input type="search" placeholder="Search Analytics" class="sidebar-search-box"\n            ng-keydown="searchKeyDown($event)" ng-focus="showSearch()" ng-model="searchQuery" />\n      <i class="iconic iconic-md iconic-magnifying-glass"></i>\n    </div>\n    <aside class="filter-aside search-aside">\n      <ul class="filter-list filter-radio-list">\n        <li ng-repeat="country in countryOrder" ng-click="setCountry(country)"\n              ng-class="{ \'active\': activeCountry === country }">\n          {[{countries[country].displayName}]}\n        </li>\n      </ul>\n    </aside>\n  </div>\n</div>'),$templateCache.put("attribute-card/attribute-card.html",'<div class="attribute-card-container">\n  <h2>Applause Attributes <tool-tip tip="dashboard/attributes" template-url="attribute-card/tool-tip.html"></tool-tip></h2>\n  <h4>High-level quality and user sentiment trends that drive app success</h4>\n  <div class="attr-card-titles-container cf">\n    <div class="context-app-title"><i class="category-dot fa fa-circle"></i>{[{app.title | truncate: 20}]}</div>\n    <div class="economy-title" ng-if="app"><i class="category-dot fa fa-circle-o"></i>{[{app.category_name}]} Mean</div>\n    <dropdown options="attributeSorterOptions" selected="sortAttributes"></dropdown>\n  </div>\n  <div class="no-attribute-data" ng-if="app.applause_score < 0">\n    Not enough data to generate attribute scores.\n  </div>\n\n  <div id="attributes" ng-if="app.applause_score > -1">\n    <attribute-weight-chart class="attribute-card {[{attr.type}]}-attribute"\n          ng-repeat="attr in appAttributes" ng-attr-title="Go To Attribute Stats for {[{attr.attribute | titleCase}]}"\n          ng-click="gotoStats(attr.attribute)"\n          attribute="attr" app="app" attribute-hover-map="attributeHoverMap">\n    </attribute-weight-chart>\n  </div>\n</div>'),$templateCache.put("attribute-card/tool-tip.html",'<div class="tool-tip-content">\n<h1>APPLAUSE ATTRIBUTES</h1>\n<p>Applause Attributes are ten directional indicators based on user review data that correlates with user satisfaction and app quality.</p>\n<h1>How do I use this?</h1>\n<p>Hover or click on an Applause Attribute to view the attribute\'s description and where you stack up compared to other apps in your app store category.</p>\n<h1>How do I use this information?</h1>\n<p>Gain immediate insight into what\'s working and what\'s not across the ten key attributes. These attributes inform you on what your users love, what they hate and what they want to see next. When you fall below your app store category mean, take a look at the competition to see what others are doing well.</p>\n<h1>See it in action</h1>\n<iframe src="//fast.wistia.net/embed/iframe/10o2oqhvt2" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("attribute-stream-graph/attribute-stream-graph.html",'<div class="attribute-stream-graph">\n	<div class="attribute-stream-graph-chart"></div>\n	<aside class="attribute-info">\n		<div class="self app">\n			<div class="app-details">\n				<div class="app-title"><i class="fa fa-circle"></i>{[{self.title}]}</div>\n				Signal Hits\n				<div class="review-count">\n					<span ng-if="selfHoverAttrCount != null" class="count">{[{selfHoverAttrCount | prettyNumber}]}</span>\n					<span ng-if="selfHoverAttrCount == null" class="count">{[{data.selfSignalHitCount | prettyNumber}]}</span>\n				</div>\n				\n			</div>\n		</div>\n		<div class="attribute-stats">\n			<div class="attribute">{[{hoverAttr}]}</div>\n			<div class="date">{[{hoverAttrDate | moment: \'MMM D, YYYY\'}]}</div>\n		</div>\n		<div class="competitor app">\n			<div class="app-details">\n				<div class="app-title"><i class="fa fa-circle"></i>{[{competitor.title}]}</div>\n				Signal Hits\n				<div class="review-count">\n					<span ng-if="competitorHoverAttrCount != null" class="count">{[{competitorHoverAttrCount | prettyNumber}]}</span>\n					<span ng-if="competitorHoverAttrCount == null" class="count">{[{data.competitorSignalHitCount | prettyNumber}]}</span>\n				</div>\n			</div>\n		</div>\n	</aside>\n</div>'),$templateCache.put("attribute-filter/attribute-filter.html",'<div class="review-filter filter-control attribute-select" toggle-slide=\'slide-toggle\'>\n	<i class="fa fa-tasks"></i> Attributes\n	\n	<div class="slide-toggle">\n		<ul class="check" ng-class="{\'attributes-selected\':attributesSelected}">\n			<li ng-click="checkAttribute(attr)" ng-class="{\'selected\':checked}" ng-repeat="(attr, checked) in attributeList">\n				{[{attr}]} <i class="pull-right fa" ng-class="{\'fa-square-o\':!checked,\'fa-check-square-o\':checked}"></i>\n			</li>\n		</ul>\n	</div>\n</div>'),$templateCache.put("attribute-weight-chart/attribute-weight-chart.html",'<div class="attribute-weight-chart-container" ng-mouseover="hoverIn()" ng-mouseleave="hoverOut()">\n  <div class="attribute-title"\n    data-placement="left" \n    data-type="info" \n    data-animation="am-fade-and-scale"\n    data-trigger="manual"\n    bs-tooltip="attrTip" \n    data-bs-show="showTooltip">\n    {[{attribute.attribute | titleCase}]}\n  </div>\n  <div class="category-delta">\n    {[{attribute.score - attribute.category_avg | addPlus: attribute.score}]}\n  </div>\n  <div class="bar">\n    <div class="app-bar" ng-style="{\'width\':attribute.score+\'%\'}"></div>\n    <i class="category-dot fa fa-circle-o" \n        ng-if="attribute.category_avg > -1"\n        data-placement="top" \n        data-type="info" \n        data-animation="am-fade-and-scale" \n        bs-tooltip="categoryTip" \n        data-trigger="manual"\n        data-bs-show="showTooltip"\n        ng-style="{\'left\':attribute.category_avg+\'%\'}"></i>\n    <i class="app-bar-dot fa fa-circle" \n        ng-if="attribute.score > -1"\n        data-placement="bottom" \n        data-type="info" \n        data-animation="am-fade-and-scale" \n        data-trigger="manual"\n        bs-tooltip="appTip" \n        data-bs-show="showTooltip"\n        ng-style="{\'display\':attribute.score == -1 ? \'none\' : \'initial\' , \'left\':attribute.score !== -1 ? attribute.score +\'%\' : \'0\' , \'margin-left\':attribute.score > 3 ? \'-3px\' : \'0\'}"></i>\n  </div>\n</div>'),$templateCache.put("bookmark-bar/bookmark-bar.html",'<div class="bookmark-bar" ng-class="{\'active\':active}">\n	<div class="bookmark-scroll">\n    <div class="bookmark-filter-container">\n      <input class="bookmark-filter" type="search" placeholder="Filter your bookmarks" ng-model="q" />\n      <i class="iconic iconic-md iconic-funnel"></i>\n    </div>\n    <button class="bookmark-settings" ng-click="gotoSettings()">\n      <i class="iconic iconic-cogs"></i>\n    </button>\n    <section class="group" ng-repeat="group in groups" ng-hide="filter(group.apps).length === 0"\n          bs-collapse data-start-collapsed="true">\n      <a class="clickable group-name" bs-collapse-toggle ng-class="{ out: toggles[$index] || q }"\n          ng-click="toggles[$index] = !toggles[$index]">\n        {[{group.group_name}]}\n        <i class="iconic iconic-caret-left"></i>\n      </a>\n      <ul class="app-list" bs-collapse-target ng-class="{ \'open\': q }">\n        <li ng-repeat="app in filter(group.apps)" ng-click="gotoApp(app)">\n          <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} App Icon" class="app-icon" />\n          <span class="app-title" text-scroll>\n            {[{app.title}]}\n            <span class="app-data">\n              <span class="meta">&middot;</span>\n              <span class="flag-icon flag-icon-{[{app.country}]}"></span>\n              <span class="meta">&middot;</span>\n              <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n            </span>\n          </span>\n          <br />\n          <span class="app-company" text-scroll>\n            {[{app.publisher}]}\n          </span>\n        </li>\n      </ul>\n    </section>\n  </div>\n</div>'),$templateCache.put("chart-arc/chart-arc.html",'<figure class="chart-arc">\n	<chart-base-responsive margins="margins" config="chartConfig" render="render"></chart-base-responsive>\n</figure>'),$templateCache.put("chart-export-service/chart-export-modal.html",'<div class="chart-export-modal" ng-click="remove()">\n  <h2>Exported Chart Versions</h2>\n  <h4>Right click a chart below to save it to disk</h4>\n  <img ng-repeat="img in images track by $index" src="{[{img}]}" alt="Chart" ng-click="$event.stopPropagation();">\n</div>\n'),$templateCache.put("cluster-detail/cluster-detail.html",'<div class="cluster-content cluster-detail">\n	<div class="header-wrapper">\n		<h5 class="cluster-detail-back-button" ng-click="clearCluster()"><i class="iconic iconic-chevron-left"></i>Back to Top Clusters</h5>\n	</div>\n	<div class="content-wrapper">\n		<h2 class="cluster-detail-title">Cluster Details &deg;</h2>	\n	   	<div class="loading-reviews-spinner" spin="spinConfigReviews" spin-if="loading(\'reviews\',appId)"></div>\n		<div class="reviews" ng-hide="loading(\'reviews\', appId)">\n			<div class="review" ng-repeat="review in oneCluster	 | orderBy:sortReviews:sortDir==\'desc\' track by $index">\n				<h6 class="review-title" safe-html="review.title | sanitizeReviewStream | highlightText:activeCluster.most_freq">\n				</h6>\n				<div class="review-date-time">\n					<span class="review-author">{[{review.user_name}]} - </span> \n				 	<span class="review-date">\n				    	<span class="time">{[{review.date | moment:"l"}]}</span>\n				   	</span>\n			   	</div>\n				<span class="review-rating" safe-html="review.rating | starIcon"></span>\n				<p class="review-text" safe-html="review.text | sanitizeReviewStream | highlightText:activeCluster.most_freq"></p>\n				<div class="signals" ng-hide="review.signal_hits.length < 1">\n					<i class="fa fa-signal"></i> Signals: \n					<span class="signal" ng-repeat="signal in review.signal_hits">{[{signal | titleCase}]}</span>\n				</div>\n				<div class="attributes" ng-hide="review.attribute_hits.length < 1">\n					<i class="fa fa-tasks"></i> Attributes: \n					<span class="attribute" ng-repeat="attribute in review.attribute_hits">{[{attribute | titleCase}]}</span>\n				</div> \n			</div>\n		</div>\n	</div>\n</div>'),$templateCache.put("cluster-filters/cluster-filters.html",'<div class="cluster-filters section-header">\n	<div class="section-header">\n		<h2>Filter</h2>\n		<h4>Adjust this page by filtering</h4>\n	</div>\n	<section class="search-filter" ng-show="query !== undefined">\n		<input class="cluster-filter search-filter" type="search" placeholder="Search clusters" ng-model="query" />\n		<i class="iconic iconic-md iconic-magnifying-glass"></i>\n	</section>\n	<div class="page-filters">\n		<div class="btn-group block">\n			<div class="btn btn-positive" ng-class="{active:activeClusterFilter==\'positive\'}" ng-click="setClusterFilter(\'positive\')">\n				<i class="fa fa-thumbs-up"></i>\n			</div>\n			<div class="btn btn-negative" ng-class="{active:activeClusterFilter==\'negative\'}" ng-click="setClusterFilter(\'negative\')">\n				<i class="fa fa-thumbs-down"></i>\n			</div>\n			<div class="btn btn-all" ng-class="{active:activeClusterFilter==\'all\'}" ng-click="setClusterFilter(\'all\')">All</div>\n		</div>\n		<dropdown options=\'timeBucketOptions\' selected=\'timeBucket\'></dropdown>\n\n		<div class="btn-export-csv" ng-click="clusterCsvUrl(app)">\n			<i class="fa fa-file-text-o"></i> Export CSV\n		</div>\n	</div>\n</div>'),$templateCache.put("cluster-stream/cluster-stream.html",'<section class="cluster-stream">\n	<h2>Cluster Stream<tool-tip tip="cluster/stream" template-url="cluster-stream/tool-tip.html"></tool-tip></h2>\n	<h4>View specific clusters for your app</h4>\n	<div class="cluster-stack">\n		<div class="stream" ng-if="!loadingClusters">\n			<article ng-repeat="cluster in clusters" \n				ng-hide="starFilter && starFilter != cluster.rating" \n				class="cluster-card cluster {[{cluster.type}]}-cluster issue issue-{[{cluster.clusterKey}]}"\n        ng-click="zoomCluster(cluster)">\n        		<i class="sentiment-icon fa" ng-class="sentimentIcon(cluster)"></i>\n				<div class="issue-content">\n					<div class="issue-snippet"\n						safe-html="exampleReview(cluster).snippet | truncate: 140 | sanitizeReviewStream | highlightText:cluster.most_freq">\n					</div>\n				</div>\n				<div class="issue-footer">\n					<i class="fa fa-comment"></i>\n					{[{cluster.num_reviews}]}\n					&nbsp;&#149;&nbsp;\n					<i class="fa fa-calendar"></i>\n					{[{cluster.first_review.date | moment:\'l\'}]} -\n					{[{cluster.last_review.date | moment:\'l\'}]}\n					&nbsp;&#149;&nbsp;\n					<i class="fa fa-star"></i>\n					{[{cluster.avg_rating | starRound}]}\n				</div>\n				<div class="frequent-terms" ng-hide="cluster.most_freq.length < 1">\n					Frequent terms: \n					<span class="frequent-term" ng-repeat="term in cluster.most_freq | limitTo: 5">{[{cluster.term_map[term[0]][0]}]} ({[{term[1]}]})</span>\n				</div>\n			</article>\n		</div>\n	</div>\n	<cluster-detail ng-class="{ \'out\': !activeCluster }"></cluster-detail>\n</section>'),$templateCache.put("cluster-stream/tool-tip.html",'<div class="tool-tip-content">\n	<h1>CLUSTER STREAM</h1>\n	<p>The cluster stream is a continuous flow of reviews (both positive and negative) related to star rating.</p>\n	<h1>How do I use this?</h1>\n	<p>Click on any cluster to dive into the reviews, signals and attributes associated with it.</p>\n	<h1>How do I use this information?</h1>\n	<p>Clusters unearth user stories that may be hidden in a mountain of review data. By parsing through this data, your top clusters help you connect directly to your users\' wants, needs and issues that otherwise may have been missed.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/o3moccns0l" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("cluster-stats/cluster-stats.html",'<div class="cluster-stats-container">	\n	<h4>Cluster Stats &deg;</h4>\n	<div class="hide-app-stats" ng-if="false">\n		<div class="app-stats" ng-if="appRatings!=null || false">\n			<div class="applause-score">\n				Applause Score:\n				{[{app.details.applause_score}]}\n			</div>\n			<div class="avg-review-rating">\n				<div class="rating-row">\n					<div class="avg-rating-value avg-rating-count">{[{appRatings.avg_ratings}]}</div>\n					Average review rating \n				</div>\n				<div class="rating-row">\n					<div class="avg-rating-value">{[{appRatings.num_ratings | prettyNumber}]}</div>\n					Total ratings\n				</div>\n				<div class="rating-row">\n					<div class="avg-rating-value">{[{clusterCount > -1 ? clusterCount : \'Loading...\'}]}</div>\n					Total clusters\n				</div>\n\n			</div>\n			\n		</div>\n	</div>\n	<div class="cluster-stats" ng-cloak>\n		<div class="avg-rating" ng-if="false">\n			<span class="rating">{[{data.avg_star_rating | number:1}]}</span>\n			Average Cluster Rating\n		</div>\n		<div class="avg-rating" ng-if="data.total_clusters != null">\n			<span class="rating">{[{data.total_clusters | prettyNumber}]}</span>\n			Total Clusters\n		</div>\n		<div class="avg-rating" ng-if="data.total_clusters == null">\n			<span class="rating"></span>\n			Loading Clusters\n		</div>\n		<donut-chart id="cluster-stats-donut" cluster-stats="data"></donut-chart>\n		<div class="cluster-avg-breakdown">\n			<div class="clearfix cluster-legend avg-{[{avg}]}" ng-repeat="avg in [5,4,3,2,1]" ng-hide="!data.cluster_breakdown[avg]">\n				<span class="cluster-legend-count">{[{data.cluster_breakdown[avg]}]}</span>\n				<star-picker star-count="avg" read-only="true"></star-picker>\n				<div class="avg-legend star-{[{avg}]} pull-right"></div>\n			</div>\n		</div>\n	</div>\n</div>'),$templateCache.put("competitor-rank-graph/competitor-rank-graph.html",'<div class="competitor-rank-graph">\n	<div class="rank-lines"></div>\n	<table class="app-rankings-table">\n		<tr class="app" ng-repeat="app in data.data">\n			<td class="app-start" ng-repeat="day in app track by $index">\n				<div class="app-details" ng-if="$index == 0">\n					<img src="{[{day.img_url}]}" 	\n							data-app-id="{[{day.app_id + \':\' + day.country}]}"\n							class="app"\n							ng-attr-title="{[{day.title}]} had a {[{metricLabel}]} of {[{data.apps[(day.app_id)+\':\'+(day.country)].values[$index]|starRound}]} on this day."\n							ng-click="activateApp(day.app_id + \':\' + day.country)">\n					<div class="app-text">\n						<div class="app-title" text-scroll>\n              {[{day.title}]}\n              <span class="app-data">\n                <span class="meta">&middot;</span>\n                <span class="flag-icon flag-icon-{[{day.country}]}"></span>\n                <span class="meta">&middot;</span>\n                <i class="fa fa-{[{day.store === \'google\' ? \'android\' : day.store}]} app-store-icon"></i>\n              </span>\n            </div>\n						<div class="app-publisher">{[{day.publisher}]}</div>\n						</div>\n				</div>\n				<span class="app-circle"\n						ng-attr-title="{[{day.title}]} had a {[{metricLabel}]} of {[{data.apps[(day.app_id)+\':\'+(day.country)].values[$index]|starRound}]} on this day."\n						data-app-id="{[{day.app_id + \':\' + day.country}]}"\n						ng-if="$index != 0 && $index != app.length-1"\n						ng-click="activateApp(day.app_id + \':\' + day.country)"></span>\n				<img src="{[{day.img_url}]}"\n						class="app"\n						ng-attr-title="{[{day.title}]} had a {[{metricLabel}]} of {[{data.apps[(day.app_id)+\':\'+(day.country)].values[$index]|starRound}]} on this day."\n						data-app-id="{[{day.app_id + \':\' + day.country}]}"\n						ng-if="$index == app.length-1"\n						ng-click="activateApp(day.app_id + \':\' + day.country)">\n			</td>\n		</tr>\n		<tr class="axis axis-x">\n			<td class="axis-text" ng-repeat="day in data.dates track by $index">\n				<span ng-if="!($index % 2)">{[{day | moment:\'MMM D\'}]}</span>\n			</td>\n		</tr>\n	</table>\n</div>'),
$templateCache.put("country-picker/country-picker.html",'<div class="country-picker">\n  <div class="country-picker-control">\n    <!-- <h2 class="country-picker-label">Country Preference</h2> -->\n    <div class="country-picker-drop" ng-class="{ \'active\': isDropActive }" ng-click="toggleDrop($event)">\n      {[{countries[activeCountry].displayName}]}\n      <span class="caret-container">\n        <i class="iconic iconic-caret-bottom"></i>\n      </span>\n      <ul class="country-picker-drop-drop">\n        <li ng-repeat="country in countries" ng-show="country.code != activeCountry" ng-click="selectCountry(country)">\n          {[{country.displayName}]}\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>'),$templateCache.put("date-filter/date-filter.html",'<div class="review-filter filter-control date-select" toggle-slide="slide-toggle">\n	<i class="fa fa-calendar"></i> Date\n	<div class="slide-toggle">\n		<ul class="radio">\n			<li ng-click="unselectDateRange()"  ng-class="{\'selected\':showAllDates}">\n				Show all dates <i class="pull-right fa"  ng-class="{\'fa-circle-o\':!showAllDates,\'fa-dot-circle-o\':showAllDates}"></i>\n			</li>\n			<li ng-click="selectDateRange()"  ng-class="{\'selected\':!showAllDates}">\n				Show date range (up to 90 days) <i class="pull-right fa" ng-class="{\'fa-circle-o\':showAllDates,\'fa-dot-circle-o\':!showAllDates}"></i>\n				<div class="date-inputs">\n					<div class="review-datepicker-start control-group input-prepend">\n						<i class="add-on fa fa-calendar"></i>\n						<input type="text" ng-model="reviewRange.start" force-parse=\'false\' bs-datepicker>\n					</div>\n					to\n					<div class="control-group input-prepend" style="position:absolute;right:5px;">\n						<i class="add-on fa fa-calendar"></i>\n						<input type="text" ng-model="reviewRange.end"  bs-datepicker>\n					</div>\n				</div>\n			</li>\n		</ul>\n	</div>\n</div>'),$templateCache.put("date-picker/date-picker.html",'<div class="date-picker-wrapper">\n	<input type="text" class="date-picker" data-autoclose="true" ng-model="modelDate" data-date-format="MM-dd-yyyy"\n				icon-left="iconic iconic-chevron-left" icon-right="iconic iconic-chevron-right"\n				readonly="true" bs-datepicker ng-attr-data-min-date="{[{minDate}]}"\n				ng-attr-data-max-date="{[{maxDate}]}" data-autoclose="true" />\n	<span ng-click="focus()" class="iconic iconic-calendar"></span>\n</div>'),$templateCache.put("date-range-picker/date-range-picker.html",'<div class="date-range-picker">\n	<date-picker model="since" max="until"></date-picker>\n	<span class="date-picker-sep">TO</span>\n	<date-picker model="until" min="since"></date-picker>\n</div>'),$templateCache.put("dropdown/dropdown.html",'<div class="dropdown">\n  <div class="dropdown-content-pane" ng-class="{ \'active\': isDropActive }" ng-click="toggleDrop($event)">\n    <span class="dropdown-label">{[{label}]}</span>\n    <i class="iconic iconic-caret-bottom"></i>\n    <ul class="dropdown-items">\n      <li ng-repeat="option in options" ng-hide="option.value === selected" ng-click="select(option)">\n        {[{option.name}]}\n      </li>\n    </ul>\n  </div>\n</div>'),$templateCache.put("feedback/feedback.html",'<div class="feedback">\n	<div class="overlay" ng-show="active" ng-click="resetForm()">\n	</div>\n	<ul class="menu" ng-class="{\'active\':active}">\n		<li ng-click="toggleFeedback()"><i class="iconic iconic-comment-square"></i> Feedback</li>\n	</ul>\n	\n	<div class="content" ng-class="{\'active\':active}">\n		<div ng-if="loading" class="loading">\n		  <div class="center-content">\n		    <div class="loading-ring light"><div></div></div>\n		  </div>\n		</div>\n		<div ng-show="!loading && !error && !success" class="feedback-form">\n			<h1>How are we doing?</h1>\n			<p>Please let us know what you love or what improvements you\'d like to see. We\'d love to hear from you!</p>\n			<ul class="rate-us">\n				<li ng-click="thumbsUp()"><i class="fa fa-thumbs-up" ng-class="{\'active\':sentiment == \'positive\'}"></i></li>\n				<li ng-click="thumbsDown()"><i class="fa fa-thumbs-down" ng-class="{\'active\':sentiment == \'negative\'}"></i></li>\n			</ul>\n			<form action="" ng-submit="sendFeedback()">\n				<textarea name="feedback-notes" ng-model="notes"></textarea>\n				<a class="submit btn" value="Submit" ng-click="sendFeedback()">Submit</a>\n			</form>\n		</div>\n		<div class="feedback-error" ng-show="error">\n			<h1>Uh-oh!</h1>\n			<p>It looks like we weren\'t able to process your feedback entry. Please email <a href="mailto:support@applause.com">support@applause.com</a> for assistance.</p>\n			<a class="btn" ng-click="resetForm()">Close</a>\n		</div>\n		<div class="feedback-success" ng-show="success">\n			<h1>Thanks!</h1>\n			<p>We appreciate you taking the time to let us know how we\'re doing. Someone will review your feedback shortly.</p>\n			<a class="btn" ng-click="resetForm()">Close</a>\n		</div>\n	</div>\n\n</div>'),$templateCache.put("key-word-widget/key-word-widget.html",'<div class="cf key-word-widget" ng-click="editWord()">\n  <span class="placeholder" ng-if="keyWords.length === 0 && !showInput">Enter some keywords</span>\n  <span class="keyword" ng-repeat="keyWord in keyWords" ng-click="$event.stopPropagation();">\n    {[{keyWord}]}\n    <i class="iconic iconic-circle-x keyword-remove" ng-click="removeWord($index); $event.stopPropagation();"></i>\n  </span>\n  <input type="text" class="keyword new-keyword-input" ng-style="{ \'width\': inputWidth + \'px\' }" ng-model="newWordText"\n        ng-keydown="onType($event)" ng-blur="addWord(); showInput = false;" ng-show="showInput" />\n  <span class="keyword new-keyword-input-width" style="visibility: hidden;">{[{newWordText}]}W</span>\n</div>'),$templateCache.put("notification-service/notification-area.html",'<aside class="notification-area" ng-mouseenter="pause()" ng-mouseleave="reset()" ng-class="{ \'empty\': notifications.length === 0 }">\n  <ul>\n    <li ng-repeat="noti in notifications" class="notification" ng-class="noti.classes">\n      <h3 class="notification-title">{[{noti.title}]}</h1>\n      <p class="notification-msg">{[{noti.msg}]}</p>\n      <a class="notification-close" ng-click="noti.remove()"><i class="iconic iconic-x"></i></a>\n    </li>\n  </ul>\n</aside>\n'),$templateCache.put("offering-header/offering-header.html",'<div id="offering-header">\n  <div id="offering-header-left">\n    <div class="app-picker">\n      <img ng-src="{[{currentApp.img_url}]}" ng-show="currentApp.img_url" alt="Current App Icon" class="app-icon"/>\n      <span class="app-title" scroll-height ng-class="{ \'out\': scrollHeight >= 15 }">\n        {[{currentApp.title}]}\n        <i class="fa fa-{[{currentApp.store === \'google\' ? \'android\': currentApp.store}]} app-store-icon"></i>\n        <span class="app-meta" ng-show="currentApp.category_name && currentApp.scores[\'^^all^^\']">\n          {[{currentApp.category_name}]} | Applause Score: {[{currentApp.scores[\'^^all^^\'] | prettyNumber:\'score\'}]}/100\n        </span>\n      </span>\n    </div>\n  </div>\n  <div id="offering-header-right">\n    <section class="offering-search out" scroll-height ng-class="{ \'out\': scrollHeight <= 15 || searchHasFocus }">\n      <app-search placeholder="\'Search Apps\'" search-has-focus="searchHasFocus" app-action="setApp"\n            app-suggestion-count="appSuggestionsCount" filtered-apps="filteredApps"></app-search>\n    </section>\n  </div>\n</div>'),$templateCache.put("offering-nav/offering-nav.html",'<nav class="offering-nav">\n  <div class="offering-nav-scroll">\n  	<ul>\n  		<li ng-repeat="route in offeringRoutes"\n  					ng-class="{ active: isActive(route), \'sub-active\': route.subActive }">\n        <a ng-click="followRoute(route, $index)">\n          <span>{[{route.displayName}]}</span>\n          <i class="iconic iconic-caret-left" ng-if="route.subNav"></i>\n          <i class="onboarding-notification" ng-if="!route.subNav && !pageViews[route.target] && !route.noOnboard"></i>\n        </a>\n        <ul ng-if="route.subNav">\n          <li ng-repeat="subRoute in route.subNav" ng-class="{ active: isActive(subRoute) }">\n            <a ng-click="followRoute(subRoute)">\n              <span>{[{subRoute.displayName}]}</span>\n              <i ng-if="!pageViews[subRoute.target] && !subRoute.noOnboard" class="onboarding-notification"></i>\n            </a>\n          </li>\n        </ul>\n  		</li>\n  	</ul>\n  </div>\n</nav>'),$templateCache.put("offering-picker/offering-picker.html",'<div class="offering-picker" ng-click="pickerClick($event)" ng-class="{ \'open\': isOpen, \'light-bg\': $root.offeringPickerLightBG }">\n  <div class="offering" ng-repeat="offering in offerings" ng-click="navToOffering(offering)">\n    <div class="offering-symbol" ng-bind-html="offering.abbr"></div>\n    <div class="offering-name">{[{offering.name}]}</div>\n    <div class="offering-components" ng-if="offering.components">\n      <span class="offering-component" ng-repeat="comp in offering.components" ng-class="{ \'active\': comp.active }">\n        {[{comp.name}]}\n      </span>\n    </div>\n  </div>\n</div>'),$templateCache.put("pager/pager.html",'<div class="review-pager">\n	<a ng-click="pageDown()" class="clickable" ng-class="{ \'disabled\': page <= 1 }">Prev</a>\n	<span>{[{(page || \'p\') + \' of \' + (totalPages || \'-\')}]}</span>\n	<a ng-click="pageUp()" class="clickable" ng-class="{ \'disabled\': page >= totalPages }">Next</a>\n</div>'),$templateCache.put("review-filters/review-filters.html",'<div class="review-filters">\n	<section class="search-filter" ng-show="query !== undefined">\n		<input class="review-filter search-filter" type="search" placeholder="Search Reviews" ng-model="query" />\n		<i class="iconic iconic-md iconic-magnifying-glass"></i>\n	</section>\n	<section class="review-filter attributes-filter" ng-show="attributes != undefined" bs-collapse>\n		<h4 class="review-filter-header" bs-collapse-toggle ng-class="{ out: attrFilterIn }"\n					ng-click="attrFilterIn = !attrFilterIn">Attributes</h4>\n		<ul class="filter-list filter-check-list" bs-collapse-target>\n			<li ng-repeat="(name, active) in attributes" class="attribute" ng-class="{active: active}"\n						ng-click="updateAttr(name);">\n				{[{name | titleCase}]}\n			</li>\n		</ul>\n	</section>\n	<section class="review-filter attributes-filter" ng-if="customAttributes" bs-collapse>\n		<h4 class="review-filter-header" bs-collapse-toggle ng-class="{ out: customAttrFilterIn }"\n					ng-click="customAttrFilterIn = !customAttrFilterIn">Custom Attributes</h4>\n		<ul class="filter-list filter-radio-list" bs-collapse-target>\n			<li class="attribute" ng-class="{\'active\': customNone}" ng-click="updateCustomAttr();">\n				None\n			</li>\n			<li ng-repeat="(key, attr) in customAttributes" class="attribute" ng-class="{active: attr.active}"\n						ng-click="updateCustomAttr(attr);">\n				<span class="text-truncate" text-scroll>{[{attr.name}]}</span>\n			</li>\n		</ul>\n	</section>\n	<section class="review-filter date-filter" bs-collapse>\n		<h4 class="review-filter-header" bs-collapse-toggle ng-class="{ out: dateFilterIn }"\n					ng-click="dateFilterIn = !dateFilterIn">Date</h3>\n		<div bs-collapse-target>\n			<ul class="filter-list filter-radio-list">\n				<li class="date-option" ng-class="{ active: showAllDates }" ng-click="showAllDates = true">Show All Dates</li>\n				<li class="date-option" ng-class="{ active: !showAllDates }" ng-click="showAllDates = false">Show Date Range</li>\n			</ul>\n			<div ng-hide="showAllDates">\n			 	<div class="date-picker-wrapper">\n					<input type="text" class="date-picker" ng-model="startDate" data-date-format="MM-dd-yyyy"\n								data-max-date="{[{endDate}]}" icon-left="iconic iconic-chevron-left" data-autoclose="true"\n								icon-right="iconic iconic-chevron-right" bs-datepicker id="start-date" />\n					<label for="start-date" class="iconic iconic-calendar"></label>\n				</div>\n					<span class="date-picker-sep">TO</span>\n				<div class="date-picker-wrapper">\n					<input type="text" class="date-picker" ng-model="endDate" data-date-format="MM-dd-yyyy"\n								data-min-date="{[{startDate}]}" icon-left="iconic iconic-chevron-left" data-autoclose="true"\n                icon-right="iconic iconic-chevron-right" bs-datepicker id="end-date" />\n					<label for="end-date" class="iconic iconic-calendar"></label>\n				</div>\n			</div>\n		</div>\n	</section>\n	<section class="review-filter ratings-filter">\n		<h4 class="review-filter-header">Rating</h3>\n		<star-picker star-count="starCount"></star-picker>\n	</section>\n</div>'),$templateCache.put("review-graph/review-graph.html",'<svg class="review-graph">\n  \n</svg>'),$templateCache.put("review-stream/review-stream.html",'<section class="review-stream">\n	<article class="review-card" ng-repeat="review in reviews" ng-hide="starFilter && starFilter != review.rating">\n	    <star-picker class="review-rating" star-count="review.rating" read-only="true"></star-picker>\n		<div>\n	      <span class="review-date">{[{review.date | moment:"l"}]}</span>\n	      <span class="review-author">{[{review.user_name}]} - </span> \n	    </div>\n\n	    <p class="review-text">\n	      <b class="review-title" safe-html="review.title | sanitizeReviewStream"></b>\n	      <span safe-html="review.text | sanitizeReviewStream | highlightText:query"></span>\n	    </p>\n		<div class="signals" ng-hide="review.signal_hits.length < 1">\n			Signals: \n			<span class="signal" ng-repeat="signal in review.signal_hits">{[{signal | titleCase}]}</span>\n		</div>\n		<div class="attributes" ng-hide="review.attribute_hits.length < 1">\n	  		Attributes: \n			<span class="attribute" ng-repeat="attribute in review.attribute_hits">{[{attribute | titleCase}]}</span>\n		</div>\n	</article>\n</section>'),$templateCache.put("review-volume-graph/review-volume-graph.html",'<div class="review-volume-graph"></div>'),$templateCache.put("star-picker/star-picker.html",'<span class="star-picker" title="{[{starCount | number:2}]}">\n  <i class="iconic iconic-star star" ng-repeat="star in [1,2,3,4,5]" ng-class="{ clickable: !readOnly }"\n        ng-click="updateStars(star)"></i>\n  <span class="active-stars" ng-style="{ width: activeWidth() }">\n    <i class="iconic iconic-star star active" ng-repeat="star in [1,2,3,4,5]" ng-class="{ clickable: !readOnly }"\n        ng-click="updateStars(star)"></i>\n  </span>\n</span>\n'),$templateCache.put("star-rating-filter/star-rating-filter.html",'<div class="review-filter filter-control star-select" toggle-slide="slide-toggle">\n	<i class="fa fa-star-half-o"></i> Rating\n	<div class="slide-toggle">\n		<ul class="radio">\n			<li ng-click="selectStar(\'all\')"\n				ng-class="{\'selected\':showStars==\'all\'}">\n				Show all star ratings \n				<i class="pull-right fa" ng-class="{\'fa-circle-o\':showStars!=\'all\',\'fa-dot-circle-o\':showStars==\'all\'}"></i>\n			</li>\n			<li ng-click="selectStar(star)"\n				ng-class="{\'selected\':showStars==star}"\n				ng-repeat="star in [1,2,3,4,5]">\n				<span safe-html="star | starIcon"></span>\n				<i class="pull-right fa" ng-class="{\'fa-circle-o\':showStars!=star,\'fa-dot-circle-o\':showStars==star}"></i>\n			</li>\n		</ul>\n	</div>\n</div>'),$templateCache.put("star-ratings-graph/star-ratings-graph.html",'<div class="star-ratings-graph"></div>'),$templateCache.put("tool-tip/tool-tip-overlay.html",'<div id="tool-tip-overlay" ng-class="{\'active\':active}">\n\n</div>'),$templateCache.put("tool-tip/tool-tip.html",'<i class="tool-tip info fa fa-info-circle" ng-click="toggleTip()"></i>\n'),$templateCache.put("top-clusters/tool-tip.html",'<div class="tool-tip-content">\n	<h1>TOP CLUSTERS</h1>\n	<p>Top Clusters highlights reviews grouped by phrase commonality, recency and frequency, which impact your app\'s star rating.</p>\n	<h1>How do I use this?</h1>\n	<p>You can sort by clicking \'All\' to see all grouped reviews, thumbs down to see negative clusters, and thumbs up to see positive clusters over the specified date range. Adjusting the date range from the drop down menu will recalculate your top clusters.</p>\n	<p>You can click on a top cluster to see the associated reviews and learn which attributes of your app are being affected. By clicking the export to CSV icon, you can download your results.</p>\n	<h1>How do I use this information?</h1>\n	<p>Top Clusters unearth user stories that may be hidden in a mountain of review data. By parsing through this data, your top clusters help you connect directly to your user\'s wants, needs, and issues. </p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/dt0fk7f2a5" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("top-clusters/top-clusters.html",'<div class="top-clusters-container">\n	<div class="top-clusters">\n		<h2 class="to-the-left-to-the-left">Top Issues<tool-tip tip="dashboard/topClusters" template-url="top-clusters/tool-tip.html"></tool-tip></h2>\n		<h4>Trending reviews that impact your app\'s star rating</h4>\n	    <cluster-filters\n	    		active-cluster-filter="activeClusterFilter"\n			    time-bucket="timeBucket"\n			    event-name="updateEventName"\n			    app="app">\n	    </cluster-filters>\n		<div class="top-issues-box section-content">\n			<div class="no-issues" ng-hide="topClusters.length > 0">No clusters found for this app.</div>\n			<div id="clusters" class="top-issues">\n				<div class="clickable cluster {[{cluster.type}]}-cluster issue" ng-repeat="cluster in topClusters | limitTo: 5" ng-if="cluster"\n              ng-click="zoomCluster(cluster)">\n\n              		<div class="cluster-pos-neg"><i class="fa" ng-class="{\'fa-thumbs-up\':cluster.avg_rating >= 4, \'fa-thumbs-down\':cluster.avg_rating < 4}"></i>{[{cluster.avg_rating < 4 ? \'Negative\':\'Positive\'}]}</div>\n\n					<div class="issue-content">\n						<div class="issue-snippet" safe-html="cluster.exampleReview.snippet | truncate: 140 | sanitizeReviewStream | highlightText:cluster.most_freq">\n						</div>\n					</div>\n					<div class="issue-footer">\n						<span class="cluster-count">\n							<i class="fa fa-comment"></i>\n							{[{cluster.num_reviews}]}\n						</span>\n						<span class="cluster-dates">\n							<i class="fa fa-calendar"></i>\n							{[{cluster.first_review.date | moment:\'l\'}]}\n							&nbsp;&ndash;&nbsp;\n							{[{cluster.last_review.date | moment:\'l\'}]}\n						</span>\n						<span class="cluster-rating">\n							<i class="fa fa-star"></i>\n							Avg. star rating:&nbsp;{[{cluster.avg_rating | starRound}]}\n						</span>\n						<div class="frequent-terms" ng-hide="cluster.term_map.length < 1" text-scroll>\n							Frequent Terms: <span class="frequent-term" ng-repeat="term in cluster.term_map">{[{term[0]}]}, </span>\n						</div>\n					</div>\n				</div>\n			</div>\n			<a ng-if="false" class="cluster-link" scroll-to="clusters" ng-attr-offset="140">See all clusters</a>\n		</div>\n	</div>\n	<cluster-detail ng-class="{ \'out\': !activeCluster }"></cluster-detail>\n</div>'),$templateCache.put("user-settings/user-settings.html",'<section class="user-settings" ng-class="{ \'active\': isActive }">\n  <header ng-click="isActive = !isActive">\n    <i class="user-image iconic iconic-person-genderless"></i>\n    <span class="user-name">{[{userName}]}</span>\n    <i class="iconic iconic-caret-left"></i>\n  </header>\n  <ul>\n  	<li>\n  		Light Theme\n  		<on-off-switch value="$root.lightThemeEnabled" class="pull-right" />\n		</li>\n    <li ng-click="goToView(\'settings\')">Settings</li>\n    <li ng-click="signOut()">Sign Out</li>\n  </ul>\n</section>\n'),$templateCache.put("benchmark-view/benchmark-view.html",'<div class="benchmark-view">\n  <aside class="benchmark-aside filter-aside">\n    <h2>Filter</h2>\n    <h4>Select a two-week range</h4>\n  	<section class="benchmark-filter date-filter" bs-collapse>\n  		<h4 class="benchmark-filter-header">End Date<!--  <span class="sub">(two week range)</span> --></h3>\n  		<div class="date-picker-wrapper">\n  			<input type="text" class="date-picker" ng-model="endDate" data-date-format="MM-dd-yyyy"\n  						data-min-date="{[{startDate}]}" icon-left="iconic iconic-chevron-left" data-autoclose="true"\n      				icon-right="iconic iconic-chevron-right" bs-datepicker id="end-date" />\n  			<label for="end-date" class="iconic iconic-calendar"></label>\n  		</div>\n  	</section>\n  </aside>\n	<section class="benchmark-header benchmark-pane">\n		<h2>\n      Competition Benchmarking\n      <tool-tip tip="benchmark/competitionBenchmark" template-url="benchmark-view/tool-tip-competition.html">\n      </tool-tip>\n    </h2>\n		<h4>See how your app stacks up</h4>\n		<section class="related-apps">\n			<related-apps-graph data="relatedAppData"></related-apps-graph>	\n		</section>\n	</section>\n\n  \n  <dropdown class="related-group-dropdown"\n            options="groupDrop.opts"\n            selected="groupDrop.select"\n            select-action="setGroup"\n            ng-show="groupDrop">\n  </dropdown>\n\n	<section class="spotlight-pane">\n		<h2>Review Sentiment<tool-tip tip="benchmark/reviewSentiment" template-url="benchmark-view/tool-tip-review-sentiment.html"></tool-tip></h2>\n		<h4>Compare your review sentiment against a selected competitor from above</h4>\n		<section class="review-sentiment-over-time cf">\n			<div class="app-sentiment {[{key}]}" ng-if="ratings" ng-repeat="key in [\'positive\',\'negative\']">\n				<app-ratings-sentiment data="ratings[key]" sentiment="key">\n				</app-ratings-sentiment>\n			</div>\n		</section>\n\n	</section>\n\n	<section class="attributes-pane">\n		<h2>Reviews by Applause Attributes<tool-tip tip="benchmark/attributeStream" template-url="benchmark-view/tool-tip-attributes.html"></tool-tip></h2>\n		<h4>Compare your volume of reviews by attribute against a selected competitor from above</h4>\n		<attribute-stream-graph data=\'signalHitsData\' dates=\'dates\' self=\'app\' competitor=\'competitor\'></attribute-stream-graph>\n	</section>\n\n	<section class="competitor-rank-pane" ng-if="competitors[competitorGroup] && competitors[competitorGroup].length > 0">\n		<h2>Comparative Analysis<tool-tip tip="benchmark/competitorRank" template-url="benchmark-view/tool-tip-competitive-rank.html"></tool-tip></h2>\n		<h4>See how your app stacks up to the competition</h4>\n		<dropdown class="compare-dropdown" options=\'metricSwitcherOptions\' selected=\'metricSwitch.metric\'></dropdown>\n		<competitor-rank-graph data="appRankingsData" self="app.app_id + \':\' + app.country" metric-label="metricLabel"></competitor-rank-graph>\n	</section>\n</div>\n'),$templateCache.put("benchmark-view/tool-tip-attributes.html",'<div class="tool-tip-content">\n	<h1>REVIEW BY APPLAUSE ATTRIBUTE</h1>\n	<p>These charts highlight your volume of reviews per attribute over a span of 14 days in comparison to an app selected from above. </p>\n	<h1>How do I use this?</h1>\n	<p>Select an app from above and the charts will change based on the volume of reviews for the timeframe. Hover over each colored bar to see the specific number of reviews per attribute.</p>\n	<h1>How do I use this information?</h1>\n	<p>Understand your app\'s perceived strengths and weaknesses through the eyes of your users by measuring the peaks and valleys of Applause Attribute hits against your competitor.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/r37is61e4s" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("benchmark-view/tool-tip-competition.html",'<div class="tool-tip-content">\n	<h1>COMPETITIVE BENCHMARKING</h1>\n	<p>This chart shows you your closest competitors based on a relativity score which incorporates the similarity of your app store app descriptions, similar apps that users have downloaded and app store category.. The distance from your app highlights how similar the competitor\'s app is to you, and the size of the circle is correlated to number of reviews.</p>\n	<h1>How do I use this?</h1>\n	<p>Selecting an app from this area affects the charts below.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/2z6c0ewvia" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("benchmark-view/tool-tip-competitive-rank.html",'<div class="tool-tip-content">\n	<h1>COMPARATIVE ANALYSIS</h1>\n	<p>This chart compares and ranks your app to four of your competitors over a span of 14 days based on app store star rating, review count or Applause Score.</p>\n	<h1>How do I use this?</h1>\n	<p>Select which comparison view you would like (app store star rating, review count or Applause Score) and the graph will change to show the rankings across a 14-day timeframe. Hover over the icon for any particular app to see details around the comparison view you have selected.</p>\n	<h1>How do I use this information?</h1>\n	<p>Narrow your competitive concentration on the biggest threat and discover you compare in order to improve your standing.</p>\n	<h1>See it for yourself</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/skgm9wn7pp" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("benchmark-view/tool-tip-review-sentiment.html",'<div class="tool-tip-content">\n	<h1>REVIEW SENTIMENT</h1>\n	<p>These charts highlight your percentage of positive and negative reviews over a span of 14 days in comparison to an app selected from above.</p>\n	<h1>How do I use this?</h1>\n	<p>Select an app from chart above and the percentages will change based on the volume of positive and negative reviews for the 14-day timeframe.</p>\n	<h1>How do I use this information?</h1>\n	<p>Directly compare user sentiment of your app to a competitor\'s. By evaluating trends over the last two weeks you can see how users feel and take a peek at their app to see what\'s working and what\'s not.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/u8oompng5l" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("clusters-view/clusters-view.html",'<div class="clusters-view">\n  <aside class="cluster-aside filter-aside">\n    <cluster-filters active-cluster-filter="activeClusterFilter"\n      time-bucket="timeBucket"\n      query="q"\n      event-name="updateEventName"\n      app="app">\n    </cluster-filters>\n  </aside>\n\n  <section class="cluster-stats-pane">\n    <h2>Cluster Analysis<tool-tip tip="cluster/analysis" orientation="bottom" template-url="clusters-view/tool-tip-header.html"></tool-tip></h2>\n    <h4>Grouped reviews affecting your app\'s rating</h4>\n    <cluster-summary-chart data="clusterStats"></cluster-summary-chart>\n    <div class="cluster-breakdown">\n      <div class="cluster-breakdown-{[{star}]} star-breakdown" ng-repeat="star in [5,4,3,2,1]">\n        <div class="star-total">{[{clusterStats.cluster_breakdown[star] || 0}]}</div>\n        <div class="title">{[{star | prettyNumber}]} Star Clusters</div>\n        <div class="star-picker">\n          <star-picker class="review-rating" star-count="star" read-only="true"></star-picker>\n        </div>\n      </div>\n    </div>\n  </section>\n\n  <section class="cluster-stream-pane light-background" ng-class="{ loading: loadingclusters }">\n    <cluster-stream clusters="clusters"></cluster-stream>\n    <div ng-if="loadingClusters" class="loading-ring"><div></div></div>\n    <h4 class="no-cluster-data" ng-if="!loadingClusters && clusters.length <= 0">No clusters found.</h4>\n  </section>\n</div>'),$templateCache.put("clusters-view/tool-tip-header.html",'<div class="tool-tip-content">\n	<h1>CLUSTER ANALYSIS</h1>\n	<p>Clusters highlight reviews grouped by phrase commonality, recency and frequency, which are affecting your app\'s average star rating. Each cluster has an average star rating from one to five based on its associated reviews. This chart gives you a quick glance into the star rating distribution across clusters, which allows you to discover and monitor general cluster rating sentiment at a glance.</p>\n	<h1>How do I use this information?</h1>\n	<p>See an overview of the sentiment of each of your clustered issues.</p>\n</div>'),$templateCache.put("compare-view/compare-view.html",'<div class="compare-view">\n  <div class="compare-pane spotlight-pane">\n    <h2>Compare your app to your competition<tool-tip tip="compare/compareChart" orientation="bottom" template-url="compare-view/tool-tip.html"></tool-tip></h2>\n    <h4>See how your app\'s Applause Attributes compare with to the competition</h4>\n    <radar-chart app-list="radarApps" show-cat="showCat" update-visible-event="updateVisibleEvent"></radar-chart>\n    <div class="controls">\n      <a class="export-link" ng-click="exportChart()">\n        <i ng-class="{ \'iconic iconic-document\': !exportingChart, \'fa fa-cog fa-spin\': exportingChart }"></i>\n        &nbsp;\n        Export to PNG\n      </a>\n    </div>\n  </div>\n  <aside class="filter-aside compare-aside">\n    <h2>Select Competitors<tool-tip tip="compare/compareAside" orientation="left"></tool-tip></h2>\n    <h4>Compare up to five apps at a time</h4>\n    <app-search placeholder="\'Search For Apps\'" app-action="addApp" app-suggestion-count="appSuggestionsCount"\n    search-has-focus="searchHasFocus" filtered-apps="filteredApps"></app-search>\n    <button class="toggle-cat-stats" ng-click="showCat = !showCat">\n      <span class="check" ng-class="{ \'active\': showCat }"></span>\n      Show Category Stats\n    </button>\n    <ul class="app-list">\n      <li ng-repeat="app in appList | filter:{isActiveApp: \'true\'}"\n          ng-class="{ \'no-data\': app.details.scores[\'^^all^^\'] === -1 }">\n        <span class="check app-check" ng-class="{ \'active\': !app.isHidden }"></span>\n        <img ng-src="{[{app.details.img_url}]}" alt="{[{app.details.title}]} App Icon" class="app-icon" />\n        <div class="app-score">\n          <span class="app-score-text">{[{app.details.scores[\'^^all^^\']}]}</span>\n          <br />\n          <span class="app-score-label">Score</span>\n        </div>\n        <i class="app-color" style="border-color:{[{app.isActiveApp ? \'#00BAFF\' : radarColors[$index]}]}"></i>\n        <div class="app-text">\n          <span class="app-title" text-scroll>\n            {[{app.details.title}]}\n            <span class="app-data">\n              <span class="meta">&middot;</span>\n              <span class="flag-icon flag-icon-{[{app.details.country}]}"></span>\n              <span class="meta">&middot;</span>\n              <i class="fa fa-{[{app.details.store === \'google\' ? \'android\' : app.details.store}]} app-store-icon"></i>\n            </span>\n          </span>\n          <span class="app-publisher">\n            {[{app.details.publisher}]}\n          </span>\n        </div>\n      </li>\n      <li ng-repeat="app in appList | filter:{isActiveApp: \'!true\'}"\n          ng-class="{ \'no-data\': app.details.scores[\'^^all^^\'] === -1 || app.noData, \'is-hidden\': app.isHidden }"\n          class="app" ng-click="toggleVisible(app)">\n        <span class="check app-check active"></span>\n        <img ng-src="{[{app.details.img_url}]}" alt="{[{app.details.title}]} App Icon" class="app-icon" />\n        <div class="app-score">\n          <span class="app-score-text">{[{app.details.scores[\'^^all^^\']}]}</span>\n          <br />\n          <span class="app-score-label">Score</span>\n        </div>\n        <div class="app-no-data">\n          No<br />Data\n        </div>\n        <i class="app-color" style="border-color:{[{radarColors[$index]}]}" ng-if="!app.isHidden"></i>\n        <i class="iconic iconic-trash app-remove" ng-click="removeApp(app, $event)"></i>\n        <div class="app-text">\n          <span class="app-title" text-scroll>\n            {[{app.details.title}]}\n            <span class="app-data">\n              <span class="meta">&middot;</span>\n              <span class="flag-icon flag-icon-{[{app.details.country}]}"></span>\n              <span class="meta">&middot;</span>\n              <i class="fa fa-{[{app.details.store === \'google\' ? \'android\' : app.details.store}]} app-store-icon"></i>\n            </span>\n          </span>\n          <span class="app-publisher">\n            {[{app.details.publisher}]}\n          </span>\n        </div>\n      </li>\n    </ul>\n\n    <div class="recommended-apps">\n       <h4 class=\'control-header\'>Recommended Apps</h4>\n        <div>Examples by category ({[{recAppCategory | titleCase}]})</div>\n         <div class="recs" ng-repeat="app in recApps | limitTo: 3 " ng-mouseover="hoverIn(rec[app])" ng-class="{ \'active\': trendAppInfo.title == rec[app].title }">\n          <img src="{[{rec[app].img_url}]}" ng-click="addRecApp(app)">\n        </div>\n        <div class="trend-info-box" ng-attr-title="{[{trendAppInfo.title}]}">\n          <span>{[{trendAppInfo.title}]}</span>\n          <!-- <div class="trend-info-graphic">\n            <i class="trend-icon {[{trendAppInfo.rev.icon}]}"></i>\n            <span class="maths-here" ng-if="trendAppInfo.rev.percentage && trendAppInfo.rev.icon != \'0\'">\n              {[{trendAppInfo.rev.percentage | number:2}]}\n            </span>\n          </div> -->\n        </div>\n     </div>\n\n\n  </aside>\n</div>'),
$templateCache.put("compare-view/tool-tip.html",'<div class="tool-tip-content">\n	<h1>COMPARE</h1>\n	<p>This Compare chart plots your app in comparison to up to four apps of your choice based on Applause Attribute rankings.</p>\n	<h1>How do I use this?</h1>\n	<p>Adjust the chart by adding apps on the right.</p>\n	<h1>How do I use this information?</h1>\n	<p>Understand how the Applause Attributes of your app compare to the competitve apps you selected. Applause Attributes that fall short of your competition are areas that require extra attention.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/v0eqszxrhb" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("dashboard-view/dashboard-view.html",'<div class="dashboard-flex-container" ng-hide="loading(\'apps\',appId)">\n  <div class="left-container">\n    <app-info app="app" release-days="releaseDays" top-attr="topAttr" reviewed-countries="reviewedCountries"\n      related-apps="relatedApps" trend="trend" countries="countries">\n    </app-info>\n    <attribute-card app="app" app-attributes="appAttributes" category-stats="categoryStats" attribute-reviews="attributeReviews"></attribute-card>\n  </div>\n  <div class="view-aside right-container">\n    <activity-feed activities-data="activitiesData" app="app"></activity-feed>\n    <top-clusters top-clusters="topClusters" event-name="updateEventName"\n      active-cluster-filter="activeClusterFilter" time-bucket="timeBucket">\n    </top-clusters>\n  </div>\n</div>'),$templateCache.put("economy-view/economy-view.html",'<div class="economy-flex-container">\n  <div class="economy-view">\n    <div class="economy-detail spotlight-pane">\n      <div class="upper-section-title section-title">\n        <h2>Trending Attributes<tool-tip tip="appEconomy/trendingAttributes" template-url="economy-view/tool-tip-attributes.html" orientation="bottom"></tool-tip></h2>\n        <h4>Top Applause Attributes based on your selected apps economy filters</h4>\n      </div>\n      <div class="most-popular-attributes">\n        <div class="popular-card" ng-repeat="popular in economyInfoPopularData">\n          <div class="attribute-title">{[{popular.attr | upperCase}]}</div>\n          <div class="flex-wrapper">\n            <div class="attribute-frequency">\n              <span class="frequency">FREQUENCY</span>\n              <div class="frequency-count">{[{popular.freq | freqPercentatize}]}<span class="frequency-percent-sign">%</span></div>\n            </div>\n            <div class="attribute-review-count">\n              <span class="reviews">REVIEW</span>\n              <div class="review-count">{[{popular.review_count | prettyNumber}]}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="lower-section-title section-header">\n        <h2>Trending Apps<tool-tip tip="appEconomy/trendingApps" template-url="economy-view/tool-tip-apps.html"></tool-tip></h2>\n        <h4>Apps with the greatest change in the past 7 days</h4>\n      </div>\n      <div class="trending-apps">\n        <div class="trend-container">\n          <div class="trend-title">Star Rating</div>\n          <div class="trend-star" ng-repeat="datum in economyInfoData.starData track by $index"\n                ng-mouseover="hoverIn(\'star\',datum,starDiff[$index],starDiffValue[$index])"\n                ng-class="{ \'active\': trendAppInfo.star.datum.app_id == datum.app_id }">\n            <img class="star-datum" ng-src="{[{datum.img_url}]}"\n            alt="{[{datum.title}]} Icon" ng-click="goToReviews(datum)"/>\n          </div>\n          <div class="trend-info-box" ng-if="economyInfoData && economyInfoData.reviewsData" ng-attr-title="{[{trendAppInfo.star.datum.title}]}">\n            {[{trendAppInfo.star.datum.title | truncate:22}]}\n            <div class="trend-info-graphic">\n              <i class="trend-icon {[{trendAppInfo.star.icon}]}"></i>\n              <span class="maths-here" ng-if="trendAppInfo.star.percentage && trendAppInfo.star.icon != \'0\'">\n                {[{trendAppInfo.star.percentage | number:2}]}%\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="trend-container">\n          <div class="trend-title">Applause Score</div>\n          <div class="trend-attributes" ng-repeat="datum in economyInfoData.attributesData track by $index" ng-mouseover="hoverIn(\'attr\',datum,attrDiff[$index],attrDiffValue[$index])" ng-class="{ \'active\': trendAppInfo.attr.datum.app_id == datum.app_id }">\n            <img class="attributes-datum" ng-src="{[{datum.img_url}]}"\n            alt="{[{datum.title}]} Icon" ng-click="goToAttributes(datum)"/>\n          </div>\n          <div class="trend-info-box" ng-if="economyInfoData && economyInfoData.reviewsData" ng-attr-title="{[{trendAppInfo.attr.datum.title}]}">\n            {[{trendAppInfo.attr.datum.title | truncate:22}]}\n            <div class="trend-info-graphic">\n              <i class="trend-icon {[{trendAppInfo.attr.icon}]}"></i>\n              <span class="maths-here" ng-if="trendAppInfo.attr.percentage && trendAppInfo.attr.icon != \'0\'">\n                {[{trendAppInfo.attr.percentage | number:2}]}%\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="trend-container">\n          <div class="trend-title">Review Count</div>\n          <div class="trend-reviews" ng-repeat="datum in economyInfoData.reviewsData track by $index" ng-mouseover="hoverIn(\'rev\',datum,revDiff[$index],revDiffValue[$index])" ng-class="{ \'active\': trendAppInfo.rev.datum.app_id == datum.app_id }">\n            <img class="reviews-datum" ng-src="{[{datum.img_url}]}"\n            alt="{[{datum.title}]} Icon" ng-click="goToReviews(datum)"/>\n          </div>\n          <div class="trend-info-box" ng-if="economyInfoData && economyInfoData.reviewsData" ng-attr-title="{[{trendAppInfo.rev.datum.title}]}">\n            {[{trendAppInfo.rev.datum.title | truncate:22}]}\n            <div class="trend-info-graphic">\n              <i class="trend-icon {[{trendAppInfo.rev.icon}]}"></i>\n              <span class="maths-here" ng-if="trendAppInfo.rev.percentage && trendAppInfo.rev.icon != \'0\'">\n                {[{trendAppInfo.rev.percentage | prettyNumber }]}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="economy-charts cf economy-charts-pane">\n      <div class="app-ratings">\n        <h2>\n          App Store Star Rating\n          <tool-tip tip="appEconomy/starRating" template-url="economy-view/tool-tip-store-rating.html"></tool-tip>\n        </h2>\n        <h4>Total number of apps with a particular star rating based on your apps economy filters</h4>\n        <div class="no-data" ng-if="starRatingsData===null">\n          No data available for these filters.\n        </div>\n        <star-ratings-graph class="graph" ng-if="starRatingsData" data="starRatingsData"\n                process-data="processRatingsData" get-placement="getRatingsPlacement">\n        </star-ratings-graph>\n      </div>\n      <div class="app-release">\n        <h2>Release Cadence<tool-tip tip="appEconomy/releaseCadence" template-url="economy-view/tool-tip-release-cadence.html"></tool-tip></h2>\n        <h4>Total number of apps with a particular number of average days between releases</h4>\n        <div class="app-release-days">\n          <div class="no-data" ng-if="daysSinceReleaseData===null">\n            No data available for these filters.\n          </div>\n          <app-histogram-graph class="graph" ng-if="daysSinceReleaseData" data="daysSinceReleaseData" y-tick-format="S"\n                process-data="processReleaseData" get-placement="getReleasePlacement"\n                tooltip-label="\'APPS\'" tooltip-label-two="getReleaseTooltipLabel">\n          </app-histogram-graph>\n        </div>\n      </div>\n      <div class="app-review">\n        <h2>Review count<tool-tip tip="appEconomy/reviewCount" template-url="economy-view/tool-tip-review-count.html"></tool-tip></h2>\n        <h4>Total number of apps with a particular number of total reviews</h4>\n        <div class="app-review-count">\n          <div class="no-data" ng-if="numReviewsData===null">\n            No data available for these filters.\n          </div>\n          <app-histogram-graph class="graph" if="numReviewsData" data="numReviewsData"\n                process-data="processNumReviewsData" get-placement="getNumReviewsPlacement"\n                tooltip-label="\'APPS\'" tooltip-label-two="getReviewCountTooltipLabel" natural-log="true">\n          </app-histogram-graph>\n        </div>\n      </div>\n      <div class="app-score">\n        <h2>Applause score<tool-tip tip="appEconomy/applauseScore" template-url="economy-view/tool-tip-applause-score.html"></tool-tip></h2>\n        <h4>Total number of apps with a particular Applause Score</h4>\n        <div class="app-score">\n          <div class="no-data" ng-if="applauseScoreData===null">\n            No data available for these filters.\n          </div>\n          <app-histogram-graph class="graph" ng-if="applauseScoreData" data="applauseScoreData"\n                process-data="processApplauseScoreData" get-placement="getApplauseScorePlacement"\n                tooltip-label="\'APPS\'" tooltip-label-two="getScoreTooltipLabel">\n          </app-histogram-graph>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <aside class="economy-aside filter-aside">\n    <h2>Filter</h2>\n    <h4>Adjust this page by filtering</h4>\n    <section bs-collapse>\n      <h4 class="filter-header" bs-collapse-toggle ng-class="{ out: appStoreFilterIn }"\n          ng-click="appStoreFilterIn = !appStoreFilterIn">App Store</h4>\n      <ul class="filter-list filter-radio-list" bs-collapse-target>\n        <li class="button market" ng-repeat="market in markets" ng-click="selectMarket(market)"\n          ng-class="{active: filterSwitch.market == market.market}">\n          <div>{[{market.title}]}</div>\n        </li>\n      </ul>\n    </section>\n    <section bs-collapse>\n      <h4 class="filter-header" bs-collapse-toggle ng-class="{ out: countryFilterIn }"\n          ng-click="countryFilterIn = !countryFilterIn">Country</h4>\n      <ul class="country-section button-group filter-list filter-radio-list" bs-collapse-target>\n        <li class="button country" ng-repeat="country in countryOrder" ng-click="selectCountry(country)"\n          ng-class="{ active: filterSwitch.country === country }">\n          <div>{[{countries[country].displayName}]}</div>\n        </li>\n      </ul>\n    </section>\n    <section>\n      <h4 class="filter-header">Category</h4>\n      <dropdown options=\'categorySwitcherOptions\' selected=\'filterSwitch.category\'></dropdown>\n    </section>\n  </aside>\n</div>'),$templateCache.put("economy-view/tool-tip-applause-score.html",'<div class="tool-tip-content">\n	<h1>APPLAUSE SCORE</h1>\n	<p>This chart displays the distribution of Applause Scores across the apps economy based on the filters you\'ve selected.</p>\n	<h1>How do I use this information?</h1>\n	<p>Discover whether to ask your users for more reviews by knowing how your Applause Score compares to other apps in the apps economy.</p>\n</div>'),$templateCache.put("economy-view/tool-tip-apps.html",'<div class="tool-tip-content">\n	<h1>TRENDING APPS</h1>\n	<p>Trending Apps shows you which apps are rising to the top of your selected apps economy filters.</p>\n	<h1>How do I use this information?</h1>\n	<p>By knowing what apps are succeeding within a selection of apps economy filters, you can discover the successful apps to emulate.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/5cv11lk6wx" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("economy-view/tool-tip-attributes.html",'<div class="tool-tip-content">\n	<h1>TRENDING ATTRIBUTES</h1>\n	<p>Trending Attributes shows you which Applause Attributes occur most frequently within your selected apps economy filters.</p>\n	<h1>How do I use this information?</h1>\n	<p>By knowing which Applause Attributes are affected within a particular range of apps economy filters you can improve your app for app store success.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/4yl5lpq5xu" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="382"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("economy-view/tool-tip-release-cadence.html",'<div class="tool-tip-content">\n	<h1>RELEASE CADENCE</h1>\n	<p>This chart displays the estimated amount of days between a release based on your selected apps economy filters.</p>\n	<h1>How do I use this information?</h1>\n	<p>Discover how agile you are by knowing how your app\'s release cadence compares within in the apps economy.</p>\n</div>'),$templateCache.put("economy-view/tool-tip-review-count.html",'<div class="tool-tip-content">\n	<h1>REVIEW COUNT</h1>\n	<p>This chart displays the volume of reviews spread across the apps economy based on the apps economy filters you\'ve selected.</p>\n	<h1>How do I use this information?</h1>\n	<p>Discover whether to ask your users for more reviews by understanding how many reviews your app has recieved compared to other apps in the apps economy.</p>\n</div>'),$templateCache.put("economy-view/tool-tip-store-rating.html",'<div class="tool-tip-content">\n	<h1>APP STORE STAR RATING</h1>\n	<p>This chart displays the volume of each star rating based on your selected apps economy filters.</p>\n	<h1>How do I use this information?</h1>\n	<p>Discover how your app stacks up to the competition by understanding how app\'s star rating performs in the apps economy.</p>\n</div>'),$templateCache.put("international-view/international-view.html",'<div class="international">\n  <aside class="filter-aside">\n    <h2>Filter</h2>\n    <h4>Adjust the chart by selecting a date range below</h4>\n    <h4 class="filter-header">Date</h4>\n    <ul class="filter-list filter-radio-list">\n      <li class="date-option" ng-class="{ active: showAllDates }" ng-click="showAllDates = true">Automatic Dates</li>\n      <li class="date-option" ng-class="{ active: !showAllDates }" ng-click="showAllDates = false">Choose Dates Manually</li>\n    </ul>\n    <date-range-picker ng-hide="showAllDates" since="since" until="until"></date-range-picker>\n  </aside>\n  <section class="international-pane">\n    <div class="international-chart-container">\n      <international-chart\n          chart-data="chartData"\n          hover-country="hoverCountry"\n          chart-metric="metric"\n          since="since"\n          until="until">\n      </international-chart>\n      <div class="active-countries">\n        <span ng-repeat="country in countries" ng-if="country.isActive && !country.notFound"\n              ng-mouseenter="setHover(country)" ng-mouseleave="clearHover()" ng-style="{ \'color\': country.color }">\n          {[{country.displayName}]}\n          <i class="iconic iconic-pulse"></i>\n        </span>\n      </div>\n    </div>\n    <div class="table-section light-background">\n      <div class="section-header">\n        <h2>INTERNATIONAL<tool-tip tip="international/countryTable" template-url="international-view/tool-tip.html"></tool-tip></h2>\n        <span class="subtitle">\n          App\'s performance across markets\n        </span>\n      </div>\n      <table class="detail-table country-table">\n        <thead>\n          <tr>\n            <th></th>\n            <th>COUNTRY</th>\n            <th class="clickable" ng-class="{ \'active\': metric === \'applauseScore\' }" ng-click="setMetric(\'applauseScore\')">APPLAUSE SCORE</th>\n            <th class="clickable" ng-class="{ \'active\': metric === \'reviewCount\' }" ng-click="setMetric(\'reviewCount\')">NUMBER OF REVIEWS</th>\n            <th ng-class="{ \'active\': metric === \'starRating\' }">STORE STAR RATING</th>\n            <th ng-class="{ \'active\': metric === \'reviewStarRating\' }">REVIEW STAR RATING</th>\n            <th>DAYS SINCE RELEASE</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="country in countries" ng-class="{ \'not-found\': country.notFound }">\n            <td class="clickable" ng-click="toggleActive(country)" ng-mouseenter="setHover(country)" ng-mouseleave="clearHover()">\n              <span class="country-toggle" ng-class="{ \'active\': country.isActive && !country.notFound }"></span>\n            </td>\n            <td class="clickable" ng-click="toggleActive(country)" ng-mouseenter="setHover(country)" ng-mouseleave="clearHover()">\n              <span class="flag-icon flag-icon-{[{country.code}]}"></span>\n              {[{country.displayName}]}\n            </td>\n            <td class="clickable" ng-click="setMetric(\'applauseScore\')">\n              {[{country.applauseScore | prettyNumber:\'score\'}]}\n            </td>\n            <td class="clickable" ng-click="setMetric(\'reviewCount\')">\n              {[{country.reviewCount | prettyNumber}]}\n            </td>\n            <td ng-class="{ \'active\': metric === \'starRating\' }">\n              <star-picker star-count="country.starRating" read-only="true"></star-picker>\n              <span class="star-count" style="font-size:11px; margin:0 10px;">{[{country.starRating | number:2}]}</span>\n            </td>\n            <td ng-class="{ \'active\': metric === \'reviewStarRating\' }">\n              <star-picker star-count="country.reviewStarRating" read-only="true"></star-picker>\n              <span class="star-count" style="font-size:11px; margin:0 10px;">{[{country.reviewStarRating | number:2}]}</span>\n            </td>\n            <td>{[{country.daysSinceRelease | prettyNumber}]}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </section>\n</div>'),$templateCache.put("international-view/tool-tip.html",'<div class="tool-tip-content">\n	<h1>INTERNATIONAL</h1>\n	<p>Apps economy statistics for any market supported by Applause Analytics that your app currently ships in.</p>\n	<h1>How do I use this?</h1>\n	<p>Select Applause Score or number of reviews to see the chart dynamically populate to display changes over time.</p>\n	<h1>How do I use this information?</h1>\n	<p>Knowing where you stack up across your available markets may clue you in to app store success or catch early warning signs. What works in one country / market may not work in another.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/qow122p5ao" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("report-view/report-view.html",'<div class="report-flex-container">\n    <script src="/analyticsv3/static/js/views/report_view/FileSaver/FileSaver.js" type="text/javascript"></script>\n    <div ng-if="isCheckingPermissions==true" class="loading-ring"><div></div></div> \n    <div ng-if="isCheckingPermissions==false && hasPermission == false">\n        <div class="report-welcome-view">\n            <div class="section-header">\n              <h1>ALX</h1>\n              <h2>Analyst Corner</h2>\n              \n              <p>Remove the pain of constructing analysis reports for the quality of your app.  Let us do the hard work! With the Analyst Corner, you can auto-generate powerpoint reports for sharing internally with your peers or receive a quick data dump into an Excel spreadsheet.</p>\n              <p>Contact your Applause Sales Rep today to get this feature enabled. </p>\n              </span>\n            </div>\n        </div>\n    </div>\n    <div ng-if="hasPermission" class="report-view">\n        <div class="report-detail">\n            <div class="upper-section-title section-title">\n            <h2>ANALYTICS REPORTS</h2>\n            </div>\n            <br/>\n            <div>\n                <h5 align="center">Please enter the app id for each environment for your app and competitors.</h5>\n                <table class="table app-detail-table" border="0" cellpadding="2" cellspacing="" data-ustwidth="1200" \n                       data-ustheight="500" align="center">\n                    <thead>\n                        <tr>\n                            <th>\n                            </th>\n                            <th>{[{appInfos[\'col_headers\'][0]}]}</th>\n                            <th ng-repeat="(col_index, col_header) in appInfos[\'col_headers\'] track by $index">\n                                <div ng-if="$index>0">{[{col_header}]}</div>\n                            </th> \n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="row in appTable track by $index" >    \n                            <td align="right">{[{appInfos[\'row_headers\'][$index]}]}</td>\n                            <td><input type="text" name="appTable_{[{$index}]}" \n                                     ng-model="row[0].value" \n                                     placeholder="Input {[{appInfos[\'col_headers\'][0]}]}">\n                            </td>\n                            <td ng-repeat="col in row track by $index">\n                                <app-search ng-if="$index > 0 && !row[$index].value" placeholder="row[$index].placeholder" \n                                            app-action="row[$index].func" \n                                            app-suggestion-count="appSuggestionsCount"\n                                            search-has-focus="searchHasFocus" \n                                            filtered-apps="filteredApps">\n                                </app-search>\n                                <span class="app-id" ng-if="$index > 0 && row[$index].value">\n                                    {[{row[$index].value.appId}]} - {[{row[$index].value.country}]} \n                                    <i class="iconic iconic-circle-x pull-right" ng-click="row[$index].value = null"></i>\n                                </span>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <br/>\n            <br/>\n            <div>\n                <h5 align="center">Please enter your powerpoint presenter information</h5>\n                <table class="table presenter-info-table" border="0" cellpadding="2" \n                       cellspacing="" data-ustwidth="1100" \n                       data-ustheight="500" align="center">\n                    <thead>\n                        <tr>\n                            <th>\n                            </th>\n                            <th ng-repeat="(col_index, col_header) in presenterInfos[\'col_headers\']">\n                                {[{col_header}]}\n                            </th> \n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr ng-repeat="row in presenters track by $index" >    \n                            <td align="right">{[{presenterInfos[\'row_headers\'][$index]}]}</td>\n                            <td ng-repeat="col in row track by $index">\n                              <input type="text" name="presenters_{[{$index}]}"\n                                     ng-model="row[$index]"\n                                     placeholder="Input {[{presenterInfos[\'col_headers\'][$index]}]}">\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <br/>\n            <div>\n                 <table class="table submission-table" border="0" cellpadding="2" cellspacing="" data-ustwidth="700" \n                       data-ustheight="500" align="center">\n                    <thead>\n                        <tr>\n                            <th>\n                                <a class="export-link" ng-click="AQReportExport(\'pptx\')">\n                                  <i ng-class="{ \'iconic iconic-document\': !exportingDeck, \'fa fa-cog fa-spin\': exportingDeck }" \n                                     class="iconic iconic-document"></i>\n                                  &nbsp;\n                                  EXPORT FULL REPORT TO POWER POINT\n                                </a>\n                                <tool-tip tip="aqCorner/deckExport" template-url="attribute-card/tool-tip.html">\n                                </tool-tip>\n                            </th>\n                            <th>\n                                <a class="export-link" ng-click="AQReportExport(\'excel\')">\n                                  <i ng-class="{ \'iconic iconic-document\': !exportingSheet, \'fa fa-cog fa-spin\': exportingSheet }"></i>\n                                  &nbsp;\n                                  EXPORT RAW APP DATA TO EXCEL\n                                </a>\n                                <tool-tip tip="aqCorner/spreadsheetExport" template-url="attribute-card/tool-tip.html">\n                                </tool-tip>\n                            </th> \n                        </tr>\n                    </thead>\n                </table>\n            </div>\n            <br/>\n        </div>\n    </div>\n</div>'),$templateCache.put("settings-view/settings-view.html",'<div class="settings">\n  <div class="settings-pane light-background">\n    <h2>CUSTOM GROUPS&nbsp;{[{groups | keylength}]}/{[{userSettings.maxGroups}]}</h2>\n    <h4>See your application in relation to the industry</h4>\n    <ul class="group-list">\n      <li class="group" ng-repeat="(key, group) in groups" bs-collapse data-start-collapsed="true">\n        <h3 class="clickable" bs-collapse-toggle ng-click="out = !out" ng-class="{ out: out }">\n          {[{group.group_name}]}&nbsp;({[{group.apps.length || \'0\'}]}/{[{userSettings.maxGroupApps}]})\n          <a class="clickable pull-right" ng-click="editGroup($event, group)">edit group</a>\n        </h3>\n        <ul class="app-list" bs-collapse-target>\n          <li ng-repeat="app in group.apps">\n            <div class="app">\n              <div class="app-icon-container">\n                <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} App Icon" class="app-icon">\n              </div>\n              <div class="app-text-container">\n                <span class="app-title">\n                  {[{app.title}]}\n                  <span class="app-data">\n                    <span class="meta">&middot;</span>\n                    <span class="flag-icon flag-icon-{[{app.country}]}"></span>\n                    <span class="meta">&middot;</span>\n                    <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n                  </span>\n                </span>\n                <span class="app-company">{[{app.publisher}]}</span>\n              </div>\n              <a class="app-edit" ng-click="editAppAlert(key, $index)">edit</a>\n            </div>\n          </li>\n        </ul>\n      </li>\n    </ul>\n    <a class="clickable create-group" ng-if="!groups || keyLength(groups) < userSettings.maxGroups" ng-click="createGroup()">\n      +&nbsp;CREATE CUSTOM GROUP\n    </a>\n  </div>\n  <aside class="filter-aside settings-aside">\n    <h2>COUNTRY PREFERENCE</h2>\n    <h4>Select your default country</h4>\n    <div class="country">\n      <country-picker active-country="userSettings.country"></country-picker>\n    </div>\n    <div class="custom-attributes">\n      <h2>\n        Custom Attributes&nbsp;({[{attrCount}]}/{[{userSettings.maxAttributes}]})\n      </h2>\n      <h4>Create attributes for your groups</h4>\n      <a class="clickable create-attribute" ng-click="createAttr()" ng-if="attrCount < userSettings.maxAttributes">\n        +&nbsp;CREATE CUSTOM ATTRIBUTE\n      </a>\n      <ul class="custom-attribute-list">\n        <li ng-repeat="(key, attr) in userSettings.attributes" class="custom-attribute">\n          <span class="attr-name" text-scroll>\n            {[{attr.name}]}\n          </span>\n          <i class="iconic iconic-pencil clickable" ng-click="editAttr(attr)"></i>\n          <span class="attr-keyword" ng-repeat="word in attr.signals">\n            {[{word}]}\n          </span>\n        </li>\n      </ul>\n    </div>\n  </aside>\n  <div class="modal-backdrop" ng-if="showAlertModal || showCustomAttrModal || showRemoveModal || showGroupModal"></div>\n  <div class="modal-group" ng-if="showGroupModal && !showRemoveModal">\n    <h1>Custom Group</h1>\n    <div class="row cf">\n      <div class="col2">\n        <p>Groups allow you to track what is important to you.</p>\n        <input type="text" id="group-name" placeholder="Name Your Group" ng-model="groupEdit.group_name" />\n      </div>\n      <div class="col4">\n        <p>Activate your group to populate these fields.</p>\n      </div>\n      <div class="col4">\n        <div class="group-toggle">\n          <on-off-switch value="groupEdit.related_apps"></on-off-switch>\n          <span>Related Apps</span>\n        </div>\n        <div class="group-toggle">\n          <on-off-switch value="groupEdit.activity_feed"></on-off-switch>\n          <span>Activity Feed</span>\n        </div>\n      </div>\n    </div>\n    <div class="row cf">\n      <div class="col2 border">\n        <app-search placeholder="\'Search for apps to add (Max \' + userSettings.maxGroupApps + \')\'" app-action="addApp"\n              ng-if="groupEdit.apps.length < userSettings.maxGroupApps"\n              app-suggestion-count="appSuggestionsCount" filtered-apps="groupEdit.apps"\n              search-has-focus="appSearchFocus">\n        </app-search>\n        <ul class="app-list">\n          <li ng-repeat="app in groupEdit.apps">\n            <div class="app">\n              <div class="app-icon-container">\n                <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} App Icon" class="app-icon">\n              </div>\n              <div class="app-text-container">\n                <span class="app-title" text-scroll>\n                  {[{app.title}]}\n                  <span class="app-data">\n                    <span class="meta">&middot;</span>\n                    <span class="flag-icon flag-icon-{[{app.country}]}"></span>\n                    <span class="meta">&middot;</span>\n                    <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n                  </span>\n                </span>\n                <span class="app-company">{[{app.publisher}]}</span>\n              </div>\n              <a class="app-edit" ng-click="removeApp($index)"><i class="iconic iconic-circle-x"></i></a>\n            </div>\n          </li>\n        </ul>\n      </div>\n      <div class="col2">\n        <dropdown class="attr-drop"\n                  options="groupAttr.opts"\n                  selected="groupAttr.select"\n                  select-action="addAttr">\n        </dropdown>\n        <ul class="custom-attribute-list">\n        <li ng-repeat="attrId in groupEdit.custom_attribute_ids track by $index" class="custom-attribute">\n          <span class="attr-name" text-scroll>\n            {[{userSettings.attributes[attrId].name}]}\n          </span>\n          <i class="iconic iconic-circle-x clickable" ng-click="removeAttr($index)"></i>\n          <span class="attr-keyword" ng-repeat="word in userSettings.attributes[attrId].signals">\n            {[{word}]}\n          </span>\n        </li>\n      </ul>\n      </div>\n    </div>\n    <div class="cf actions">\n      <button class="settings-button" ng-click="saveGroup(groupEdit)" ng-disabled="isSaving">\n        <i ng-class="{ \'iconic iconic-circle-check\': !isSaving, \'fa fa-cog fa-spin\': isSaving }"></i>&nbsp;\n        {[{isGroupCreate ? \'Create Group\' : \'Save Group\'}]}\n      </button>\n      <button class="settings-button red" ng-if="!isAttrCreate" ng-click="deletePrompt()" ng-disabled="isSaving">\n        <i ng-class="{ \'iconic iconic-trash\': !isDeleting, \'fa fa-cog fa-spin\': isDeleting }"></i>&nbsp;\n        Delete Group\n      </button>\n      <a ng-click="cancelGroup()">Cancel</a>\n    </div>\n  </div>\n  <div class="modal-remove-group" ng-if="showRemoveModal">\n    <h1>Delete Group &lsquo;{[{groupEdit.group_name}]}&rsquo;?</h1>\n    <div class="actions">\n      <button class="settings-button red" ng-click="deleteGroup(groupEdit)"\n            ng-disabled="isSaving">\n        <i ng-class="{ \'iconic iconic-trash\': !isSaving, \'fa fa-cog fa-spin\': isSaving }"></i>&nbsp;\n        Delete\n      </button>\n      <a ng-click="cancelPrompt()">Cancel</a>\n    </div>\n  </div>\n  <div class="modal-alerts" ng-show="showAlertModal" ng-class="{ \'keyword-active\': alertObject.keyword.active }">\n    <div class="app">\n      <div class="app-icon-container">\n        <img ng-src="{[{userSettings.groups[activeGroup].apps[activeApp].img_url}]}"\n        alt="{[{userSettings.groups[activeGroup].apps[activeApp].title}]} App Icon" class="app-icon">\n      </div>\n      <div class="app-text-container">\n        <span class="app-title">\n          {[{userSettings.groups[activeGroup].apps[activeApp].title}]}\n          <span class="app-data">\n            <span class="meta">&middot;</span>\n            <span class="flag-icon flag-icon-{[{userSettings.groups[activeGroup].apps[activeApp].country}]}"></span>\n            <span class="meta">&middot;</span>\n            <i class="fa fa-{[{userSettings.groups[activeGroup].apps[activeApp].store === \'google\' ? \'android\' : userSettings.groups[activeGroup].apps[activeApp].store}]} app-store-icon"></i>\n          </span>\n        </span>\n        <span class="app-company">{[{userSettings.groups[activeGroup].apps[activeApp].publisher}]}</span>\n      </div>\n    </div>\n    <h1>Alert Settings</h1>\n    <div class="cf trending-settings">\n      <h3>Trending Alerts</h3>\n      <div class="trending-widget">\n        <on-off-switch value="alertObject.trending.active"></on-off-switch>\n        <div class="days-drop">\n          <dropdown options="[{name:1,value:1},{name:3,value:3},{name:7,value:7},{name:14,value:14},{name:30,value:30}]"\n                selected="alertObject.trending.value.days">\n          </dropdown>\n        </div>\n        DAYS\n      </div>\n    </div>\n    <div class="cf version-settings">\n      <h3>Version Alerts</h3>\n      <div class="version-widget">\n        <on-off-switch value="alertObject.version.active"></on-off-switch>\n      </div>\n    </div>\n    <div class="keyword-settings">\n      <h3>Keyword Alerts<on-off-switch class="pull-right" value="alertObject.keyword.active" /></h3>\n      <h4 class="key-show" ng-class="{ \'key-hide\': !alertObject.keyword.active }">\n        Verbose Keyword Alerts\n        <on-off-switch class="pull-right" value="alertObject.keyword.value.verbose_alerts" />\n      </h4>\n      <key-word-widget class="key-show" ng-class="{ \'key-hide\': !alertObject.keyword.active }"\n            key-words="alertObject.keyword.value.signals">\n      </key-word-widget>\n    </div>\n    <div class="actions cf">\n      <button class="settings-button" ng-click="saveAlert()" ng-disabled="isSaving">\n        <i ng-class="{ \'iconic iconic-circle-check\': !isSaving, \'fa fa-cog fa-spin\': isSaving }"></i>&nbsp;\n        Save Alert Settings\n      </button>\n      <a ng-click="closeAlert()">Cancel</a>\n    </div>\n  </div>\n  <div class="modal-custom-attributes" ng-if="showCustomAttrModal">\n    <h1>Custom Attributes</h1>\n    <p>\n      <b>Custom attributes</b> allow you to track what is important to you.\n      <br/>\n      You pick the signals. You tell us what you want to know.\n    </p>\n    <input type="text" class="settings-input" id="custom-attribute-name" placeholder="Name your attribute"\n          ng-model="customAttrEdit.name" ng-class="{ invalid: customAttrNameInvalid }" />\n    <key-word-widget key-words="customAttrEdit.signals">\n    </key-word-widget>\n    <div class="actions">\n      <span ng-if="isAttrCreate" class="pull-left">\n        Allow 24 hours to gather data\n      </span>\n      <button class="settings-button" ng-click="saveAttr(customAttrEdit)" ng-disabled="isSaving">\n        <i ng-class="{ \'iconic iconic-circle-check\': !isSaving, \'fa fa-cog fa-spin\': isSaving }"></i>&nbsp;\n        {[{isAttrCreate ? \'Create Attribute\' : \'Save Attribute\'}]}\n      </button>\n      <button class="settings-button red" ng-if="!isAttrCreate" ng-click="deleteAttr(customAttrEdit)" ng-disabled="isDeleting">\n        <i ng-class="{ \'iconic iconic-trash\': !isDeleting, \'fa fa-cog fa-spin\': isDeleting }"></i>&nbsp;\n        Delete Attribute\n      </button>\n      <a ng-click="cancelAttr()">Cancel</a>\n    </div>\n  </div>\n</div>\n'),
$templateCache.put("reviews-view/reviews-view.html",'<div class="reviews-view">\n  <aside class="review-aside filter-aside">\n    <h2>Filter</h2>\n    <h4>Adjust this page by selecting from the filters below</h4>\n    <review-filters query="q"\n          event-name="updateEventName"\n          attributes="attributes"\n          custom-attributes="customAttributes"\n          show-all-dates="showAllDates"\n          start-date="startDate"\n          end-date="endDate"\n          star-count="star">\n    </review-filters>\n  </aside>\n  <section class="review-pane" ng-class="{ loading: loadingReviews }">\n    <section class="blue-stuff">\n      <h2>\n        Trending Review Sentiment\n        <tool-tip tip="reviews/reviewChart" orientation="bottom" template-url="reviews-view/tool-tip.html" />\n      </h2>\n      <h4>Historical review sentiment data over time</h4>\n      <review-graph ratings="ratingsOverTime" releases="releases"></review-graph>\n      <div class="controls">\n        <span class="release-label">\n          <svg width="18" height="18" class="release-label-icon">\n            <path d="M0,9\n                    H5\n                    A4 4 0 0 1 9 5\n                    V0\n                    M9,5\n                    A4 4 0 0 1 13 9\n                    H18\n                    M13,9\n                    A4 4 0 0 1 9 13\n                    V18\n                    M9,13\n                    A4 4 0 0 1 5 9" />\n          </svg>\n          <span class="release-label-text">RELEASE</span>\n        </span>\n        <a class="export-link" ng-click="exportChart()">\n          <i ng-class="{ \'iconic iconic-document\': !exportingChart, \'fa fa-cog fa-spin\': exportingChart }"></i>\n          &nbsp;\n          Export to PNG\n        </a>\n      </div>\n      <div class="review-trend-breakdown" ng-if="trend.percentage && trend.icon != \'0\'">\n        <div class="review-trend-icon">\n          <span class="breakdown-label">review star trend</span>\n          <i class="trend-icon {[{trend.icon}]}"> {[{trend.pointage | number:2}]}</i>\n          <span class="breakdown-label">last 7 days</span>\n        </div>\n      </div>\n    </section>\n    <section class="light-background">\n      <h2>Review Stream<tool-tip tip="reviews/reviewStream" template-url="reviews-view/tool-tip-review-stream.html"></tool-tip></h2>\n      <h4>View specific reviews from the app store</h4>\n      <div class="controls">\n        <pager event-name="updateEventName"\n              page="page"\n              total-pages="totalPages">\n        </pager>\n        <a class="pull-right export-link" ng-click="reviewsCsv()">\n          <i class="iconic iconic-document"></i>\n          &nbsp;\n          Export to CSV\n        </a>\n      </div>\n      <div class="synopsis">\n        <div class="reviews-synopsis">\n          <span class="review-synopsis-numbers">{[{totalReviews | prettyNumber}]} </span>\n          <span class="review-synopsis-title">REVIEWS</span>\n        </div>\n        <div ng-show="activeAttrs()">Filtered by: <span class="filters-applied">{[{activeAttrs()}]}</span></div>\n      </div>\n      <div class="loading-ring" ng-if="loadingReviews"><div></div></div>\n      <h4 class="no-review-data" ng-show="reviews.length <= 0">No reviews found.</h4>\n      <review-stream reviews="reviews" query="q" ng-hide="reviews.length <= 0"></review-stream>\n    </section>\n  </section>\n</div>\n'),$templateCache.put("reviews-view/tool-tip-review-stream.html",'<div class="tool-tip-content">\n	<h1>REVIEW STREAM</h1>\n	<p>In direct correlation to the Trending Review Sentiment chart, the Review Stream shows all reviews based on the selected filters. Reviews read as star rating, date of review, author or review, review title in bold, the review itself and the associated signals and attributes.</p>\n	<h1>How do I use this information?</h1>\n	<p>Use this to view all your reviews and drill into specific examples if necessary.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/3rwb63vtxy" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("reviews-view/tool-tip.html",'<div class="tool-tip-content">\n	<h1>TRENDING REVIEW SENTIMENT</h1>\n	<p>This chart displays the number of positive (4 and 5 star ratings) and negative reviews (3 star ratings and below) for your app by attribute for any given day over a specified date range. The circles on the graph indicate a version release. By clicking the export to CSV icon, you can download your results.</p>\n	<h1>How do I use this?</h1>\n	<p>Adjust your filters on the right hand side. Hover over any day on the chart to get detailed information on the number and percentage of positive and negative reviews..</p>\n	<h1>How do I use this information?</h1>\n	<p>Viewing this information helps you understand how your users are reacting to changes in your app and gives you insight into their overall sentiment. Big spikes create opportunities to examine what\'s working and what\'s not.</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/0ttlk06vjb" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("stats-view/stats-view.html",'<section class="stats-view">\n  <aside class="stats-aside filter-aside">\n    <h2>Attribute Filter</h2>\n    <h4>Adjust this page by selecting an Applause Attribute</h4>\n    <section bs-collapse>\n      <h4 class="stats-filter-header" bs-collapse-toggle ng-class="{ out: attrFilterIn }"\n            ng-click="attrFilterIn = !attrFilterIn">Applause Attributes</h4>\n      <ul class="stats-list filter-list filter-radio-list" bs-collapse-target>\n        <li ng-repeat="attr in attributeOrder" ng-click="setAttribute(attr)" ng-class="{ \'active\': attribute === attr }">\n          <span>{[{attr === \'quality\' ? \'All Attributes\' : attr | titleCase}]}</span>\n          <span class="pull-right">{[{attributes[attr].score || -1 | prettyNumber:\'score\'}]}</span>\n        </li>\n      </ul>\n    </section>\n    <section ng-if="showCustom" bs-collapse>\n      <h4 class="stats-filter-header" bs-collapse-toggle ng-class="{ out: customAttrFilterIn }"\n            ng-click="customAttrFilterIn = !customAttrFilterIn">\n        Custom Attributes\n        <tool-tip tip="stats/customAttrs" orientation="top">\n        </tool-tip>\n      </h4>\n      <ul class="stats-list filter-list filter-radio-list" bs-collapse-target>\n        <li ng-repeat="(key, value) in customAttributes" ng-click="setAttribute(key, !value.score)"\n              ng-class="{ \'active\': attribute === key, \'disabled\': !value.score }"\n              ng-attr-title="{[{value.score ? null : \'No Data\'}]}">\n          <span class="attr-name" text-scroll>{[{key}]}</span>\n          <span class="pull-right">{[{value.score || -1 | prettyNumber:\'score\' }]}</span>\n          <span class="pull-right no-data" ng-show="value.noData">No Data</span>\n        </li>\n      </ul>\n    </section>\n  </aside>\n  <div class="stats-pane">\n    <div class="blue-stuff">\n      <h2>\n        Trending Applause Attributes\n        <tool-tip tip="stats/statChart" orientation="bottom" template-url="stats-view/tool-tip.html">\n        </tool-tip>\n      </h2>\n      <h4>Historical Applause Attribute data</h4>\n      <score-over-time-graph chart-data="chartData" score-attribute="attribute" releases="releases">\n      </score-over-time-graph>\n      <div class="controls">\n        <a class="export-link" ng-click="exportChart()">\n          <i ng-class="{ \'iconic iconic-document\': !exportingChart, \'fa fa-cog fa-spin\': exportingChart }"></i>\n          &nbsp;\n          Export to PNG\n        </a>\n      </div>\n      <!-- <div class="release-label">\n        <svg width="18" height="18" class="release-label-icon">\n          <path d="M0,9\n            H5\n            A4 4 0 0 1 9 5\n            V0\n            M9,5\n            A4 4 0 0 1 13 9\n            H18\n            M13,9\n            A4 4 0 0 1 9 13\n            V18\n            M9,13\n            A4 4 0 0 1 5 9" />\n          </svg>\n          <span class="release-label-text">RELEASE</span>\n        </div> -->\n        <div class="stats-breakdown">\n          <div class="review-count">\n            {[{ reviewCountData[attribute].review_count | prettyNumber }]}\n            <span class="breakdown-label">Reviews</span>\n          </div>\n          <div class="review-average">\n            {[{ reviewCountData[attribute].daily_avg | number:2 }]}\n            <span class="breakdown-label">Daily Average</span>\n          </div>\n          <div class="review-trend">\n            <i class="iconic iconic-caret-{[{ trends[attribute].trend === \'up\' ? \'top\' : \'bottom\' }]}"></i>\n            <span class="breakdown-label">Trend</span>\n          </div>\n        </div>\n      </div>\n      <section class="signal-section light-background" ng-hide="attribute === \'quality\'">\n        <h2>{[{attribute | titleCase}]} Signals<tool-tip tip="stats/attribute"></tool-tip></h2>\n        <h4>Dive into the signals that are driving your {[{attribute | titleCase}]} attribute</h4>\n        <div class="stats-breakdown">\n          <div class="signal-count">\n            {[{signals[attribute].total_signals | number:0}]}\n            <span class="breakdown-label">\n              Signals\n            </span>\n          </div>\n          <div class="hit-count">\n            {[{signals[attribute].total_hits | number:0}]}\n            <span class="breakdown-label">\n              Unique Hits\n            </span>\n          </div>\n        </div>\n        <table class="detail-table stat-table">\n          <thead>\n            <tr>\n              <th>Star Rating Distribution</th>\n              <th>Signal</th>\n              <th class="active">Hits</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr ng-repeat="signal in signals[attribute].ordered_signal_list" ng-click="gotoReviews(signal.signal)" class="click-me">\n              <td>\n                <span class="signal-star" ng-repeat="star in [0, 1, 2, 3, 4]"\n                  ng-class="{ \'active\': signals[attribute].signals[signal.signal].percents[star] === signals[attribute].signals[signal.signal].max_percent }">\n                  <span class="star-amount-container">\n                    <span class="star-amount"\n                      ng-style="{ \'height\': signals[attribute].signals[signal.signal].percents[star] + \'%\' }">\n                    </span>\n                  </span>\n                  <span class="iconic iconic-star"></span>\n                </span>\n              </td>\n              <td>{[{signal.signal}]}</td>\n              <td>{[{signals[attribute].signals[signal.signal].total_hits}]}</td>\n            </tr>\n          </tbody>\n        </table>\n      </section>\n    </div>\n  </section>'),$templateCache.put("stats-view/tool-tip.html",'<div class="tool-tip-content">\n	<h1>TRENDING APPLAUSE ATTRIBUTES</h1>\n	<p>This chart displays Applause Attribute ranking for a selected attribute across the life span of available data. It highlights how many reviews you have for that specific attribute, the average number of new reviews per day and the percentage change over time (whether positive or negative). The circles on the graph indicate a new version release.</p>\n	<h1>How do I use this information?</h1>\n	<p>By viewing Applause Attribute trends over time, you gain a sense for what impact historical changes in your app have had on user sentiment. It is helpful to monitor this chart after major releases (which are plotted on the chart).</p>\n	<h1>See it in action</h1>\n	<iframe src="//fast.wistia.net/embed/iframe/mp024e9sor" allowtransparency="true" frameborder="0" scrolling="no" class="wistia_embed" name="wistia_embed" allowfullscreen mozallowfullscreen webkitallowfullscreen oallowfullscreen msallowfullscreen width="640" height="383"></iframe><script src="//fast.wistia.net/assets/external/E-v1.js" async></script>\n</div>'),$templateCache.put("welcome-view/welcome-view.html",'<div class="welcome-view">\n  <img src="/analyticsv3/static/images/applause-logo-white.svg" alt="Applause Logo" class="logo">\n  <section class="copy">\n    <h1>\n      ALX&nbsp;<span>&deg;</span>\n      <br />\n      <span>APPLAUSE ANALYTICS</span>\n    </h1>\n    <hr />\n    <p>\n      Search for your app to get started.\n    </p>\n  </section>\n  <section class="app-search-container">\n    <app-search placeholder="\'Search for your app...\'" app-action="goToApp" app-suggestion-count="appSuggestionsCount"\n          search-has-focus="searchHasFocus" filtered-apps="filteredApps">\n    </app-search>\n  </section>\n  <ul class="group-list">\n    <li class="group" ng-repeat="(key, group) in groups" bs-collapse data-start-collapsed="true">\n      <h3 class="clickable" bs-collapse-toggle ng-click="out = !out" ng-class="{ out: out }">\n        {[{group.group_name}]}\n      </h3>\n      <ul class="app-list" bs-collapse-target>\n        <li ng-repeat="app in group.apps" class="clickable" ng-click="goToApp(app)">\n          <div class="app">\n            <div class="app-icon-container">\n              <img ng-src="{[{app.img_url}]}" alt="{[{app.title}]} App Icon" class="app-icon">\n            </div>\n            <div class="app-text-container">\n              <span class="app-title">\n                {[{app.title}]}\n                <span class="app-data">\n                  <span class="meta">&middot;</span>\n                  <span class="flag-icon flag-icon-{[{app.country}]}"></span>\n                  <span class="meta">&middot;</span>\n                  <i class="fa fa-{[{app.store === \'google\' ? \'android\' : app.store}]} app-store-icon"></i>\n                </span>\n              </span>\n              <span class="app-company">{[{app.publisher}]}</span>\n            </div>\n          </div>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</div>')}]);